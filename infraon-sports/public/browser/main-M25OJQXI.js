import{A as Li,B as dn,a as W,b as Se,c as jP,d as VI,e as vm,f as k,g as LI,h as rh,i as jI,j as BI,k as UI,l as wm,m as $I,n as Cu,o as _m,p as ih,q as HI,r as zI,s as Em,t as tt,u as $o,v as vr,w as oh,x as Tu,y as qI,z as GI}from"./chunk-JDRTXYQ5.js";var oI=jP((jr,iI)=>{(function(t,e){typeof jr=="object"&&typeof iI<"u"?iI.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Sweetalert2=e())})(jr,function(){"use strict";function t(v,d){(d==null||d>v.length)&&(d=v.length);for(var h=0,y=Array(d);h<d;h++)y[h]=v[h];return y}function e(v){if(Array.isArray(v))return v}function n(v){if(Array.isArray(v))return t(v)}function r(v,d,h){if(typeof v=="function"?v===d:v.has(d))return arguments.length<3?d:h;throw new TypeError("Private element is not present on this object")}function i(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function o(v,d,h){return d=N(d),T(v,X()?Reflect.construct(d,h||[],N(v).constructor):d.apply(v,h))}function s(v,d){if(d.has(v))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(v,d){if(!(v instanceof d))throw new TypeError("Cannot call a class as a function")}function c(v,d){return v.get(r(v,d))}function l(v,d,h){s(v,d),d.set(v,h)}function f(v,d,h){return v.set(r(v,d),h),h}function m(v,d,h){if(X())return Reflect.construct.apply(null,arguments);var y=[null];y.push.apply(y,d);var b=new(v.bind.apply(v,y));return b}function w(v,d){for(var h=0;h<d.length;h++){var y=d[h];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,D(y.key),y)}}function E(v,d,h){return d&&w(v.prototype,d),Object.defineProperty(v,"prototype",{writable:!1}),v}function M(v,d){var h=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(!h){if(Array.isArray(v)||(h=Br(v))||d){h&&(v=h);var y=0,b=function(){};return{s:b,n:function(){return y>=v.length?{done:!0}:{done:!1,value:v[y++]}},e:function(me){throw me},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var L,K=!0,we=!1;return{s:function(){h=h.call(v)},n:function(){var me=h.next();return K=me.done,me},e:function(me){we=!0,L=me},f:function(){try{K||h.return==null||h.return()}finally{if(we)throw L}}}}function P(){return P=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(v,d,h){var y=S(v,d);if(y){var b=Object.getOwnPropertyDescriptor(y,d);return b.get?b.get.call(arguments.length<3?v:h):b.value}},P.apply(null,arguments)}function N(v){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(d){return d.__proto__||Object.getPrototypeOf(d)},N(v)}function H(v,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(d&&d.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),d&&I(v,d)}function X(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X=function(){return!!v})()}function $(v){if(typeof Symbol<"u"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function re(v,d){var h=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(h!=null){var y,b,L,K,we=[],me=!0,at=!1;try{if(L=(h=h.call(v)).next,d!==0)for(;!(me=(y=L.call(h)).done)&&(we.push(y.value),we.length!==d);me=!0);}catch(Du){at=!0,b=Du}finally{try{if(!me&&h.return!=null&&(K=h.return(),Object(K)!==K))return}finally{if(at)throw b}}return we}}function le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(v,d){if(d&&(typeof d=="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i(v)}function I(v,d){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,y){return h.__proto__=y,h},I(v,d)}function C(v,d){return e(v)||re(v,d)||Br(v,d)||le()}function S(v,d){for(;!{}.hasOwnProperty.call(v,d)&&(v=N(v))!==null;);return v}function A(v){return n(v)||$(v)||Br(v)||se()}function R(v,d){if(typeof v!="object"||!v)return v;var h=v[Symbol.toPrimitive];if(h!==void 0){var y=h.call(v,d);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)}function D(v){var d=R(v,"string");return typeof d=="symbol"?d:d+""}function Ge(v){"@babel/helpers - typeof";return Ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},Ge(v)}function Br(v,d){if(v){if(typeof v=="string")return t(v,d);var h={}.toString.call(v).slice(8,-1);return h==="Object"&&v.constructor&&(h=v.constructor.name),h==="Map"||h==="Set"?Array.from(v):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?t(v,d):void 0}}var Jg=100,fe={},Io=function(){fe.previousActiveElement instanceof HTMLElement?(fe.previousActiveElement.focus(),fe.previousActiveElement=null):document.body&&document.body.focus()},Xc=function(d){return new Promise(function(h){if(!d)return h();var y=window.scrollX,b=window.scrollY;fe.restoreFocusTimeout=setTimeout(function(){Io(),h()},Jg),window.scrollTo(y,b)})},eu="swal2-",Xg=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],F=Xg.reduce(function(v,d){return v[d]=eu+d,v},{}),kt=["success","warning","info","question","error"],Gs=kt.reduce(function(v,d){return v[d]=eu+d,v},{}),Ci="SweetAlert2:",tu=function(d){return d.charAt(0).toUpperCase()+d.slice(1)},vt=function(d){console.warn("".concat(Ci," ").concat(Ge(d)==="object"?d.join(" "):d))},Ur=function(d){console.error("".concat(Ci," ").concat(d))},vd=[],Ws=function(d){vd.includes(d)||(vd.push(d),vt(d))},Do=function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Ws('"'.concat(d,'" is deprecated and will be removed in the next major release.').concat(h?' Use "'.concat(h,'" instead.'):""))},Ti=function(d){return typeof d=="function"?d():d},Co=function(d){return d&&typeof d.toPromise=="function"},$r=function(d){return Co(d)?d.toPromise():Promise.resolve(d)},To=function(d){return d&&Promise.resolve(d)===d},jt=function(){return document.body.querySelector(".".concat(F.container))},Si=function(d){var h=jt();return h?h.querySelector(d):null},Qt=function(d){return Si(".".concat(d))},Le=function(){return Qt(F.popup)},Ai=function(){return Qt(F.icon)},nu=function(){return Qt(F["icon-content"])},ru=function(){return Qt(F.title)},iu=function(){return Qt(F["html-container"])},Ks=function(){return Qt(F.image)},So=function(){return Qt(F["progress-steps"])},xi=function(){return Qt(F["validation-message"])},He=function(){return Si(".".concat(F.actions," .").concat(F.confirm))},ot=function(){return Si(".".concat(F.actions," .").concat(F.cancel))},An=function(){return Si(".".concat(F.actions," .").concat(F.deny))},wd=function(){return Qt(F["input-label"])},Hr=function(){return Si(".".concat(F.loader))},Ao=function(){return Qt(F.actions)},Mi=function(){return Qt(F.footer)},xo=function(){return Qt(F["timer-progress-bar"])},Qs=function(){return Qt(F.close)},ou=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,su=function(){var d=Le();if(!d)return[];var h=d.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),y=Array.from(h).sort(function(K,we){var me=parseInt(K.getAttribute("tabindex")||"0"),at=parseInt(we.getAttribute("tabindex")||"0");return me>at?1:me<at?-1:0}),b=d.querySelectorAll(ou),L=Array.from(b).filter(function(K){return K.getAttribute("tabindex")!=="-1"});return A(new Set(y.concat(L))).filter(function(K){return ft(K)})},au=function(){return Yt(document.body,F.shown)&&!Yt(document.body,F["toast-shown"])&&!Yt(document.body,F["no-backdrop"])},Ri=function(){var d=Le();return d?Yt(d,F.toast):!1},_d=function(){var d=Le();return d?d.hasAttribute("data-loading"):!1},zt=function(d,h){if(d.textContent="",h){var y=new DOMParser,b=y.parseFromString(h,"text/html"),L=b.querySelector("head");L&&Array.from(L.childNodes).forEach(function(we){d.appendChild(we)});var K=b.querySelector("body");K&&Array.from(K.childNodes).forEach(function(we){we instanceof HTMLVideoElement||we instanceof HTMLAudioElement?d.appendChild(we.cloneNode(!0)):d.appendChild(we)})}},Yt=function(d,h){if(!h)return!1;for(var y=h.split(/\s+/),b=0;b<y.length;b++)if(!d.classList.contains(y[b]))return!1;return!0},cu=function(d,h){Array.from(d.classList).forEach(function(y){!Object.values(F).includes(y)&&!Object.values(Gs).includes(y)&&!Object.values(h.showClass||{}).includes(y)&&d.classList.remove(y)})},Bt=function(d,h,y){if(cu(d,h),!!h.customClass){var b=h.customClass[y];if(b){if(typeof b!="string"&&!b.forEach){vt("Invalid type of customClass.".concat(y,'! Expected string or iterable object, got "').concat(Ge(b),'"'));return}Me(d,b)}}},xn=function(d,h){if(!h)return null;switch(h){case"select":case"textarea":case"file":return d.querySelector(".".concat(F.popup," > .").concat(F[h]));case"checkbox":return d.querySelector(".".concat(F.popup," > .").concat(F.checkbox," input"));case"radio":return d.querySelector(".".concat(F.popup," > .").concat(F.radio," input:checked"))||d.querySelector(".".concat(F.popup," > .").concat(F.radio," input:first-child"));case"range":return d.querySelector(".".concat(F.popup," > .").concat(F.range," input"));default:return d.querySelector(".".concat(F.popup," > .").concat(F.input))}},uu=function(d){if(d.focus(),d.type!=="file"){var h=d.value;d.value="",d.value=h}},Mo=function(d,h,y){!d||!h||(typeof h=="string"&&(h=h.split(/\s+/).filter(Boolean)),h.forEach(function(b){Array.isArray(d)?d.forEach(function(L){y?L.classList.add(b):L.classList.remove(b)}):y?d.classList.add(b):d.classList.remove(b)}))},Me=function(d,h){Mo(d,h,!0)},qt=function(d,h){Mo(d,h,!1)},zn=function(d,h){for(var y=Array.from(d.children),b=0;b<y.length;b++){var L=y[b];if(L instanceof HTMLElement&&Yt(L,h))return L}},et=function(d,h,y){y==="".concat(parseInt(y))&&(y=parseInt(y)),y||parseInt(y)===0?d.style.setProperty(h,typeof y=="number"?"".concat(y,"px"):y):d.style.removeProperty(h)},ht=function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";d&&(d.style.display=h)},st=function(d){d&&(d.style.display="none")},zr=function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";d&&new MutationObserver(function(){Ro(d,d.innerHTML,h)}).observe(d,{childList:!0,subtree:!0})},Ed=function(d,h,y,b){var L=d.querySelector(h);L&&L.style.setProperty(y,b)},Ro=function(d,h){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";h?ht(d,y):st(d)},ft=function(d){return!!(d&&(d.offsetWidth||d.offsetHeight||d.getClientRects().length))},em=function(){return!ft(He())&&!ft(An())&&!ft(ot())},bd=function(d){return d.scrollHeight>d.clientHeight},No=function(d){var h=window.getComputedStyle(d),y=parseFloat(h.getPropertyValue("animation-duration")||"0"),b=parseFloat(h.getPropertyValue("transition-duration")||"0");return y>0||b>0},Ys=function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=xo();y&&ft(y)&&(h&&(y.style.transition="none",y.style.width="100%"),setTimeout(function(){y.style.transition="width ".concat(d/1e3,"s linear"),y.style.width="0%"},10))},lu=function(){var d=xo();if(d){var h=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";var y=parseInt(window.getComputedStyle(d).width),b=h/y*100;d.style.width="".concat(b,"%")}},Po=function(){return typeof window>"u"||typeof document>"u"},dr=`
 <div aria-labelledby="`.concat(F.title,'" aria-describedby="').concat(F["html-container"],'" class="').concat(F.popup,`" tabindex="-1">
   <button type="button" class="`).concat(F.close,`"></button>
   <ul class="`).concat(F["progress-steps"],`"></ul>
   <div class="`).concat(F.icon,`"></div>
   <img class="`).concat(F.image,`" />
   <h2 class="`).concat(F.title,'" id="').concat(F.title,`"></h2>
   <div class="`).concat(F["html-container"],'" id="').concat(F["html-container"],`"></div>
   <input class="`).concat(F.input,'" id="').concat(F.input,`" />
   <input type="file" class="`).concat(F.file,`" />
   <div class="`).concat(F.range,`">
     <input type="range" />
     <output></output>
   </div>
   <select class="`).concat(F.select,'" id="').concat(F.select,`"></select>
   <div class="`).concat(F.radio,`"></div>
   <label class="`).concat(F.checkbox,`">
     <input type="checkbox" id="`).concat(F.checkbox,`" />
     <span class="`).concat(F.label,`"></span>
   </label>
   <textarea class="`).concat(F.textarea,'" id="').concat(F.textarea,`"></textarea>
   <div class="`).concat(F["validation-message"],'" id="').concat(F["validation-message"],`"></div>
   <div class="`).concat(F.actions,`">
     <div class="`).concat(F.loader,`"></div>
     <button type="button" class="`).concat(F.confirm,`"></button>
     <button type="button" class="`).concat(F.deny,`"></button>
     <button type="button" class="`).concat(F.cancel,`"></button>
   </div>
   <div class="`).concat(F.footer,`"></div>
   <div class="`).concat(F["timer-progress-bar-container"],`">
     <div class="`).concat(F["timer-progress-bar"],`"></div>
   </div>
 </div>
`).replace(/(^|\n)\s*/g,""),Id=function(){var d=jt();return d?(d.remove(),qt([document.documentElement,document.body],[F["no-backdrop"],F["toast-shown"],F["has-column"]]),!0):!1},hr=function(){fe.currentInstance.resetValidationMessage()},du=function(){var d=Le(),h=zn(d,F.input),y=zn(d,F.file),b=d.querySelector(".".concat(F.range," input")),L=d.querySelector(".".concat(F.range," output")),K=zn(d,F.select),we=d.querySelector(".".concat(F.checkbox," input")),me=zn(d,F.textarea);h.oninput=hr,y.onchange=hr,K.onchange=hr,we.onchange=hr,me.oninput=hr,b.oninput=function(){hr(),L.value=b.value},b.onchange=function(){hr(),L.value=b.value}},hu=function(d){return typeof d=="string"?document.querySelector(d):d},Dd=function(d){var h=Le();h.setAttribute("role",d.toast?"alert":"dialog"),h.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||h.setAttribute("aria-modal","true")},Cd=function(d){window.getComputedStyle(d).direction==="rtl"&&Me(jt(),F.rtl)},tm=function(d){var h=Id();if(Po()){Ur("SweetAlert2 requires document to initialize");return}var y=document.createElement("div");y.className=F.container,h&&Me(y,F["no-transition"]),zt(y,dr);var b=hu(d.target);b.appendChild(y),Dd(d),Cd(b),du()},Ni=function(d,h){d instanceof HTMLElement?h.appendChild(d):Ge(d)==="object"?Td(d,h):d&&zt(h,d)},Td=function(d,h){d.jquery?fu(h,d):zt(h,d.toString())},fu=function(d,h){if(d.textContent="",0 in h)for(var y=0;y in h;y++)d.appendChild(h[y].cloneNode(!0));else d.appendChild(h.cloneNode(!0))},_n=function(){if(Po())return!1;var v=document.createElement("div");return typeof v.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof v.style.animation<"u"?"animationend":!1}(),qr=function(d,h){var y=Ao(),b=Hr();!y||!b||(!h.showConfirmButton&&!h.showDenyButton&&!h.showCancelButton?st(y):ht(y),Bt(y,h,"actions"),pu(y,b,h),zt(b,h.loaderHtml||""),Bt(b,h,"loader"))};function pu(v,d,h){var y=He(),b=An(),L=ot();!y||!b||!L||(Zs(y,"confirm",h),Zs(b,"deny",h),Zs(L,"cancel",h),nm(y,b,L,h),h.reverseButtons&&(h.toast?(v.insertBefore(L,y),v.insertBefore(b,y)):(v.insertBefore(L,d),v.insertBefore(b,d),v.insertBefore(y,d))))}function nm(v,d,h,y){if(!y.buttonsStyling){qt([v,d,h],F.styled);return}Me([v,d,h],F.styled),y.confirmButtonColor&&(v.style.backgroundColor=y.confirmButtonColor,Me(v,F["default-outline"])),y.denyButtonColor&&(d.style.backgroundColor=y.denyButtonColor,Me(d,F["default-outline"])),y.cancelButtonColor&&(h.style.backgroundColor=y.cancelButtonColor,Me(h,F["default-outline"]))}function Zs(v,d,h){var y=tu(d);Ro(v,h["show".concat(y,"Button")],"inline-block"),zt(v,h["".concat(d,"ButtonText")]||""),v.setAttribute("aria-label",h["".concat(d,"ButtonAriaLabel")]||""),v.className=F[d],Bt(v,h,"".concat(d,"Button"))}var Sd=function(d,h){var y=Qs();y&&(zt(y,h.closeButtonHtml||""),Bt(y,h,"closeButton"),Ro(y,h.showCloseButton),y.setAttribute("aria-label",h.closeButtonAriaLabel||""))},Ad=function(d,h){var y=jt();y&&(gu(y,h.backdrop),mu(y,h.position),xd(y,h.grow),Bt(y,h,"container"))};function gu(v,d){typeof d=="string"?v.style.background=d:d||Me([document.documentElement,document.body],F["no-backdrop"])}function mu(v,d){d&&(d in F?Me(v,F[d]):(vt('The "position" parameter is not valid, defaulting to "center"'),Me(v,F.center)))}function xd(v,d){d&&Me(v,F["grow-".concat(d)])}var Be={innerParams:new WeakMap,domCache:new WeakMap},rm=["input","file","range","select","radio","checkbox","textarea"],im=function(d,h){var y=Le();if(y){var b=Be.innerParams.get(d),L=!b||h.input!==b.input;rm.forEach(function(K){var we=zn(y,F[K]);we&&(om(K,h.inputAttributes),we.className=F[K],L&&st(we))}),h.input&&(L&&Md(h),Gr(h))}},Md=function(d){if(d.input){if(!he[d.input]){Ur("Unexpected type of input! Expected ".concat(Object.keys(he).join(" | "),', got "').concat(d.input,'"'));return}var h=ko(d.input);if(h){var y=he[d.input](h,d);ht(h),d.inputAutoFocus&&setTimeout(function(){uu(y)})}}},Rd=function(d){for(var h=0;h<d.attributes.length;h++){var y=d.attributes[h].name;["id","type","value","style"].includes(y)||d.removeAttribute(y)}},om=function(d,h){var y=Le();if(y){var b=xn(y,d);if(b){Rd(b);for(var L in h)b.setAttribute(L,h[L])}}},Gr=function(d){if(d.input){var h=ko(d.input);h&&Bt(h,d,"input")}},En=function(d,h){!d.placeholder&&h.inputPlaceholder&&(d.placeholder=h.inputPlaceholder)},fr=function(d,h,y){if(y.inputLabel){var b=document.createElement("label"),L=F["input-label"];b.setAttribute("for",d.id),b.className=L,Ge(y.customClass)==="object"&&Me(b,y.customClass.inputLabel),b.innerText=y.inputLabel,h.insertAdjacentElement("beforebegin",b)}},ko=function(d){var h=Le();if(h)return zn(h,F[d]||F.input)},Oo=function(d,h){["string","number"].includes(Ge(h))?d.value="".concat(h):To(h)||vt('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(Ge(h),'"'))},he={};he.text=he.email=he.password=he.number=he.tel=he.url=he.search=he.date=he["datetime-local"]=he.time=he.week=he.month=function(v,d){return Oo(v,d.inputValue),fr(v,v,d),En(v,d),v.type=d.input,v},he.file=function(v,d){return fr(v,v,d),En(v,d),v},he.range=function(v,d){var h=v.querySelector("input"),y=v.querySelector("output");return Oo(h,d.inputValue),h.type=d.input,Oo(y,d.inputValue),fr(h,v,d),v},he.select=function(v,d){if(v.textContent="",d.inputPlaceholder){var h=document.createElement("option");zt(h,d.inputPlaceholder),h.value="",h.disabled=!0,h.selected=!0,v.appendChild(h)}return fr(v,v,d),v},he.radio=function(v){return v.textContent="",v},he.checkbox=function(v,d){var h=xn(Le(),"checkbox");h.value="1",h.checked=!!d.inputValue;var y=v.querySelector("span");return zt(y,d.inputPlaceholder),h},he.textarea=function(v,d){Oo(v,d.inputValue),En(v,d),fr(v,v,d);var h=function(b){return parseInt(window.getComputedStyle(b).marginLeft)+parseInt(window.getComputedStyle(b).marginRight)};return setTimeout(function(){if("MutationObserver"in window){var y=parseInt(window.getComputedStyle(Le()).width),b=function(){if(document.body.contains(v)){var K=v.offsetWidth+h(v);K>y?Le().style.width="".concat(K,"px"):et(Le(),"width",d.width)}};new MutationObserver(b).observe(v,{attributes:!0,attributeFilter:["style"]})}}),v};var Js=function(d,h){var y=iu();y&&(zr(y),Bt(y,h,"htmlContainer"),h.html?(Ni(h.html,y),ht(y,"block")):h.text?(y.textContent=h.text,ht(y,"block")):st(y),im(d,h))},Fo=function(d,h){var y=Mi();y&&(zr(y),Ro(y,h.footer,"block"),h.footer&&Ni(h.footer,y),Bt(y,h,"footer"))},Vo=function(d,h){var y=Be.innerParams.get(d),b=Ai();if(b){if(y&&h.icon===y.icon){kd(b,h),Nd(b,h);return}if(!h.icon&&!h.iconHtml){st(b);return}if(h.icon&&Object.keys(Gs).indexOf(h.icon)===-1){Ur('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(h.icon,'"')),st(b);return}ht(b),kd(b,h),Nd(b,h),Me(b,h.showClass&&h.showClass.icon)}},Nd=function(d,h){for(var y=0,b=Object.entries(Gs);y<b.length;y++){var L=C(b[y],2),K=L[0],we=L[1];h.icon!==K&&qt(d,we)}Me(d,h.icon&&Gs[h.icon]),cm(d,h),Pd(),Bt(d,h,"icon")},Pd=function(){var d=Le();if(d)for(var h=window.getComputedStyle(d).getPropertyValue("background-color"),y=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix"),b=0;b<y.length;b++)y[b].style.backgroundColor=h},sm=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,am=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,kd=function(d,h){if(!(!h.icon&&!h.iconHtml)){var y=d.innerHTML,b="";if(h.iconHtml)b=Pi(h.iconHtml);else if(h.icon==="success")b=sm,y=y.replace(/ style=".*?"/g,"");else if(h.icon==="error")b=am;else if(h.icon){var L={question:"?",warning:"!",info:"i"};b=Pi(L[h.icon])}y.trim()!==b.trim()&&zt(d,b)}},cm=function(d,h){if(h.iconColor){d.style.color=h.iconColor,d.style.borderColor=h.iconColor;for(var y=0,b=[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"];y<b.length;y++){var L=b[y];Ed(d,L,"background-color",h.iconColor)}Ed(d,".swal2-success-ring","border-color",h.iconColor)}},Pi=function(d){return'<div class="'.concat(F["icon-content"],'">').concat(d,"</div>")},pr=function(d,h){var y=Ks();if(y){if(!h.imageUrl){st(y);return}ht(y,""),y.setAttribute("src",h.imageUrl),y.setAttribute("alt",h.imageAlt||""),et(y,"width",h.imageWidth),et(y,"height",h.imageHeight),y.className=F.image,Bt(y,h,"image")}},Od=function(d,h){var y=jt(),b=Le();if(!(!y||!b)){if(h.toast){et(y,"width",h.width),b.style.width="100%";var L=Hr();L&&b.insertBefore(L,Ai())}else et(b,"width",h.width);et(b,"padding",h.padding),h.color&&(b.style.color=h.color),h.background&&(b.style.background=h.background),st(xi()),Fd(b,h)}},Fd=function(d,h){var y=h.showClass||{};d.className="".concat(F.popup," ").concat(ft(d)?y.popup:""),h.toast?(Me([document.documentElement,document.body],F["toast-shown"]),Me(d,F.toast)):Me(d,F.modal),Bt(d,h,"popup"),typeof h.customClass=="string"&&Me(d,h.customClass),h.icon&&Me(d,F["icon-".concat(h.icon)])},Vd=function(d,h){var y=So();if(y){var b=h.progressSteps,L=h.currentProgressStep;if(!b||b.length===0||L===void 0){st(y);return}ht(y),y.textContent="",L>=b.length&&vt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),b.forEach(function(K,we){var me=ki(K);if(y.appendChild(me),we===L&&Me(me,F["active-progress-step"]),we!==b.length-1){var at=um(h);y.appendChild(at)}})}},ki=function(d){var h=document.createElement("li");return Me(h,F["progress-step"]),zt(h,d),h},um=function(d){var h=document.createElement("li");return Me(h,F["progress-step-line"]),d.progressStepsDistance&&et(h,"width",d.progressStepsDistance),h},lm=function(d,h){var y=ru();y&&(zr(y),Ro(y,h.title||h.titleText,"block"),h.title&&Ni(h.title,y),h.titleText&&(y.innerText=h.titleText),Bt(y,h,"title"))},Ld=function(d,h){Od(d,h),Ad(d,h),Vd(d,h),Vo(d,h),pr(d,h),lm(d,h),Sd(d,h),Js(d,h),qr(d,h),Fo(d,h);var y=Le();typeof h.didRender=="function"&&y&&h.didRender(y)},gr=function(){return ft(Le())},jd=function(){var d;return(d=He())===null||d===void 0?void 0:d.click()},dm=function(){var d;return(d=An())===null||d===void 0?void 0:d.click()},Lo=function(){var d;return(d=ot())===null||d===void 0?void 0:d.click()},qn=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),yu=function(d){d.keydownTarget&&d.keydownHandlerAdded&&(d.keydownTarget.removeEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!1)},jo=function(d,h,y){yu(d),h.toast||(d.keydownHandler=function(b){return Ze(h,b,y)},d.keydownTarget=h.keydownListenerCapture?window:Le(),d.keydownListenerCapture=h.keydownListenerCapture,d.keydownTarget.addEventListener("keydown",d.keydownHandler,{capture:d.keydownListenerCapture}),d.keydownHandlerAdded=!0)},Wr=function(d,h){var y,b=su();if(b.length){d=d+h,d===b.length?d=0:d===-1&&(d=b.length-1),b[d].focus();return}(y=Le())===null||y===void 0||y.focus()},vu=["ArrowRight","ArrowDown"],wu=["ArrowLeft","ArrowUp"],Ze=function(d,h,y){d&&(h.isComposing||h.keyCode===229||(d.stopKeydownPropagation&&h.stopPropagation(),h.key==="Enter"?hm(h,d):h.key==="Tab"?fm(h):[].concat(vu,wu).includes(h.key)?Bd(h.key):h.key==="Escape"&&Ud(h,d,y)))},hm=function(d,h){if(Ti(h.allowEnterKey)){var y=xn(Le(),h.input);if(d.target&&y&&d.target instanceof HTMLElement&&d.target.outerHTML===y.outerHTML){if(["textarea","file"].includes(h.input))return;jd(),d.preventDefault()}}},fm=function(d){for(var h=d.target,y=su(),b=-1,L=0;L<y.length;L++)if(h===y[L]){b=L;break}d.shiftKey?Wr(b,-1):Wr(b,1),d.stopPropagation(),d.preventDefault()},Bd=function(d){var h=Ao(),y=He(),b=An(),L=ot();if(!(!h||!y||!b||!L)){var K=[y,b,L];if(!(document.activeElement instanceof HTMLElement&&!K.includes(document.activeElement))){var we=vu.includes(d)?"nextElementSibling":"previousElementSibling",me=document.activeElement;if(me){for(var at=0;at<h.children.length;at++){if(me=me[we],!me)return;if(me instanceof HTMLButtonElement&&ft(me))break}me instanceof HTMLButtonElement&&me.focus()}}}},Ud=function(d,h,y){Ti(h.allowEscapeKey)&&(d.preventDefault(),y(qn.esc))},Kr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap},Xs=function(){var d=jt(),h=Array.from(document.body.children);h.forEach(function(y){y.contains(d)||(y.hasAttribute("aria-hidden")&&y.setAttribute("data-previous-aria-hidden",y.getAttribute("aria-hidden")||""),y.setAttribute("aria-hidden","true"))})},_u=function(){var d=Array.from(document.body.children);d.forEach(function(h){h.hasAttribute("data-previous-aria-hidden")?(h.setAttribute("aria-hidden",h.getAttribute("data-previous-aria-hidden")||""),h.removeAttribute("data-previous-aria-hidden")):h.removeAttribute("aria-hidden")})},Mn=typeof window<"u"&&!!window.GestureEvent,$d=function(){if(Mn&&!Yt(document.body,F.iosfix)){var d=document.body.scrollTop;document.body.style.top="".concat(d*-1,"px"),Me(document.body,F.iosfix),pm()}},pm=function(){var d=jt();if(d){var h;d.ontouchstart=function(y){h=Bo(y)},d.ontouchmove=function(y){h&&(y.preventDefault(),y.stopPropagation())}}},Bo=function(d){var h=d.target,y=jt(),b=iu();return!y||!b||Hd(d)||Eu(d)?!1:h===y||!bd(y)&&h instanceof HTMLElement&&h.tagName!=="INPUT"&&h.tagName!=="TEXTAREA"&&!(bd(b)&&b.contains(h))},Hd=function(d){return d.touches&&d.touches.length&&d.touches[0].touchType==="stylus"},Eu=function(d){return d.touches&&d.touches.length>1},ea=function(){if(Yt(document.body,F.iosfix)){var d=parseInt(document.body.style.top,10);qt(document.body,F.iosfix),document.body.style.top="",document.body.scrollTop=d*-1}},zd=function(){var d=document.createElement("div");d.className=F["scrollbar-measure"],document.body.appendChild(d);var h=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),h},Gn=null,gm=function(d){Gn===null&&(document.body.scrollHeight>window.innerHeight||d==="scroll")&&(Gn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Gn+zd(),"px"))},qd=function(){Gn!==null&&(document.body.style.paddingRight="".concat(Gn,"px"),Gn=null)};function Oi(v,d,h,y){Ri()?mr(v,y):(Xc(h).then(function(){return mr(v,y)}),yu(fe)),Mn?(d.setAttribute("style","display:none !important"),d.removeAttribute("class"),d.innerHTML=""):d.remove(),au()&&(qd(),ea(),_u()),Gd()}function Gd(){qt([document.documentElement,document.body],[F.shown,F["height-auto"],F["no-backdrop"],F["toast-shown"]])}function Wn(v){v=na(v);var d=Kr.swalPromiseResolve.get(this),h=bu(this);this.isAwaitingPromise?v.isDismissed||(Fi(this),d(v)):h&&d(v)}var bu=function(d){var h=Le();if(!h)return!1;var y=Be.innerParams.get(d);if(!y||Yt(h,y.hideClass.popup))return!1;qt(h,y.showClass.popup),Me(h,y.hideClass.popup);var b=jt();return qt(b,y.showClass.backdrop),Me(b,y.hideClass.backdrop),Wd(d,h,y),!0};function ta(v){var d=Kr.swalPromiseReject.get(this);Fi(this),d&&d(v)}var Fi=function(d){d.isAwaitingPromise&&(delete d.isAwaitingPromise,Be.innerParams.get(d)||d._destroy())},na=function(d){return typeof d>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d)},Wd=function(d,h,y){var b=jt(),L=_n&&No(h);typeof y.willClose=="function"&&y.willClose(h),L?Kd(d,h,b,y.returnFocus,y.didClose):Oi(d,b,y.returnFocus,y.didClose)},Kd=function(d,h,y,b,L){_n&&(fe.swalCloseEventFinishedCallback=Oi.bind(null,d,y,b,L),h.addEventListener(_n,function(K){K.target===h&&(fe.swalCloseEventFinishedCallback(),delete fe.swalCloseEventFinishedCallback)}))},mr=function(d,h){setTimeout(function(){typeof h=="function"&&h.bind(d.params)(),d._destroy&&d._destroy()})},Qr=function(d){var h=Le();if(h||new nh,h=Le(),!!h){var y=Hr();Ri()?st(Ai()):Qd(h,d),ht(y),h.setAttribute("data-loading","true"),h.setAttribute("aria-busy","true"),h.focus()}},Qd=function(d,h){var y=Ao(),b=Hr();!y||!b||(!h&&ft(He())&&(h=He()),ht(y),h&&(st(h),b.setAttribute("data-button-to-replace",h.className),y.insertBefore(b,h)),Me([d,y],F.loading))},Yd=function(d,h){h.input==="select"||h.input==="radio"?Xd(d,h):["text","email","number","tel","textarea"].some(function(y){return y===h.input})&&(Co(h.inputValue)||To(h.inputValue))&&(Qr(He()),Vi(d,h))},Zd=function(d,h){var y=d.getInput();if(!y)return null;switch(h.input){case"checkbox":return ra(y);case"radio":return Zt(y);case"file":return Jd(y);default:return h.inputAutoTrim?y.value.trim():y.value}},ra=function(d){return d.checked?1:0},Zt=function(d){return d.checked?d.value:null},Jd=function(d){return d.files&&d.files.length?d.getAttribute("multiple")!==null?d.files:d.files[0]:null},Xd=function(d,h){var y=Le();if(y){var b=function(K){h.input==="select"?u(y,g(K),h):h.input==="radio"&&p(y,g(K),h)};Co(h.inputOptions)||To(h.inputOptions)?(Qr(He()),$r(h.inputOptions).then(function(L){d.hideLoading(),b(L)})):Ge(h.inputOptions)==="object"?b(h.inputOptions):Ur("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(Ge(h.inputOptions)))}},Vi=function(d,h){var y=d.getInput();y&&(st(y),$r(h.inputValue).then(function(b){y.value=h.input==="number"?"".concat(parseFloat(b)||0):"".concat(b),ht(y),y.focus(),d.hideLoading()}).catch(function(b){Ur("Error in inputValue promise: ".concat(b)),y.value="",ht(y),y.focus(),d.hideLoading()}))};function u(v,d,h){var y=zn(v,F.select);if(y){var b=function(K,we,me){var at=document.createElement("option");at.value=me,zt(at,we),at.selected=_(me,h.inputValue),K.appendChild(at)};d.forEach(function(L){var K=L[0],we=L[1];if(Array.isArray(we)){var me=document.createElement("optgroup");me.label=K,me.disabled=!1,y.appendChild(me),we.forEach(function(at){return b(me,at[1],at[0])})}else b(y,we,K)}),y.focus()}}function p(v,d,h){var y=zn(v,F.radio);if(y){d.forEach(function(L){var K=L[0],we=L[1],me=document.createElement("input"),at=document.createElement("label");me.type="radio",me.name=F.radio,me.value=K,_(K,h.inputValue)&&(me.checked=!0);var Du=document.createElement("span");zt(Du,we),Du.className=F.label,at.appendChild(me),at.appendChild(Du),y.appendChild(at)});var b=y.querySelectorAll("input");b.length&&b[0].focus()}}var g=function v(d){var h=[];return d instanceof Map?d.forEach(function(y,b){var L=y;Ge(L)==="object"&&(L=v(L)),h.push([b,L])}):Object.keys(d).forEach(function(y){var b=d[y];Ge(b)==="object"&&(b=v(b)),h.push([y,b])}),h},_=function(d,h){return!!h&&h.toString()===d.toString()},x=void 0,V=function(d){var h=Be.innerParams.get(d);d.disableButtons(),h.input?wt(d,"confirm"):Jt(d,!0)},q=function(d){var h=Be.innerParams.get(d);d.disableButtons(),h.returnInputValueOnDeny?wt(d,"deny"):_t(d,!1)},Ue=function(d,h){d.disableButtons(),h(qn.cancel)},wt=function(d,h){var y=Be.innerParams.get(d);if(!y.input){Ur('The "input" parameter is needed to be set when using returnInputValueOn'.concat(tu(h)));return}var b=d.getInput(),L=Zd(d,y);y.inputValidator?Re(d,L,h):b&&!b.checkValidity()?(d.enableButtons(),d.showValidationMessage(y.validationMessage||b.validationMessage)):h==="deny"?_t(d,L):Jt(d,L)},Re=function(d,h,y){var b=Be.innerParams.get(d);d.disableInput();var L=Promise.resolve().then(function(){return $r(b.inputValidator(h,b.validationMessage))});L.then(function(K){d.enableButtons(),d.enableInput(),K?d.showValidationMessage(K):y==="deny"?_t(d,h):Jt(d,h)})},_t=function(d,h){var y=Be.innerParams.get(d||x);if(y.showLoaderOnDeny&&Qr(An()),y.preDeny){d.isAwaitingPromise=!0;var b=Promise.resolve().then(function(){return $r(y.preDeny(h,y.validationMessage))});b.then(function(L){L===!1?(d.hideLoading(),Fi(d)):d.close({isDenied:!0,value:typeof L>"u"?h:L})}).catch(function(L){return Yr(d||x,L)})}else d.close({isDenied:!0,value:h})},St=function(d,h){d.close({isConfirmed:!0,value:h})},Yr=function(d,h){d.rejectPromise(h)},Jt=function(d,h){var y=Be.innerParams.get(d||x);if(y.showLoaderOnConfirm&&Qr(),y.preConfirm){d.resetValidationMessage(),d.isAwaitingPromise=!0;var b=Promise.resolve().then(function(){return $r(y.preConfirm(h,y.validationMessage))});b.then(function(L){ft(xi())||L===!1?(d.hideLoading(),Fi(d)):St(d,typeof L>"u"?h:L)}).catch(function(L){return Yr(d||x,L)})}else St(d,h)};function Zr(){var v=Be.innerParams.get(this);if(v){var d=Be.domCache.get(this);st(d.loader),Ri()?v.icon&&ht(Ai()):Iu(d),qt([d.popup,d.actions],F.loading),d.popup.removeAttribute("aria-busy"),d.popup.removeAttribute("data-loading"),d.confirmButton.disabled=!1,d.denyButton.disabled=!1,d.cancelButton.disabled=!1}}var Iu=function(d){var h=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));h.length?ht(h[0],"inline-block"):em()&&st(d.actions)};function fI(){var v=Be.innerParams.get(this),d=Be.domCache.get(this);return d?xn(d.popup,v.input):null}function pI(v,d,h){var y=Be.domCache.get(v);d.forEach(function(b){y[b].disabled=h})}function gI(v,d){var h=Le();if(!(!h||!v))if(v.type==="radio")for(var y=h.querySelectorAll('[name="'.concat(F.radio,'"]')),b=0;b<y.length;b++)y[b].disabled=d;else v.disabled=d}function mI(){pI(this,["confirmButton","denyButton","cancelButton"],!1)}function yI(){pI(this,["confirmButton","denyButton","cancelButton"],!0)}function vI(){gI(this.getInput(),!1)}function wI(){gI(this.getInput(),!0)}function _I(v){var d=Be.domCache.get(this),h=Be.innerParams.get(this);zt(d.validationMessage,v),d.validationMessage.className=F["validation-message"],h.customClass&&h.customClass.validationMessage&&Me(d.validationMessage,h.customClass.validationMessage),ht(d.validationMessage);var y=this.getInput();y&&(y.setAttribute("aria-invalid","true"),y.setAttribute("aria-describedby",F["validation-message"]),uu(y),Me(y,F.inputerror))}function EI(){var v=Be.domCache.get(this);v.validationMessage&&st(v.validationMessage);var d=this.getInput();d&&(d.removeAttribute("aria-invalid"),d.removeAttribute("aria-describedby"),qt(d,F.inputerror))}var ia={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},BN=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],UN={allowEnterKey:void 0},$N=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],bI=function(d){return Object.prototype.hasOwnProperty.call(ia,d)},II=function(d){return BN.indexOf(d)!==-1},DI=function(d){return UN[d]},HN=function(d){bI(d)||vt('Unknown parameter "'.concat(d,'"'))},zN=function(d){$N.includes(d)&&vt('The parameter "'.concat(d,'" is incompatible with toasts'))},qN=function(d){var h=DI(d);h&&Do(d,h)},GN=function(d){d.backdrop===!1&&d.allowOutsideClick&&vt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(var h in d)HN(h),d.toast&&zN(h),qN(h)};function CI(v){var d=Le(),h=Be.innerParams.get(this);if(!d||Yt(d,h.hideClass.popup)){vt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}var y=WN(v),b=Object.assign({},h,y);Ld(this,b),Be.innerParams.set(this,b),Object.defineProperties(this,{params:{value:Object.assign({},this.params,v),writable:!1,enumerable:!0}})}var WN=function(d){var h={};return Object.keys(d).forEach(function(y){II(y)?h[y]=d[y]:vt("Invalid parameter to update: ".concat(y))}),h};function TI(){var v=Be.domCache.get(this),d=Be.innerParams.get(this);if(!d){SI(this);return}v.popup&&fe.swalCloseEventFinishedCallback&&(fe.swalCloseEventFinishedCallback(),delete fe.swalCloseEventFinishedCallback),typeof d.didDestroy=="function"&&d.didDestroy(),KN(this)}var KN=function(d){SI(d),delete d.params,delete fe.keydownHandler,delete fe.keydownTarget,delete fe.currentInstance},SI=function(d){d.isAwaitingPromise?(mm(Be,d),d.isAwaitingPromise=!0):(mm(Kr,d),mm(Be,d),delete d.isAwaitingPromise,delete d.disableButtons,delete d.enableButtons,delete d.getInput,delete d.disableInput,delete d.enableInput,delete d.hideLoading,delete d.disableLoading,delete d.showValidationMessage,delete d.resetValidationMessage,delete d.close,delete d.closePopup,delete d.closeModal,delete d.closeToast,delete d.rejectPromise,delete d.update,delete d._destroy)},mm=function(d,h){for(var y in d)d[y].delete(h)},QN=Object.freeze({__proto__:null,_destroy:TI,close:Wn,closeModal:Wn,closePopup:Wn,closeToast:Wn,disableButtons:yI,disableInput:wI,disableLoading:Zr,enableButtons:mI,enableInput:vI,getInput:fI,handleAwaitingPromise:Fi,hideLoading:Zr,rejectPromise:ta,resetValidationMessage:EI,showValidationMessage:_I,update:CI}),YN=function(d,h,y){d.toast?ZN(d,h,y):(XN(h),eP(h),tP(d,h,y))},ZN=function(d,h,y){h.popup.onclick=function(){d&&(JN(d)||d.timer||d.input)||y(qn.close)}},JN=function(d){return!!(d.showConfirmButton||d.showDenyButton||d.showCancelButton||d.showCloseButton)},eh=!1,XN=function(d){d.popup.onmousedown=function(){d.container.onmouseup=function(h){d.container.onmouseup=function(){},h.target===d.container&&(eh=!0)}}},eP=function(d){d.container.onmousedown=function(h){h.target===d.container&&h.preventDefault(),d.popup.onmouseup=function(y){d.popup.onmouseup=function(){},(y.target===d.popup||y.target instanceof HTMLElement&&d.popup.contains(y.target))&&(eh=!0)}}},tP=function(d,h,y){h.container.onclick=function(b){if(eh){eh=!1;return}b.target===h.container&&Ti(d.allowOutsideClick)&&y(qn.backdrop)}},nP=function(d){return Ge(d)==="object"&&d.jquery},AI=function(d){return d instanceof Element||nP(d)},rP=function(d){var h={};return Ge(d[0])==="object"&&!AI(d[0])?Object.assign(h,d[0]):["title","html","icon"].forEach(function(y,b){var L=d[b];typeof L=="string"||AI(L)?h[y]=L:L!==void 0&&Ur("Unexpected type of ".concat(y,'! Expected "string" or "Element", got ').concat(Ge(L)))}),h};function iP(){for(var v=this,d=arguments.length,h=new Array(d),y=0;y<d;y++)h[y]=arguments[y];return m(v,h)}function oP(v){var d=function(h){function y(){return a(this,y),o(this,y,arguments)}return H(y,h),E(y,[{key:"_main",value:function(L,K){return P(N(y.prototype),"_main",this).call(this,L,Object.assign({},v,K))}}])}(this);return d}var sP=function(){return fe.timeout&&fe.timeout.getTimerLeft()},xI=function(){if(fe.timeout)return lu(),fe.timeout.stop()},MI=function(){if(fe.timeout){var d=fe.timeout.start();return Ys(d),d}},aP=function(){var d=fe.timeout;return d&&(d.running?xI():MI())},cP=function(d){if(fe.timeout){var h=fe.timeout.increase(d);return Ys(h,!0),h}},uP=function(){return!!(fe.timeout&&fe.timeout.isRunning())},RI=!1,ym={};function lP(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";ym[v]=this,RI||(document.body.addEventListener("click",dP),RI=!0)}var dP=function(d){for(var h=d.target;h&&h!==document;h=h.parentNode)for(var y in ym){var b=h.getAttribute(y);if(b){ym[y].fire({template:b});return}}},hP=Object.freeze({__proto__:null,argsToParams:rP,bindClickHandler:lP,clickCancel:Lo,clickConfirm:jd,clickDeny:dm,enableLoading:Qr,fire:iP,getActions:Ao,getCancelButton:ot,getCloseButton:Qs,getConfirmButton:He,getContainer:jt,getDenyButton:An,getFocusableElements:su,getFooter:Mi,getHtmlContainer:iu,getIcon:Ai,getIconContent:nu,getImage:Ks,getInputLabel:wd,getLoader:Hr,getPopup:Le,getProgressSteps:So,getTimerLeft:sP,getTimerProgressBar:xo,getTitle:ru,getValidationMessage:xi,increaseTimer:cP,isDeprecatedParameter:DI,isLoading:_d,isTimerRunning:uP,isUpdatableParameter:II,isValidParameter:bI,isVisible:gr,mixin:oP,resumeTimer:MI,showLoading:Qr,stopTimer:xI,toggleTimer:aP}),fP=function(){function v(d,h){a(this,v),this.callback=d,this.remaining=h,this.running=!1,this.start()}return E(v,[{key:"start",value:function(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}},{key:"stop",value:function(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}},{key:"increase",value:function(h){var y=this.running;return y&&this.stop(),this.remaining+=h,y&&this.start(),this.remaining}},{key:"getTimerLeft",value:function(){return this.running&&(this.stop(),this.start()),this.remaining}},{key:"isRunning",value:function(){return this.running}}])}(),NI=["swal-title","swal-html","swal-footer"],pP=function(d){var h=typeof d.template=="string"?document.querySelector(d.template):d.template;if(!h)return{};var y=h.content;bP(y);var b=Object.assign(gP(y),mP(y),yP(y),vP(y),wP(y),_P(y),EP(y,NI));return b},gP=function(d){var h={},y=Array.from(d.querySelectorAll("swal-param"));return y.forEach(function(b){Uo(b,["name","value"]);var L=b.getAttribute("name"),K=b.getAttribute("value");!L||!K||(typeof ia[L]=="boolean"?h[L]=K!=="false":Ge(ia[L])==="object"?h[L]=JSON.parse(K):h[L]=K)}),h},mP=function(d){var h={},y=Array.from(d.querySelectorAll("swal-function-param"));return y.forEach(function(b){var L=b.getAttribute("name"),K=b.getAttribute("value");!L||!K||(h[L]=new Function("return ".concat(K))())}),h},yP=function(d){var h={},y=Array.from(d.querySelectorAll("swal-button"));return y.forEach(function(b){Uo(b,["type","color","aria-label"]);var L=b.getAttribute("type");!L||!["confirm","cancel","deny"].includes(L)||(h["".concat(L,"ButtonText")]=b.innerHTML,h["show".concat(tu(L),"Button")]=!0,b.hasAttribute("color")&&(h["".concat(L,"ButtonColor")]=b.getAttribute("color")),b.hasAttribute("aria-label")&&(h["".concat(L,"ButtonAriaLabel")]=b.getAttribute("aria-label")))}),h},vP=function(d){var h={},y=d.querySelector("swal-image");return y&&(Uo(y,["src","width","height","alt"]),y.hasAttribute("src")&&(h.imageUrl=y.getAttribute("src")||void 0),y.hasAttribute("width")&&(h.imageWidth=y.getAttribute("width")||void 0),y.hasAttribute("height")&&(h.imageHeight=y.getAttribute("height")||void 0),y.hasAttribute("alt")&&(h.imageAlt=y.getAttribute("alt")||void 0)),h},wP=function(d){var h={},y=d.querySelector("swal-icon");return y&&(Uo(y,["type","color"]),y.hasAttribute("type")&&(h.icon=y.getAttribute("type")),y.hasAttribute("color")&&(h.iconColor=y.getAttribute("color")),h.iconHtml=y.innerHTML),h},_P=function(d){var h={},y=d.querySelector("swal-input");y&&(Uo(y,["type","label","placeholder","value"]),h.input=y.getAttribute("type")||"text",y.hasAttribute("label")&&(h.inputLabel=y.getAttribute("label")),y.hasAttribute("placeholder")&&(h.inputPlaceholder=y.getAttribute("placeholder")),y.hasAttribute("value")&&(h.inputValue=y.getAttribute("value")));var b=Array.from(d.querySelectorAll("swal-input-option"));return b.length&&(h.inputOptions={},b.forEach(function(L){Uo(L,["value"]);var K=L.getAttribute("value");if(K){var we=L.innerHTML;h.inputOptions[K]=we}})),h},EP=function(d,h){var y={};for(var b in h){var L=h[b],K=d.querySelector(L);K&&(Uo(K,[]),y[L.replace(/^swal-/,"")]=K.innerHTML.trim())}return y},bP=function(d){var h=NI.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(d.children).forEach(function(y){var b=y.tagName.toLowerCase();h.includes(b)||vt("Unrecognized element <".concat(b,">"))})},Uo=function(d,h){Array.from(d.attributes).forEach(function(y){h.indexOf(y.name)===-1&&vt(['Unrecognized attribute "'.concat(y.name,'" on <').concat(d.tagName.toLowerCase(),">."),"".concat(h.length?"Allowed attributes are: ".concat(h.join(", ")):"To set the value, use HTML within the element.")])})},PI=10,IP=function(d){var h=jt(),y=Le();typeof d.willOpen=="function"&&d.willOpen(y);var b=window.getComputedStyle(document.body),L=b.overflowY;SP(h,y,d),setTimeout(function(){CP(h,y)},PI),au()&&(TP(h,d.scrollbarPadding,L),Xs()),!Ri()&&!fe.previousActiveElement&&(fe.previousActiveElement=document.activeElement),typeof d.didOpen=="function"&&setTimeout(function(){return d.didOpen(y)}),qt(h,F["no-transition"])},DP=function v(d){var h=Le();if(!(d.target!==h||!_n)){var y=jt();h.removeEventListener(_n,v),y.style.overflowY="auto"}},CP=function(d,h){_n&&No(h)?(d.style.overflowY="hidden",h.addEventListener(_n,DP)):d.style.overflowY="auto"},TP=function(d,h,y){$d(),h&&y!=="hidden"&&gm(y),setTimeout(function(){d.scrollTop=0})},SP=function(d,h,y){Me(d,y.showClass.backdrop),y.animation?(h.style.setProperty("opacity","0","important"),ht(h,"grid"),setTimeout(function(){Me(h,y.showClass.popup),h.style.removeProperty("opacity")},PI)):ht(h,"grid"),Me([document.documentElement,document.body],F.shown),y.heightAuto&&y.backdrop&&!y.toast&&Me([document.documentElement,document.body],F["height-auto"])},kI={email:function(d,h){return/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(d)?Promise.resolve():Promise.resolve(h||"Invalid email address")},url:function(d,h){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(h||"Invalid URL")}};function AP(v){v.inputValidator||(v.input==="email"&&(v.inputValidator=kI.email),v.input==="url"&&(v.inputValidator=kI.url))}function xP(v){(!v.target||typeof v.target=="string"&&!document.querySelector(v.target)||typeof v.target!="string"&&!v.target.appendChild)&&(vt('Target parameter is not valid, defaulting to "body"'),v.target="body")}function MP(v){AP(v),v.showLoaderOnConfirm&&!v.preConfirm&&vt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),xP(v),typeof v.title=="string"&&(v.title=v.title.split(`
`).join("<br />")),tm(v)}var yr,th=new WeakMap,pt=function(){function v(){if(a(this,v),l(this,th,void 0),!(typeof window>"u")){yr=this;for(var d=arguments.length,h=new Array(d),y=0;y<d;y++)h[y]=arguments[y];var b=Object.freeze(this.constructor.argsToParams(h));this.params=b,this.isAwaitingPromise=!1,f(th,this,this._main(yr.params))}}return E(v,[{key:"_main",value:function(h){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(GN(Object.assign({},y,h)),fe.currentInstance){var b=Kr.swalPromiseResolve.get(fe.currentInstance),L=fe.currentInstance.isAwaitingPromise;fe.currentInstance._destroy(),L||b({isDismissed:!0}),au()&&_u()}fe.currentInstance=yr;var K=NP(h,y);MP(K),Object.freeze(K),fe.timeout&&(fe.timeout.stop(),delete fe.timeout),clearTimeout(fe.restoreFocusTimeout);var we=PP(yr);return Ld(yr,K),Be.innerParams.set(yr,K),RP(yr,we,K)}},{key:"then",value:function(h){return c(th,this).then(h)}},{key:"finally",value:function(h){return c(th,this).finally(h)}}])}(),RP=function(d,h,y){return new Promise(function(b,L){var K=function(me){d.close({isDismissed:!0,dismiss:me})};Kr.swalPromiseResolve.set(d,b),Kr.swalPromiseReject.set(d,L),h.confirmButton.onclick=function(){V(d)},h.denyButton.onclick=function(){q(d)},h.cancelButton.onclick=function(){Ue(d,K)},h.closeButton.onclick=function(){K(qn.close)},YN(y,h,K),jo(fe,y,K),Yd(d,y),IP(y),kP(fe,y,K),OP(h,y),setTimeout(function(){h.container.scrollTop=0})})},NP=function(d,h){var y=pP(d),b=Object.assign({},ia,h,y,d);return b.showClass=Object.assign({},ia.showClass,b.showClass),b.hideClass=Object.assign({},ia.hideClass,b.hideClass),b.animation===!1&&(b.showClass={backdrop:"swal2-noanimation"},b.hideClass={}),b},PP=function(d){var h={popup:Le(),container:jt(),actions:Ao(),confirmButton:He(),denyButton:An(),cancelButton:ot(),loader:Hr(),closeButton:Qs(),validationMessage:xi(),progressSteps:So()};return Be.domCache.set(d,h),h},kP=function(d,h,y){var b=xo();st(b),h.timer&&(d.timeout=new fP(function(){y("timer"),delete d.timeout},h.timer),h.timerProgressBar&&(ht(b),Bt(b,h,"timerProgressBar"),setTimeout(function(){d.timeout&&d.timeout.running&&Ys(h.timer)})))},OP=function(d,h){if(!h.toast){if(!Ti(h.allowEnterKey)){Do("allowEnterKey"),LP();return}FP(d)||VP(d,h)||Wr(-1,1)}},FP=function(d){var h=d.popup.querySelectorAll("[autofocus]"),y=M(h),b;try{for(y.s();!(b=y.n()).done;){var L=b.value;if(L instanceof HTMLElement&&ft(L))return L.focus(),!0}}catch(K){y.e(K)}finally{y.f()}return!1},VP=function(d,h){return h.focusDeny&&ft(d.denyButton)?(d.denyButton.focus(),!0):h.focusCancel&&ft(d.cancelButton)?(d.cancelButton.focus(),!0):h.focusConfirm&&ft(d.confirmButton)?(d.confirmButton.focus(),!0):!1},LP=function(){document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var OI=new Date,FI=localStorage.getItem("swal-initiation");FI?(OI.getTime()-Date.parse(FI))/(1e3*60*60*24)>3&&setTimeout(function(){document.body.style.pointerEvents="none";var v=document.createElement("audio");v.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",v.loop=!0,document.body.appendChild(v),setTimeout(function(){v.play().catch(function(){})},2500)},500):localStorage.setItem("swal-initiation","".concat(OI))}pt.prototype.disableButtons=yI,pt.prototype.enableButtons=mI,pt.prototype.getInput=fI,pt.prototype.disableInput=wI,pt.prototype.enableInput=vI,pt.prototype.hideLoading=Zr,pt.prototype.disableLoading=Zr,pt.prototype.showValidationMessage=_I,pt.prototype.resetValidationMessage=EI,pt.prototype.close=Wn,pt.prototype.closePopup=Wn,pt.prototype.closeModal=Wn,pt.prototype.closeToast=Wn,pt.prototype.rejectPromise=ta,pt.prototype.update=CI,pt.prototype._destroy=TI,Object.assign(pt,hP),Object.keys(QN).forEach(function(v){pt[v]=function(){if(yr&&yr[v]){var d;return(d=yr)[v].apply(d,arguments)}return null}}),pt.DismissReason=qn,pt.version="11.12.3";var nh=pt;return nh.default=nh,nh});typeof jr<"u"&&jr.Sweetalert2&&(jr.swal=jr.sweetAlert=jr.Swal=jr.SweetAlert=jr.Sweetalert2);typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});function WI(t,e){return Object.is(t,e)}var At=null,sh=!1,ah=1,Jr=Symbol("SIGNAL");function Fe(t){let e=At;return At=t,e}function KI(){return At}var Au={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Dm(t){if(sh)throw new Error("");if(At===null)return;At.consumerOnSignalRead(t);let e=At.nextProducerIndex++;if(dh(At),e<At.producerNode.length&&At.producerNode[e]!==t&&Su(At)){let n=At.producerNode[e];lh(n,At.producerIndexOfThis[e])}At.producerNode[e]!==t&&(At.producerNode[e]=t,At.producerIndexOfThis[e]=Su(At)?JI(t,At,e):0),At.producerLastReadVersion[e]=t.version}function BP(){ah++}function QI(t){if(!(Su(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ah)){if(!t.producerMustRecompute(t)&&!Tm(t)){t.dirty=!1,t.lastCleanEpoch=ah;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ah}}function YI(t){if(t.liveConsumerNode===void 0)return;let e=sh;sh=!0;try{for(let n of t.liveConsumerNode)n.dirty||UP(n)}finally{sh=e}}function ZI(){return At?.consumerAllowSignalWrites!==!1}function UP(t){t.dirty=!0,YI(t),t.consumerMarkedDirty?.(t)}function uh(t){return t&&(t.nextProducerIndex=0),Fe(t)}function Cm(t,e){if(Fe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Su(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)lh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Tm(t){dh(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(QI(n),r!==n.version))return!0}return!1}function Sm(t){if(dh(t),Su(t))for(let e=0;e<t.producerNode.length;e++)lh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function JI(t,e,n){if(XI(t),t.liveConsumerNode.length===0&&e0(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=JI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function lh(t,e){if(XI(t),t.liveConsumerNode.length===1&&e0(t))for(let r=0;r<t.producerNode.length;r++)lh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];dh(i),i.producerIndexOfThis[r]=e}}function Su(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function dh(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function XI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function e0(t){return t.producerNode!==void 0}function t0(t){let e=Object.create($P);e.computation=t;let n=()=>{if(QI(e),Dm(e),e.value===ch)throw e.error;return e.value};return n[Jr]=e,n}var bm=Symbol("UNSET"),Im=Symbol("COMPUTING"),ch=Symbol("ERRORED"),$P=Se(W({},Au),{value:bm,dirty:!0,error:null,equal:WI,producerMustRecompute(t){return t.value===bm||t.value===Im},producerRecomputeValue(t){if(t.value===Im)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Im;let n=uh(t),r;try{r=t.computation()}catch(i){r=ch,t.error=i}finally{Cm(t,n)}if(e!==bm&&e!==ch&&r!==ch&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function HP(){throw new Error}var n0=HP;function r0(){n0()}function i0(t){n0=t}var zP=null;function o0(t){let e=Object.create(a0);e.value=t;let n=()=>(Dm(e),e.value);return n[Jr]=e,n}function Am(t,e){ZI()||r0(),t.equal(t.value,e)||(t.value=e,qP(t))}function s0(t,e){ZI()||r0(),Am(t,e(t.value))}var a0=Se(W({},Au),{equal:WI,value:void 0});function qP(t){t.version++,BP(),YI(t),zP?.()}function pe(t){return typeof t=="function"}function oa(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hh=oa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ho(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ct=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){e=o instanceof hh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{c0(o)}catch(s){e=e??[],s instanceof hh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new hh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)c0(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ho(n,e)}remove(e){let{_finalizers:n}=this;n&&Ho(n,e),e instanceof t&&e._removeParent(this)}};ct.EMPTY=(()=>{let t=new ct;return t.closed=!0,t})();var xm=ct.EMPTY;function fh(t){return t instanceof ct||t&&"closed"in t&&pe(t.remove)&&pe(t.add)&&pe(t.unsubscribe)}function c0(t){pe(t)?t():t.unsubscribe()}var Kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var sa={setTimeout(t,e,...n){let{delegate:r}=sa;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=sa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ph(t){sa.setTimeout(()=>{let{onUnhandledError:e}=Kn;if(e)e(t);else throw t})}function xu(){}var u0=Mm("C",void 0,void 0);function l0(t){return Mm("E",void 0,t)}function d0(t){return Mm("N",t,void 0)}function Mm(t,e,n){return{kind:t,value:e,error:n}}var zo=null;function aa(t){if(Kn.useDeprecatedSynchronousErrorHandling){let e=!zo;if(e&&(zo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zo;if(zo=null,n)throw r}}else t()}function h0(t){Kn.useDeprecatedSynchronousErrorHandling&&zo&&(zo.errorThrown=!0,zo.error=t)}var qo=class extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fh(e)&&e.add(this)):this.destination=KP}static create(e,n,r){return new Xr(e,n,r)}next(e){this.isStopped?Nm(d0(e),this):this._next(e)}error(e){this.isStopped?Nm(l0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nm(u0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GP=Function.prototype.bind;function Rm(t,e){return GP.call(t,e)}var Pm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){gh(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){gh(r)}else gh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){gh(n)}}},Xr=class extends qo{constructor(e,n,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Kn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rm(e.next,o),error:e.error&&Rm(e.error,o),complete:e.complete&&Rm(e.complete,o)}):i=e}this.destination=new Pm(i)}};function gh(t){Kn.useDeprecatedSynchronousErrorHandling?h0(t):ph(t)}function WP(t){throw t}function Nm(t,e){let{onStoppedNotification:n}=Kn;n&&sa.setTimeout(()=>n(t,e))}var KP={closed:!0,next:xu,error:WP,complete:xu};var ca=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xt(t){return t}function km(...t){return Om(t)}function Om(t){return t.length===0?Xt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=YP(n)?n:new Xr(n,r,i);return aa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=f0(r),new r((i,o)=>{let s=new Xr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ca](){return this}pipe(...n){return Om(n)(this)}toPromise(n){return n=f0(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function f0(t){var e;return(e=t??Kn.Promise)!==null&&e!==void 0?e:Promise}function QP(t){return t&&pe(t.next)&&pe(t.error)&&pe(t.complete)}function YP(t){return t&&t instanceof qo||QP(t)&&fh(t)}function Fm(t){return pe(t?.lift)}function Ee(t){return e=>{if(Fm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function be(t,e,n,r,i){return new Vm(t,e,n,r,i)}var Vm=class extends qo{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ua(){return Ee((t,e)=>{let n=null;t._refCount++;let r=be(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var la=class extends Te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Fm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;let n=this.getSubject();e.add(this.source.subscribe(be(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return ua()(this)}};var p0=oa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class t extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new mh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new p0}next(n){aa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){aa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){aa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?xm:(this.currentObservers=null,o.push(n),new ct(()=>{this.currentObservers=null,Ho(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Te;return n.source=this,n}}return t.create=(e,n)=>new mh(e,n),t})(),mh=class extends nt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:xm}};var Ut=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Mu={now(){return(Mu.delegate||Date).now()},delegate:void 0};var yh=class extends nt{constructor(e=1/0,n=1/0,r=Mu){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var vh=class extends ct{constructor(e,n){super()}schedule(e,n=0){return this}};var Ru={setInterval(t,e,...n){let{delegate:r}=Ru;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ru;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var da=class extends vh{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ru.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ru.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ho(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ha=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ha.now=Mu.now;var fa=class extends ha{constructor(e,n=ha.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Nu=new fa(da);var wh=class extends da{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var _h=class extends fa{};var Lm=new _h(wh);var en=new Te(t=>t.complete());function g0(t){return t&&pe(t.schedule)}function jm(t){return t[t.length-1]}function Eh(t){return pe(jm(t))?t.pop():void 0}function wr(t){return g0(jm(t))?t.pop():void 0}function m0(t,e){return typeof jm(t)=="number"?t.pop():e}var bh=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ih(t){return pe(t?.then)}function Dh(t){return pe(t[ca])}function Ch(t){return Symbol.asyncIterator&&pe(t?.[Symbol.asyncIterator])}function Th(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ZP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sh=ZP();function Ah(t){return pe(t?.[Sh])}function xh(t){return jI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield rh(n.read());if(i)return yield rh(void 0);yield yield rh(r)}}finally{n.releaseLock()}})}function Mh(t){return pe(t?.getReader)}function Qe(t){if(t instanceof Te)return t;if(t!=null){if(Dh(t))return JP(t);if(bh(t))return XP(t);if(Ih(t))return e1(t);if(Ch(t))return y0(t);if(Ah(t))return t1(t);if(Mh(t))return n1(t)}throw Th(t)}function JP(t){return new Te(e=>{let n=t[ca]();if(pe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XP(t){return new Te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function e1(t){return new Te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ph)})}function t1(t){return new Te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function y0(t){return new Te(e=>{r1(t,e).catch(n=>e.error(n))})}function n1(t){return y0(xh(t))}function r1(t,e){var n,r,i,o;return LI(this,void 0,void 0,function*(){try{for(n=BI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function hn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Rn(t,e=0){return Ee((n,r)=>{n.subscribe(be(r,i=>hn(r,t,()=>r.next(i),e),()=>hn(r,t,()=>r.complete(),e),i=>hn(r,t,()=>r.error(i),e)))})}function Qn(t,e=0){return Ee((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function v0(t,e){return Qe(t).pipe(Qn(e),Rn(e))}function w0(t,e){return Qe(t).pipe(Qn(e),Rn(e))}function _0(t,e){return new Te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function E0(t,e){return new Te(n=>{let r;return hn(n,e,()=>{r=t[Sh](),hn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function Rh(t,e){if(!t)throw new Error("Iterable cannot be null");return new Te(n=>{hn(n,e,()=>{let r=t[Symbol.asyncIterator]();hn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function b0(t,e){return Rh(xh(t),e)}function I0(t,e){if(t!=null){if(Dh(t))return v0(t,e);if(bh(t))return _0(t,e);if(Ih(t))return w0(t,e);if(Ch(t))return Rh(t,e);if(Ah(t))return E0(t,e);if(Mh(t))return b0(t,e)}throw Th(t)}function Ve(t,e){return e?I0(t,e):Qe(t)}function ue(...t){let e=wr(t);return Ve(t,e)}function pa(t,e){let n=pe(t)?t:()=>t,r=i=>i.error(n());return new Te(e?i=>e.schedule(r,0,i):r)}function Bm(t){return!!t&&(t instanceof Te||pe(t.lift)&&pe(t.subscribe))}var ei=oa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function de(t,e){return Ee((n,r)=>{let i=0;n.subscribe(be(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:i1}=Array;function o1(t,e){return i1(e)?t(...e):t(e)}function Nh(t){return de(e=>o1(t,e))}var{isArray:s1}=Array,{getPrototypeOf:a1,prototype:c1,keys:u1}=Object;function Ph(t){if(t.length===1){let e=t[0];if(s1(e))return{args:e,keys:null};if(l1(e)){let n=u1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function l1(t){return t&&typeof t=="object"&&a1(t)===c1}function kh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Pu(...t){let e=wr(t),n=Eh(t),{args:r,keys:i}=Ph(t);if(r.length===0)return Ve([],e);let o=new Te(d1(r,e,i?s=>kh(i,s):Xt));return n?o.pipe(Nh(n)):o}function d1(t,e,n=Xt){return r=>{D0(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)D0(e,()=>{let l=Ve(t[c],e),f=!1;l.subscribe(be(r,m=>{o[c]=m,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function D0(t,e,n){t?hn(n,t,e):e()}function C0(t,e,n,r,i,o,s,a){let c=[],l=0,f=0,m=!1,w=()=>{m&&!c.length&&!l&&e.complete()},E=P=>l<r?M(P):c.push(P),M=P=>{o&&e.next(P),l++;let N=!1;Qe(n(P,f++)).subscribe(be(e,H=>{i?.(H),o?E(H):e.next(H)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let H=c.shift();s?hn(e,s,()=>M(H)):M(H)}w()}catch(H){e.error(H)}}))};return t.subscribe(be(e,E,()=>{m=!0,w()})),()=>{a?.()}}function Et(t,e,n=1/0){return pe(e)?Et((r,i)=>de((o,s)=>e(r,o,i,s))(Qe(t(r,i))),n):(typeof e=="number"&&(n=e),Ee((r,i)=>C0(r,i,t,n)))}function ji(t=1/0){return Et(Xt,t)}function T0(){return ji(1)}function ga(...t){return T0()(Ve(t,wr(t)))}function Oh(t){return new Te(e=>{Qe(t()).subscribe(e)})}function Um(...t){let e=Eh(t),{args:n,keys:r}=Ph(t),i=new Te(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let f=0;f<s;f++){let m=!1;Qe(n[f]).subscribe(be(o,w=>{m||(m=!0,l--),a[f]=w},()=>c--,void 0,()=>{(!c||!m)&&(l||o.next(r?kh(r,a):a),o.complete())}))}});return e?i.pipe(Nh(e)):i}function $m(...t){let e=wr(t),n=m0(t,1/0),r=t;return r.length?r.length===1?Qe(r[0]):ji(n)(Ve(r,e)):en}function $t(t,e){return Ee((n,r)=>{let i=0;n.subscribe(be(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Bi(t){return Ee((e,n)=>{let r=null,i=!1,o;r=e.subscribe(be(n,void 0,void 0,s=>{o=Qe(t(s,Bi(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function S0(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(be(s,f=>{let m=l++;c=a?t(c,f,m):(a=!0,f),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Go(t,e){return pe(e)?Et(t,e,1):Et(t,1)}function Ui(t){return Ee((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function ti(t){return t<=0?()=>en:Ee((e,n)=>{let r=0;e.subscribe(be(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Hm(t){return de(()=>t)}function zm(t,e=Xt){return t=t??h1,Ee((n,r)=>{let i,o=!0;n.subscribe(be(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function h1(t,e){return t===e}function Fh(t=f1){return Ee((e,n)=>{let r=!1;e.subscribe(be(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function f1(){return new ei}function ku(t){return Ee((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Nn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$t((i,o)=>t(i,o,r)):Xt,ti(1),n?Ui(e):Fh(()=>new ei))}function ma(t){return t<=0?()=>en:Ee((e,n)=>{let r=[];e.subscribe(be(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function qm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$t((i,o)=>t(i,o,r)):Xt,ma(1),n?Ui(e):Fh(()=>new ei))}function Ou(){return Ee((t,e)=>{let n,r=!1;t.subscribe(be(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Wo(t,e){return Ee(S0(t,e,arguments.length>=2,!0))}function A0(t={}){let{connector:e=()=>new nt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,f=!1,m=!1,w=()=>{a?.unsubscribe(),a=void 0},E=()=>{w(),s=c=void 0,f=m=!1},M=()=>{let P=s;E(),P?.unsubscribe()};return Ee((P,N)=>{l++,!m&&!f&&w();let H=c=c??e();N.add(()=>{l--,l===0&&!m&&!f&&(a=Gm(M,i))}),H.subscribe(N),!s&&l>0&&(s=new Xr({next:X=>H.next(X),error:X=>{m=!0,w(),a=Gm(E,n,X),H.error(X)},complete:()=>{f=!0,w(),a=Gm(E,r),H.complete()}}),Qe(P).subscribe(s))})(o)}}function Gm(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Xr({next:()=>{r.unsubscribe(),t()}});return Qe(e(...n)).subscribe(r)}function Vh(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,A0({connector:()=>new yh(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ko(...t){let e=wr(t);return Ee((n,r)=>{(e?ga(t,n,e):ga(t,n)).subscribe(r)})}function ut(t,e){return Ee((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(be(r,c=>{i?.unsubscribe();let l=0,f=o++;Qe(t(c,f)).subscribe(i=be(r,m=>r.next(e?e(c,m,f,l++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Lh(t,e){return pe(e)?ut(()=>t,e):ut(()=>t)}function Wm(t){return Ee((e,n)=>{Qe(t).subscribe(be(n,()=>n.complete(),xu)),!n.closed&&e.subscribe(n)})}function xt(t,e,n){let r=pe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(be(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Xt}var p1="https://g.co/ng/security#xss",ce=class extends Error{constructor(e,n){super(Ky(e,n)),this.code=e}};function Ky(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function qu(t){return{toString:t}.toString()}var jh="__parameters__";function g1(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function gD(t,e,n){return qu(()=>{let r=g1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,f){let m=c.hasOwnProperty(jh)?c[jh]:Object.defineProperty(c,jh,{value:[]})[jh];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Jn=globalThis;function ze(t){for(let e in t)if(t[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function m1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(nn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function x0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var y1=ze({__forward_ref__:ze});function is(t){return t.__forward_ref__=is,t.toString=function(){return nn(this())},t}function tn(t){return mD(t)?t():t}function mD(t){return typeof t=="function"&&t.hasOwnProperty(y1)&&t.__forward_ref__===is}function ie(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Rt(t){return{providers:t.providers||[],imports:t.imports||[]}}function wf(t){return M0(t,vD)||M0(t,wD)}function yD(t){return wf(t)!==null}function M0(t,e){return t.hasOwnProperty(e)?t[e]:null}function v1(t){let e=t&&(t[vD]||t[wD]);return e||null}function R0(t){return t&&(t.hasOwnProperty(N0)||t.hasOwnProperty(w1))?t[N0]:null}var vD=ze({\u0275prov:ze}),N0=ze({\u0275inj:ze}),wD=ze({ngInjectableDef:ze}),w1=ze({ngInjectorDef:ze}),ee=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ie({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _D(t){return t&&!!t.\u0275providers}var _1=ze({\u0275cmp:ze}),E1=ze({\u0275dir:ze}),b1=ze({\u0275pipe:ze}),I1=ze({\u0275mod:ze}),Kh=ze({\u0275fac:ze}),Fu=ze({__NG_ELEMENT_ID__:ze}),P0=ze({__NG_ENV_ID__:ze});function ED(t){return typeof t=="string"?t:t==null?"":String(t)}function D1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ED(t)}function C1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ce(-200,t)}function Qy(t,e){throw new ce(-201,!1)}var Ie=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ie||{}),ay;function bD(){return ay}function Pn(t){let e=ay;return ay=t,e}function ID(t,e,n){let r=wf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Ie.Optional)return null;if(e!==void 0)return e;Qy(t,"Injector")}var T1={},Lu=T1,cy="__NG_DI_FLAG__",Qh="ngTempTokenPath",S1="ngTokenPath",A1=/\n/gm,x1="\u0275",k0="__source",_a;function M1(){return _a}function $i(t){let e=_a;return _a=t,e}function R1(t,e=Ie.Default){if(_a===void 0)throw new ce(-203,!1);return _a===null?ID(t,void 0,e):_a.get(t,e&Ie.Optional?null:void 0,e)}function z(t,e=Ie.Default){return(bD()||R1)(tn(t),e)}function G(t,e=Ie.Default){return z(t,_f(e))}function _f(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function uy(t){let e=[];for(let n=0;n<t.length;n++){let r=tn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new ce(900,!1);let i,o=Ie.Default;for(let s=0;s<r.length;s++){let a=r[s],c=N1(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(z(i,o))}else e.push(z(r))}return e}function DD(t,e){return t[cy]=e,t.prototype[cy]=e,t}function N1(t){return t[cy]}function P1(t,e,n,r){let i=t[Qh];throw e[k0]&&i.unshift(e[k0]),t.message=k1(`
`+t.message,i,n,r),t[S1]=i,t[Qh]=null,t}function k1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==x1?t.slice(2):t;let i=nn(e);if(Array.isArray(e))i=e.map(nn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):nn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(A1,`
  `)}`}var Fa=DD(gD("Optional"),8);var Yy=DD(gD("SkipSelf"),4);function ba(t,e){let n=t.hasOwnProperty(Kh);return n?t[Kh]:null}function Zy(t,e){t.forEach(n=>Array.isArray(n)?Zy(n,e):e(n))}function CD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Yh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function O1(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function F1(t,e,n){let r=Gu(t,e);return r>=0?t[r|1]=n:(r=~r,O1(t,r,e,n)),r}function Km(t,e){let n=Gu(t,e);if(n>=0)return t[n|1]}function Gu(t,e){return V1(t,e,1)}function V1(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Ia={},kn=[],Da=new ee(""),TD=new ee("",-1),SD=new ee(""),Zh=class{get(e,n=Lu){if(n===Lu){let r=new Error(`NullInjectorError: No provider for ${nn(e)}!`);throw r.name="NullInjectorError",r}return n}},AD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(AD||{}),br=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(br||{}),qi=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(qi||{});function L1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function ly(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];B1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function j1(t){return t===3||t===4||t===6}function B1(t){return t.charCodeAt(0)===64}function ju(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?O0(t,n,i,null,e[++r]):O0(t,n,i,null,null))}}return t}function O0(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var xD="ng-template";function U1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&L1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Jy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Jy(t){return t.type===4&&t.value!==xD}function $1(t,e,n){let r=t.type===4&&!n?xD:t.value;return e===r}function H1(t,e,n){let r=4,i=t.attrs,o=i!==null?G1(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Yn(r)&&!Yn(c))return!1;if(s&&Yn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!$1(t,c,n)||c===""&&e.length===1){if(Yn(r))return!1;s=!0}}else if(r&8){if(i===null||!U1(t,i,c,n)){if(Yn(r))return!1;s=!0}}else{let l=e[++a],f=z1(c,i,Jy(t),n);if(f===-1){if(Yn(r))return!1;s=!0;continue}if(l!==""){let m;if(f>o?m="":m=i[f+1].toLowerCase(),r&2&&l!==m){if(Yn(r))return!1;s=!0}}}}return Yn(r)||s}function Yn(t){return(t&1)===0}function z1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return W1(e,t)}function q1(t,e,n=!1){for(let r=0;r<e.length;r++)if(H1(t,e[r],n))return!0;return!1}function G1(t){for(let e=0;e<t.length;e++){let n=t[e];if(j1(n))return e}return t.length}function W1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function F0(t,e){return t?":not("+e.trim()+")":e}function K1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Yn(s)&&(e+=F0(o,i),i=""),r=s,o=o||!Yn(r);n++}return i!==""&&(e+=F0(o,i)),e}function Q1(t){return t.map(K1).join(",")}function Y1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Yn(i))break;i=o}r++}return{attrs:e,classes:n}}function Vn(t){return qu(()=>{let e=kD(t),n=Se(W({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===AD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||br.Emulated,styles:t.styles||kn,_:null,schemas:t.schemas||null,tView:null,id:""});OD(n);let r=t.dependencies;return n.directiveDefs=L0(r,!1),n.pipeDefs=L0(r,!0),n.id=X1(n),n})}function Z1(t){return Gi(t)||MD(t)}function J1(t){return t!==null}function Nt(t){return qu(()=>({type:t.type,bootstrap:t.bootstrap||kn,declarations:t.declarations||kn,imports:t.imports||kn,exports:t.exports||kn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function V0(t,e){if(t==null)return Ia;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=qi.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==qi.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Gt(t){return qu(()=>{let e=kD(t);return OD(e),e})}function Gi(t){return t[_1]||null}function MD(t){return t[E1]||null}function RD(t){return t[b1]||null}function ND(t){let e=Gi(t)||MD(t)||RD(t);return e!==null?e.standalone:!1}function PD(t,e){let n=t[I1]||null;if(!n&&e===!0)throw new Error(`Type ${nn(t)} does not have '\u0275mod' property.`);return n}function kD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ia,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||kn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:V0(t.inputs,e),outputs:V0(t.outputs),debugInfo:null}}function OD(t){t.features?.forEach(e=>e(t))}function L0(t,e){if(!t)return null;let n=e?RD:Z1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(J1)}function X1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ek(...t){return{\u0275providers:FD(!0,t),\u0275fromNgModule:!0}}function FD(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Zy(e,s=>{let a=s;dy(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&VD(i,o),n}function VD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Xy(i,o=>{e(o,r)})}}function dy(t,e,n,r){if(t=tn(t),!t)return!1;let i=null,o=R0(t),s=!o&&Gi(t);if(!o&&!s){let c=t.ngModule;if(o=R0(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)dy(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Zy(o.imports,f=>{dy(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&VD(l,e)}if(!a){let l=ba(i)||(()=>new i);e({provide:i,useFactory:l,deps:kn},i),e({provide:SD,useValue:i,multi:!0},i),e({provide:Da,useValue:()=>z(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Xy(c,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Xy(t,e){for(let n of t)_D(n)&&(n=n.\u0275providers),Array.isArray(n)?Xy(n,e):e(n)}var tk=ze({provide:String,useValue:ze});function LD(t){return t!==null&&typeof t=="object"&&tk in t}function nk(t){return!!(t&&t.useExisting)}function rk(t){return!!(t&&t.useFactory)}function Ca(t){return typeof t=="function"}function ik(t){return!!t.useClass}var Ef=new ee(""),Hh={},ok={},Qm;function ev(){return Qm===void 0&&(Qm=new Zh),Qm}var bn=class{},Bu=class extends bn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fy(e,s=>this.processProvider(s)),this.records.set(TD,ya(void 0,this)),i.has("environment")&&this.records.set(bn,ya(void 0,this));let o=this.records.get(Ef);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(SD,kn,Ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Fe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=$i(this),r=Pn(void 0),i;try{return e()}finally{$i(n),Pn(r)}}get(e,n=Lu,r=Ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(P0))return e[P0](this);r=_f(r);let i,o=$i(this),s=Pn(void 0);try{if(!(r&Ie.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=lk(e)&&wf(e);l&&this.injectableDefInScope(l)?c=ya(hy(e),Hh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ie.Self?ev():this.parent;return n=r&Ie.Optional&&n===Lu?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Qh]=a[Qh]||[]).unshift(nn(e)),o)throw a;return P1(a,e,"R3InjectorError",this.source)}else throw a}finally{Pn(s),$i(o)}}resolveInjectorInitializers(){let e=Fe(null),n=$i(this),r=Pn(void 0),i;try{let o=this.get(Da,kn,Ie.Self);for(let s of o)s()}finally{$i(n),Pn(r),Fe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(nn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(e){e=tn(e);let n=Ca(e)?e:tn(e&&e.provide),r=ak(e);if(!Ca(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ya(void 0,Hh,!0),i.factory=()=>uy(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Fe(null);try{return n.value===Hh&&(n.value=ok,n.value=n.factory()),typeof n.value=="object"&&n.value&&uk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Fe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function hy(t){let e=wf(t),n=e!==null?e.factory:ba(t);if(n!==null)return n;if(t instanceof ee)throw new ce(204,!1);if(t instanceof Function)return sk(t);throw new ce(204,!1)}function sk(t){if(t.length>0)throw new ce(204,!1);let n=v1(t);return n!==null?()=>n.factory(t):()=>new t}function ak(t){if(LD(t))return ya(void 0,t.useValue);{let e=jD(t);return ya(e,Hh)}}function jD(t,e,n){let r;if(Ca(t)){let i=tn(t);return ba(i)||hy(i)}else if(LD(t))r=()=>tn(t.useValue);else if(rk(t))r=()=>t.useFactory(...uy(t.deps||[]));else if(nk(t))r=()=>z(tn(t.useExisting));else{let i=tn(t&&(t.useClass||t.provide));if(ck(t))r=()=>new i(...uy(t.deps));else return ba(i)||hy(i)}return r}function ya(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ck(t){return!!t.deps}function uk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function lk(t){return typeof t=="function"||typeof t=="object"&&t instanceof ee}function fy(t,e){for(let n of t)Array.isArray(n)?fy(n,e):n&&_D(n)?fy(n.\u0275providers,e):e(n)}function er(t,e){t instanceof Bu&&t.assertNotDestroyed();let n,r=$i(t),i=Pn(void 0);try{return e()}finally{$i(r),Pn(i)}}function BD(){return bD()!==void 0||M1()!=null}function dk(t){if(!BD())throw new ce(-203,!1)}function hk(t){let e=Jn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function fk(t){return typeof t=="function"}var oi=0,Ae=1,ge=2,rn=3,Zn=4,tr=5,Jh=6,Xh=7,Xn=8,Ta=9,ni=10,Ot=11,Uu=12,j0=13,Va=14,Ir=15,Sa=16,va=17,Aa=18,bf=19,UD=20,Hi=21,Ym=22,On=23,Wi=25,$D=1;var Zo=7,ef=8,tf=9,Fn=10,nf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(nf||{});function zi(t){return Array.isArray(t)&&typeof t[$D]=="object"}function si(t){return Array.isArray(t)&&t[$D]===!0}function HD(t){return(t.flags&4)!==0}function If(t){return t.componentOffset>-1}function tv(t){return(t.flags&1)===1}function Ki(t){return!!t.template}function py(t){return(t[ge]&512)!==0}var gy=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function zD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function La(){return qD}function qD(t){return t.type.prototype.ngOnChanges&&(t.setInput=gk),pk}La.ngInherit=!0;function pk(){let t=WD(this),e=t?.current;if(e){let n=t.previous;if(n===Ia)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function gk(t,e,n,r,i){let o=this.declaredInputs[r],s=WD(t)||mk(t,{previous:Ia,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new gy(l&&l.currentValue,n,c===Ia),zD(t,e,i,n)}var GD="__ngSimpleChanges__";function WD(t){return t[GD]||null}function mk(t,e){return t[GD]=e}var B0=null;var _r=function(t,e,n){B0?.(t,e,n)},KD="svg",yk="math";function Dr(t){for(;Array.isArray(t);)t=t[oi];return t}function QD(t,e){return Dr(e[t])}function nr(t,e){return Dr(e[t.index])}function YD(t,e){return t.data[e]}function Yi(t,e){let n=e[t];return zi(n)?n:n[oi]}function nv(t){return(t[ge]&128)===128}function vk(t){return si(t[rn])}function rf(t,e){return e==null?null:t[e]}function ZD(t){t[va]=0}function JD(t){t[ge]&1024||(t[ge]|=1024,nv(t)&&Df(t))}function wk(t,e){for(;t>0;)e=e[Va],t--;return e}function $u(t){return!!(t[ge]&9216||t[On]?.dirty)}function my(t){t[ni].changeDetectionScheduler?.notify(7),t[ge]&64&&(t[ge]|=1024),$u(t)&&Df(t)}function Df(t){t[ni].changeDetectionScheduler?.notify(0);let e=Jo(t);for(;e!==null&&!(e[ge]&8192||(e[ge]|=8192,!nv(e)));)e=Jo(e)}function XD(t,e){if((t[ge]&256)===256)throw new ce(911,!1);t[Hi]===null&&(t[Hi]=[]),t[Hi].push(e)}function _k(t,e){if(t[Hi]===null)return;let n=t[Hi].indexOf(e);n!==-1&&t[Hi].splice(n,1)}function Jo(t){let e=t[rn];return si(e)?e[rn]:e}var De={lFrame:lC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var eC=!1;function Ek(){return De.lFrame.elementDepthCount}function bk(){De.lFrame.elementDepthCount++}function Ik(){De.lFrame.elementDepthCount--}function tC(){return De.bindingsEnabled}function Dk(){return De.skipHydrationRootTNode!==null}function Ck(t){return De.skipHydrationRootTNode===t}function Tk(){De.skipHydrationRootTNode=null}function Je(){return De.lFrame.lView}function Ln(){return De.lFrame.tView}function nC(t){return De.lFrame.contextLView=t,t[Xn]}function rC(t){return De.lFrame.contextLView=null,t}function pn(){let t=iC();for(;t!==null&&t.type===64;)t=t.parent;return t}function iC(){return De.lFrame.currentTNode}function Sk(){let t=De.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Wu(t,e){let n=De.lFrame;n.currentTNode=t,n.isParent=e}function oC(){return De.lFrame.isParent}function Ak(){De.lFrame.isParent=!1}function sC(){return eC}function U0(t){eC=t}function xk(){let t=De.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Mk(t){return De.lFrame.bindingIndex=t}function rv(){return De.lFrame.bindingIndex++}function Rk(t){let e=De.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Nk(){return De.lFrame.inI18n}function Pk(t,e){let n=De.lFrame;n.bindingIndex=n.bindingRootIndex=t,yy(e)}function kk(){return De.lFrame.currentDirectiveIndex}function yy(t){De.lFrame.currentDirectiveIndex=t}function Ok(t){let e=De.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function aC(t){De.lFrame.currentQueryIndex=t}function Fk(t){let e=t[Ae];return e.type===2?e.declTNode:e.type===1?t[tr]:null}function cC(t,e,n){if(n&Ie.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Ie.Host);)if(i=Fk(o),i===null||(o=o[Va],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=De.lFrame=uC();return r.currentTNode=e,r.lView=t,!0}function iv(t){let e=uC(),n=t[Ae];De.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function uC(){let t=De.lFrame,e=t===null?null:t.child;return e===null?lC(t):e}function lC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function dC(){let t=De.lFrame;return De.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var hC=dC;function ov(){let t=dC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Vk(t){return(De.lFrame.contextLView=wk(t,De.lFrame.contextLView))[Xn]}function ja(){return De.lFrame.selectedIndex}function Xo(t){De.lFrame.selectedIndex=t}function fC(){let t=De.lFrame;return YD(t.tView,t.selectedIndex)}function pC(){De.lFrame.currentNamespace=KD}function gC(){Lk()}function Lk(){De.lFrame.currentNamespace=null}function jk(){return De.lFrame.currentNamespace}var mC=!0;function sv(){return mC}function av(t){mC=t}function Bk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=qD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function cv(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function zh(t,e,n){yC(t,e,3,n)}function qh(t,e,n,r){(t[ge]&3)===n&&yC(t,e,n,r)}function Zm(t,e){let n=t[ge];(n&3)===e&&(n&=16383,n+=1,t[ge]=n)}function yC(t,e,n,r){let i=r!==void 0?t[va]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[va]+=65536),(a<o||o==-1)&&(Uk(t,n,e,c),t[va]=(t[va]&4294901760)+c+2),c++}function $0(t,e){_r(4,t,e);let n=Fe(null);try{e.call(t)}finally{Fe(n),_r(5,t,e)}}function Uk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[ge]>>14<t[va]>>16&&(t[ge]&3)===e&&(t[ge]+=16384,$0(a,o)):$0(a,o)}var Ea=-1,es=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function $k(t){return t instanceof es}function Hk(t){return(t.flags&8)!==0}function zk(t){return(t.flags&16)!==0}var Jm={},vy=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=_f(r);let i=this.injector.get(e,Jm,r);return i!==Jm||n===Jm?i:this.parentInjector.get(e,n,r)}};function vC(t){return t!==Ea}function of(t){return t&32767}function qk(t){return t>>16}function sf(t,e){let n=qk(t),r=e;for(;n>0;)r=r[Va],n--;return r}var wy=!0;function H0(t){let e=wy;return wy=t,e}var Gk=256,wC=Gk-1,_C=5,Wk=0,Er={};function Kk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fu)&&(r=n[Fu]),r==null&&(r=n[Fu]=Wk++);let i=r&wC,o=1<<i;e.data[t+(i>>_C)]|=o}function af(t,e){let n=EC(t,e);if(n!==-1)return n;let r=e[Ae];r.firstCreatePass&&(t.injectorIndex=e.length,Xm(r.data,t),Xm(e,null),Xm(r.blueprint,null));let i=uv(t,e),o=t.injectorIndex;if(vC(i)){let s=of(i),a=sf(i,e),c=a[Ae].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Xm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function EC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function uv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=TC(i),r===null)return Ea;if(n++,i=i[Va],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ea}function _y(t,e,n){Kk(t,e,n)}function bC(t,e,n){if(n&Ie.Optional||t!==void 0)return t;Qy(e,"NodeInjector")}function IC(t,e,n,r){if(n&Ie.Optional&&r===void 0&&(r=null),!(n&(Ie.Self|Ie.Host))){let i=t[Ta],o=Pn(void 0);try{return i?i.get(e,r,n&Ie.Optional):ID(e,r,n&Ie.Optional)}finally{Pn(o)}}return bC(r,e,n)}function DC(t,e,n,r=Ie.Default,i){if(t!==null){if(e[ge]&2048&&!(r&Ie.Self)){let s=Xk(t,e,n,r,Er);if(s!==Er)return s}let o=CC(t,e,n,r,Er);if(o!==Er)return o}return IC(e,n,r,i)}function CC(t,e,n,r,i){let o=Zk(n);if(typeof o=="function"){if(!cC(e,t,r))return r&Ie.Host?bC(i,n,r):IC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Ie.Optional))Qy(n);else return s}finally{hC()}}else if(typeof o=="number"){let s=null,a=EC(t,e),c=Ea,l=r&Ie.Host?e[Ir][tr]:null;for((a===-1||r&Ie.SkipSelf)&&(c=a===-1?uv(t,e):e[a+8],c===Ea||!q0(r,!1)?a=-1:(s=e[Ae],a=of(c),e=sf(c,e)));a!==-1;){let f=e[Ae];if(z0(o,a,f.data)){let m=Qk(a,e,n,s,r,l);if(m!==Er)return m}c=e[a+8],c!==Ea&&q0(r,e[Ae].data[a+8]===l)&&z0(o,a,e)?(s=f,a=of(c),e=sf(c,e)):a=-1}}return i}function Qk(t,e,n,r,i,o){let s=e[Ae],a=s.data[t+8],c=r==null?If(a)&&wy:r!=s&&(a.type&3)!==0,l=i&Ie.Host&&o===a,f=Yk(a,s,n,c,l);return f!==null?xa(e,s,f,a):Er}function Yk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,f=o>>20,m=r?a:a+f,w=i?a+f:l;for(let E=m;E<w;E++){let M=s[E];if(E<c&&n===M||E>=c&&M.type===n)return E}if(i){let E=s[c];if(E&&Ki(E)&&E.type===n)return c}return null}function xa(t,e,n,r){let i=t[n],o=e.data;if($k(i)){let s=i;s.resolving&&C1(D1(o[n]));let a=H0(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Pn(s.injectImpl):null,f=cC(t,r,Ie.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Bk(n,o[n],e)}finally{l!==null&&Pn(l),H0(a),s.resolving=!1,hC()}}return i}function Zk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Fu)?t[Fu]:void 0;return typeof e=="number"?e>=0?e&wC:Jk:e}function z0(t,e,n){let r=1<<t;return!!(n[e+(t>>_C)]&r)}function q0(t,e){return!(t&Ie.Self)&&!(t&Ie.Host&&e)}var Yo=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return DC(this._tNode,this._lView,e,_f(r),n)}};function Jk(){return new Yo(pn(),Je())}function os(t){return qu(()=>{let e=t.prototype.constructor,n=e[Kh]||Ey(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Kh]||Ey(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ey(t){return mD(t)?()=>{let e=Ey(tn(t));return e&&e()}:ba(t)}function Xk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ge]&2048&&!(s[ge]&512);){let a=CC(o,s,n,r|Ie.Self,Er);if(a!==Er)return a;let c=o.parent;if(!c){let l=s[UD];if(l){let f=l.get(n,Er,r);if(f!==Er)return f}c=TC(s),s=s[Va]}o=c}return i}function TC(t){let e=t[Ae],n=e.type;return n===2?e.declTNode:n===1?t[tr]:null}function G0(t,e=null,n=null,r){let i=SC(t,e,n,r);return i.resolveInjectorInitializers(),i}function SC(t,e=null,n=null,r,i=new Set){let o=[n||kn,ek(t)];return r=r||(typeof t=="object"?void 0:nn(t)),new Bu(o,e||ev(),r||null,i)}var Qo=class Qo{static create(e,n){if(Array.isArray(e))return G0({name:""},n,e,"");{let r=e.name??"";return G0({name:r},e.parent,e.providers,r)}}};Qo.THROW_IF_NOT_FOUND=Lu,Qo.NULL=new Zh,Qo.\u0275prov=ie({token:Qo,providedIn:"any",factory:()=>z(TD)}),Qo.__NG_ELEMENT_ID__=-1;var In=Qo;var eO=new ee("");eO.__NG_ELEMENT_ID__=t=>{let e=pn();if(e===null)throw new ce(204,!1);if(e.type&2)return e.value;if(t&Ie.Optional)return null;throw new ce(204,!1)};var tO="ngOriginalError";function ey(t){return t[tO]}var Cr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ey(e);for(;n&&ey(n);)n=ey(n);return n||null}},AC=new ee("",{providedIn:"root",factory:()=>G(Cr).handleError.bind(void 0)}),lv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nO,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),by=class extends lv{constructor(e){super(),this._lView=e}onDestroy(e){return XD(this._lView,e),()=>_k(this._lView,e)}};function nO(){return new by(Je())}function rO(){return Cf(pn(),Je())}function Cf(t,e){return new Tr(nr(t,e))}var Tr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=rO;let t=e;return t})();var Ba=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Iy=class extends nt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,BD()&&(this.destroyRef=G(lv,{optional:!0})??void 0,this.pendingTasks=G(Ba,{optional:!0})??void 0)}emit(e){let n=Fe(null);try{super.next(e)}finally{Fe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ct&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Mt=Iy;function xC(t){return(t.flags&128)===128}var MC=new Map,iO=0;function oO(){return iO++}function sO(t){MC.set(t[bf],t)}function aO(t){MC.delete(t[bf])}var W0="__ngContext__";function ts(t,e){zi(e)?(t[W0]=e[bf],sO(e)):t[W0]=e}function RC(t){return PC(t[Uu])}function NC(t){return PC(t[Zn])}function PC(t){for(;t!==null&&!si(t);)t=t[Zn];return t}var Dy;function kC(t){Dy=t}function cO(){if(Dy!==void 0)return Dy;if(typeof document<"u")return document;throw new ce(210,!1)}var Tf=new ee("",{providedIn:"root",factory:()=>uO}),uO="ng",dv=new ee(""),gn=new ee("",{providedIn:"platform",factory:()=>"unknown"});var hv=new ee("",{providedIn:"root",factory:()=>cO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var lO="h",dO="b";var hO=()=>null;function fv(t,e,n=!1){return hO(t,e,n)}var OC=!1,fO=new ee("",{providedIn:"root",factory:()=>OC});var Cy=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${p1})`}};function pv(t){return t instanceof Cy?t.changingThisBreaksApplicationSecurity:t}function FC(t){return t instanceof Function?t():t}function pO(t){return(t??G(In)).get(gn)==="browser"}var ri=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ri||{}),gO;function gv(t,e){return gO(t,e)}function wa(t,e,n,r,i){if(r!=null){let o,s=!1;si(r)?o=r:zi(r)&&(s=!0,r=r[oi]);let a=Dr(r);t===0&&n!==null?i==null?UC(e,n,a):cf(e,n,a,i||null,!0):t===1&&n!==null?cf(e,n,a,i||null,!0):t===2?RO(e,a,s):t===3&&e.destroyNode(a),o!=null&&PO(e,t,o,n,i)}}function mO(t,e){return t.createText(e)}function yO(t,e,n){t.setValue(e,n)}function VC(t,e,n){return t.createElement(e,n)}function vO(t,e){LC(t,e),e[oi]=null,e[tr]=null}function wO(t,e,n,r,i,o){r[oi]=i,r[tr]=e,Sf(t,r,n,1,i,o)}function LC(t,e){e[ni].changeDetectionScheduler?.notify(8),Sf(t,e,e[Ot],2,null,null)}function _O(t){let e=t[Uu];if(!e)return ty(t[Ae],t);for(;e;){let n=null;if(zi(e))n=e[Uu];else{let r=e[Fn];r&&(n=r)}if(!n){for(;e&&!e[Zn]&&e!==t;)zi(e)&&ty(e[Ae],e),e=e[rn];e===null&&(e=t),zi(e)&&ty(e[Ae],e),n=e&&e[Zn]}e=n}}function EO(t,e,n,r){let i=Fn+r,o=n.length;r>0&&(n[i-1][Zn]=e),r<o-Fn?(e[Zn]=n[i],CD(n,Fn+r,e)):(n.push(e),e[Zn]=null),e[rn]=n;let s=e[Sa];s!==null&&n!==s&&jC(s,e);let a=e[Aa];a!==null&&a.insertView(t),my(e),e[ge]|=128}function jC(t,e){let n=t[tf],r=e[rn];if(zi(r))t[ge]|=nf.HasTransplantedViews;else{let i=r[rn][Ir];e[Ir]!==i&&(t[ge]|=nf.HasTransplantedViews)}n===null?t[tf]=[e]:n.push(e)}function mv(t,e){let n=t[tf],r=n.indexOf(e);n.splice(r,1)}function Ty(t,e){if(t.length<=Fn)return;let n=Fn+e,r=t[n];if(r){let i=r[Sa];i!==null&&i!==t&&mv(i,r),e>0&&(t[n-1][Zn]=r[Zn]);let o=Yh(t,Fn+e);vO(r[Ae],r);let s=o[Aa];s!==null&&s.detachView(o[Ae]),r[rn]=null,r[Zn]=null,r[ge]&=-129}return r}function BC(t,e){if(!(e[ge]&256)){let n=e[Ot];n.destroyNode&&Sf(t,e,n,3,null,null),_O(e)}}function ty(t,e){if(e[ge]&256)return;let n=Fe(null);try{e[ge]&=-129,e[ge]|=256,e[On]&&Sm(e[On]),IO(t,e),bO(t,e),e[Ae].type===1&&e[Ot].destroy();let r=e[Sa];if(r!==null&&si(e[rn])){r!==e[rn]&&mv(r,e);let i=e[Aa];i!==null&&i.detachView(t)}aO(e)}finally{Fe(n)}}function bO(t,e){let n=t.cleanup,r=e[Xh];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Xh]=null);let i=e[Hi];if(i!==null){e[Hi]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function IO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof es)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];_r(4,a,c);try{c.call(a)}finally{_r(5,a,c)}}else{_r(4,i,o);try{o.call(i)}finally{_r(5,i,o)}}}}}function DO(t,e,n){return CO(t,e.parent,n)}function CO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[oi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===br.None||o===br.Emulated)return null}return nr(r,n)}}function cf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function UC(t,e,n){t.appendChild(e,n)}function K0(t,e,n,r,i){r!==null?cf(t,e,n,r,i):UC(t,e,n)}function TO(t,e,n,r){t.removeChild(e,n,r)}function yv(t,e){return t.parentNode(e)}function SO(t,e){return t.nextSibling(e)}function AO(t,e,n){return MO(t,e,n)}function xO(t,e,n){return t.type&40?nr(t,n):null}var MO=xO,Q0;function vv(t,e,n,r){let i=DO(t,r,e),o=e[Ot],s=r.parent||e[tr],a=AO(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)K0(o,i,n[c],a,!1);else K0(o,i,n,a,!1);Q0!==void 0&&Q0(o,r,e,n,i)}function Gh(t,e){if(e!==null){let n=e.type;if(n&3)return nr(e,t);if(n&4)return Sy(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Gh(t,r);{let i=t[e.index];return si(i)?Sy(-1,i):Dr(i)}}else{if(n&32)return gv(e,t)()||Dr(t[e.index]);{let r=$C(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Jo(t[Ir]);return Gh(i,r)}else return Gh(t,e.next)}}}return null}function $C(t,e){if(e!==null){let r=t[Ir][tr],i=e.projection;return r.projection[i]}return null}function Sy(t,e){let n=Fn+t+1;if(n<e.length){let r=e[n],i=r[Ae].firstChild;if(i!==null)return Gh(r,i)}return e[Zo]}function RO(t,e,n){let r=yv(t,e);r&&TO(t,r,e,n)}function wv(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&ts(Dr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)wv(t,e,n.child,r,i,o,!1),wa(e,t,i,a,o);else if(c&32){let l=gv(n,r),f;for(;f=l();)wa(e,t,i,f,o);wa(e,t,i,a,o)}else c&16?NO(t,e,r,n,i,o):wa(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Sf(t,e,n,r,i,o){wv(n,r,t.firstChild,e,i,o,!1)}function NO(t,e,n,r,i,o){let s=n[Ir],c=s[tr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let f=c[l];wa(e,t,i,f,o)}else{let l=c,f=s[rn];xC(r)&&(l.flags|=128),wv(t,e,l,f,i,o,!0)}}function PO(t,e,n,r,i){let o=n[Zo],s=Dr(n);o!==s&&wa(e,t,r,o,i);for(let a=Fn;a<n.length;a++){let c=n[a];Sf(c[Ae],c,t,e,r,o)}}function kO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:ri.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ri.Important),t.setStyle(n,r,i,o))}}function OO(t,e,n){t.setAttribute(e,"style",n)}function HC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function zC(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ly(t,e,r),i!==null&&HC(t,e,i),o!==null&&OO(t,e,o)}var ss={};function We(t=1){qC(Ln(),Je(),ja()+t,!1)}function qC(t,e,n,r){if(!r)if((e[ge]&3)===3){let o=t.preOrderCheckHooks;o!==null&&zh(e,o,n)}else{let o=t.preOrderHooks;o!==null&&qh(e,o,0,n)}Xo(n)}function Ce(t,e=Ie.Default){let n=Je();if(n===null)return z(t,e);let r=pn();return DC(r,n,tn(t),e)}function GC(){let t="invalid";throw new Error(t)}function WC(t,e,n,r,i,o){let s=Fe(null);try{let a=null;i&qi.SignalBased&&(a=e[r][Jr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&qi.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):zD(e,a,r,o)}finally{Fe(s)}}function FO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Xo(~i);else{let o=i,s=n[++r],a=n[++r];Pk(s,o);let c=e[o];a(2,c)}}}finally{Xo(-1)}}function Af(t,e,n,r,i,o,s,a,c,l,f){let m=e.blueprint.slice();return m[oi]=i,m[ge]=r|4|128|8|64,(l!==null||t&&t[ge]&2048)&&(m[ge]|=2048),ZD(m),m[rn]=m[Va]=t,m[Xn]=n,m[ni]=s||t&&t[ni],m[Ot]=a||t&&t[Ot],m[Ta]=c||t&&t[Ta]||null,m[tr]=o,m[bf]=oO(),m[Jh]=f,m[UD]=l,m[Ir]=e.type==2?t[Ir]:m,m}function xf(t,e,n,r,i){let o=t.data[e];if(o===null)o=VO(t,e,n,r,i),Nk()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Sk();o.injectorIndex=s===null?-1:s.injectorIndex}return Wu(o,!0),o}function VO(t,e,n,r,i){let o=iC(),s=oC(),a=s?o:o&&o.parent,c=t.data[e]=$O(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function KC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function QC(t,e,n,r,i){let o=ja(),s=r&2;try{Xo(-1),s&&e.length>Wi&&qC(t,e,Wi,!1),_r(s?2:0,i),n(r,i)}finally{Xo(o),_r(s?3:1,i)}}function YC(t,e,n){if(HD(e)){let r=Fe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{Fe(r)}}}function ZC(t,e,n){tC()&&(KO(t,e,n,nr(n,e)),(n.flags&64)===64&&rT(t,e,n))}function JC(t,e,n=nr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function XC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=_v(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function _v(t,e,n,r,i,o,s,a,c,l,f){let m=Wi+r,w=m+i,E=LO(m,w),M=typeof l=="function"?l():l;return E[Ae]={type:t,blueprint:E,template:n,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:M,incompleteFirstPass:!1,ssrId:f}}function LO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ss);return n}function jO(t,e,n,r){let o=r.get(fO,OC)||n===br.ShadowDom,s=t.selectRootElement(e,o);return BO(s),s}function BO(t){UO(t)}var UO=()=>null;function $O(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Dk()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Y0(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=qi.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?Z0(r,n,l,a,c):Z0(r,n,l,a)}return r}function Z0(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function HO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let f=r;f<i;f++){let m=o[f],w=n?n.get(m):null,E=w?w.inputs:null,M=w?w.outputs:null;c=Y0(0,m.inputs,f,c,E),l=Y0(1,m.outputs,f,l,M);let P=c!==null&&s!==null&&!Jy(e)?rF(c,f,s):null;a.push(P)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function zO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function eT(t,e,n,r,i,o,s,a){let c=nr(e,n),l=e.inputs,f;!a&&l!=null&&(f=l[r])?(Ev(t,n,f,r,i),If(e)&&qO(n,e.index)):e.type&3?(r=zO(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function qO(t,e){let n=Yi(e,t);n[ge]&16||(n[ge]|=64)}function tT(t,e,n,r){if(tC()){let i=r===null?null:{"":-1},o=YO(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&nT(t,e,n,s,i,a),i&&ZO(n,r,i)}n.mergedAttrs=ju(n.mergedAttrs,n.attrs)}function nT(t,e,n,r,i,o){for(let l=0;l<r.length;l++)_y(af(n,e),t,r[l].type);XO(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let f=r[l];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,c=KC(t,e,r.length,null);for(let l=0;l<r.length;l++){let f=r[l];n.mergedAttrs=ju(n.mergedAttrs,f.hostAttrs),eF(t,n,e,c,f),JO(c,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let m=f.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}HO(t,n,o)}function GO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;WO(s)!=a&&s.push(a),s.push(n,r,o)}}function WO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function KO(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;If(n)&&tF(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||af(n,e),ts(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=xa(e,t,a,n);if(ts(l,e),s!==null&&nF(e,a-i,l,c,n,s),Ki(c)){let f=Yi(n.index,e);f[Xn]=xa(e,t,a,n)}}}function rT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=kk();try{Xo(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];yy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QO(c,l)}}finally{Xo(-1),yy(s)}}function QO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function YO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(q1(e,s.selectors,!1))if(r||(r=[]),Ki(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Ay(t,e,c)}else r.unshift(s),Ay(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ay(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ZO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new ce(-301,!1);r.push(e[i],o)}}}function JO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ki(e)&&(n[""]=t)}}function XO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function eF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ba(i.type,!0)),s=new es(o,Ki(i),Ce);t.blueprint[r]=s,n[r]=s,GO(t,e,r,KC(t,n,i.hostVars,ss),i)}function tF(t,e,n){let r=nr(e,t),i=XC(n),o=t[ni].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Mf(t,Af(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function nF(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],f=s[a++],m=s[a++];WC(r,n,c,l,f,m)}}function rF(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function iT(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function oT(t,e){let n=t.contentQueries;if(n!==null){let r=Fe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];aC(o),a.contentQueries(2,e[s],s)}}}finally{Fe(r)}}}function Mf(t,e){return t[Uu]?t[j0][Zn]=e:t[Uu]=e,t[j0]=e,e}function xy(t,e,n){aC(0);let r=Fe(null);try{e(t,n)}finally{Fe(r)}}function iF(t){return t[Xh]??=[]}function oF(t){return t.cleanup??=[]}function sT(t,e){let n=t[Ta],r=n?n.get(Cr,null):null;r&&r.handleError(e)}function Ev(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],f=t.data[s];WC(f,l,r,a,c,i)}}function sF(t,e,n){let r=QD(e,t);yO(t[Ot],r,n)}function aF(t,e){let n=Yi(e,t),r=n[Ae];cF(r,n);let i=n[oi];i!==null&&n[Jh]===null&&(n[Jh]=fv(i,n[Ta])),bv(r,n,n[Xn])}function cF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function bv(t,e,n){iv(e);try{let r=t.viewQuery;r!==null&&xy(1,r,n);let i=t.template;i!==null&&QC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Aa]?.finishViewCreation(t),t.staticContentQueries&&oT(t,e),t.staticViewQueries&&xy(2,t.viewQuery,n);let o=t.components;o!==null&&uF(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ge]&=-5,ov()}}function uF(t,e){for(let n=0;n<e.length;n++)aF(t,e[n])}function lF(t,e,n,r){let i=Fe(null);try{let o=e.tView,a=t[ge]&4096?4096:16,c=Af(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Sa]=l;let f=t[Aa];return f!==null&&(c[Aa]=f.createEmbeddedView(o)),bv(o,c,n),c}finally{Fe(i)}}function J0(t,e){return!e||e.firstChild===null||xC(t)}function dF(t,e,n,r=!0){let i=e[Ae];if(EO(i,e,t,n),r){let s=Sy(n,t),a=e[Ot],c=yv(a,t[Zo]);c!==null&&wO(i,t[tr],a,e,c,s)}let o=e[Jh];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function uf(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Dr(o)),si(o)&&hF(o,r);let s=n.type;if(s&8)uf(t,e,n.child,r);else if(s&32){let a=gv(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=$C(e,n);if(Array.isArray(a))r.push(...a);else{let c=Jo(e[Ir]);uf(c[Ae],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function hF(t,e){for(let n=Fn;n<t.length;n++){let r=t[n],i=r[Ae].firstChild;i!==null&&uf(r[Ae],r,i,e)}t[Zo]!==t[oi]&&e.push(t[Zo])}var aT=[];function fF(t){return t[On]??pF(t)}function pF(t){let e=aT.pop()??Object.create(mF);return e.lView=t,e}function gF(t){t.lView[On]!==t&&(t.lView=null,aT.push(t))}var mF=Se(W({},Au),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Df(t.lView)},consumerOnSignalRead(){this.lView[On]=this}});function yF(t){let e=t[On]??Object.create(vF);return e.lView=t,e}var vF=Se(W({},Au),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Jo(t.lView);for(;e&&!cT(e[Ae]);)e=Jo(e);e&&JD(e)},consumerOnSignalRead(){this.lView[On]=this}});function cT(t){return t.type!==2}var wF=100;function uT(t,e=!0,n=0){let r=t[ni],i=r.rendererFactory,o=!1;o||i.begin?.();try{_F(t,n)}catch(s){throw e&&sT(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function _F(t,e){let n=sC();try{U0(!0),My(t,e);let r=0;for(;$u(t);){if(r===wF)throw new ce(103,!1);r++,My(t,1)}}finally{U0(n)}}function EF(t,e,n,r){let i=e[ge];if((i&256)===256)return;let o=!1,s=!1;!o&&e[ni].inlineEffectRunner?.flush(),iv(e);let a=!0,c=null,l=null;o||(cT(t)?(l=fF(e),c=uh(l)):KI()===null?(a=!1,l=yF(e),c=uh(l)):e[On]&&(Sm(e[On]),e[On]=null));try{ZD(e),Mk(t.bindingStartIndex),n!==null&&QC(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let E=t.preOrderCheckHooks;E!==null&&zh(e,E,null)}else{let E=t.preOrderHooks;E!==null&&qh(e,E,0,null),Zm(e,0)}if(s||bF(e),lT(e,0),t.contentQueries!==null&&oT(t,e),!o)if(f){let E=t.contentCheckHooks;E!==null&&zh(e,E)}else{let E=t.contentHooks;E!==null&&qh(e,E,1),Zm(e,1)}FO(t,e);let m=t.components;m!==null&&hT(e,m,0);let w=t.viewQuery;if(w!==null&&xy(2,w,r),!o)if(f){let E=t.viewCheckHooks;E!==null&&zh(e,E)}else{let E=t.viewHooks;E!==null&&qh(e,E,2),Zm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ym]){for(let E of e[Ym])E();e[Ym]=null}o||(e[ge]&=-73)}catch(f){throw o||Df(e),f}finally{l!==null&&(Cm(l,c),a&&gF(l)),ov()}}function lT(t,e){for(let n=RC(t);n!==null;n=NC(n))for(let r=Fn;r<n.length;r++){let i=n[r];dT(i,e)}}function bF(t){for(let e=RC(t);e!==null;e=NC(e)){if(!(e[ge]&nf.HasTransplantedViews))continue;let n=e[tf];for(let r=0;r<n.length;r++){let i=n[r];JD(i)}}}function IF(t,e,n){let r=Yi(e,t);dT(r,n)}function dT(t,e){nv(t)&&My(t,e)}function My(t,e){let r=t[Ae],i=t[ge],o=t[On],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Tm(o)),s||=!1,o&&(o.dirty=!1),t[ge]&=-9217,s)EF(r,t,r.template,t[Xn]);else if(i&8192){lT(t,1);let a=r.components;a!==null&&hT(t,a,1)}}function hT(t,e,n){for(let r=0;r<e.length;r++)IF(t,e[r],n)}function Iv(t,e){let n=sC()?64:1088;for(t[ni].changeDetectionScheduler?.notify(e);t;){t[ge]|=n;let r=Jo(t);if(py(t)&&!r)return t;t=r}return null}var ns=class{get rootNodes(){let e=this._lView,n=e[Ae];return uf(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xn]}set context(e){this._lView[Xn]=e}get destroyed(){return(this._lView[ge]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rn];if(si(e)){let n=e[ef],r=n?n.indexOf(this):-1;r>-1&&(Ty(e,r),Yh(n,r))}this._attachedToViewContainer=!1}BC(this._lView[Ae],this._lView)}onDestroy(e){XD(this._lView,e)}markForCheck(){Iv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){my(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,uT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=py(this._lView),n=this._lView[Sa];n!==null&&!e&&mv(n,this._lView),LC(this._lView[Ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=e;let n=py(this._lView),r=this._lView[Sa];r!==null&&!n&&jC(r,this._lView),my(this._lView)}},Rf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=TF;let t=e;return t})(),DF=Rf,CF=class extends DF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=lF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ns(i)}};function TF(){return SF(pn(),Je())}function SF(t,e){return t.type&4?new CF(e,t,Cf(t,e)):null}var d6=new RegExp(`^(\\d+)*(${dO}|${lO})*(.*)`);var AF=()=>null;function X0(t,e){return AF(t,e)}var Ma=class{},fT=new ee("",{providedIn:"root",factory:()=>!1});var pT=new ee(""),Ry=class{},lf=class{};function xF(t){let e=Error(`No component factory found for ${nn(t)}.`);return e[MF]=t,e}var MF="ngComponent";var Ny=class{resolveComponentFactory(e){throw xF(e)}},Vv=class Vv{};Vv.NULL=new Ny;var Ra=Vv,Na=class{},ai=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>RF();let t=e;return t})();function RF(){let t=Je(),e=pn(),n=Yi(e.index,t);return(zi(n)?n:t)[Ot]}var NF=(()=>{let e=class e{};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var eD=new Set;function Ku(t){eD.has(t)||(eD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function gT(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof Jn.requestAnimationFrame=="function"&&Jn.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function tD(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function nD(...t){}var Ne=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mt(!1),this.onMicrotaskEmpty=new Mt(!1),this.onStable=new Mt(!1),this.onError=new Mt(!1),typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,OF(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ce(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,PF,nD,nD);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},PF={};function Dv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function kF(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{gT(()=>{t.callbackScheduled=!1,Py(t),t.isCheckStableRunning=!0,Dv(t),t.isCheckStableRunning=!1})}),Py(t))}function OF(t){let e=()=>{kF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(FF(a))return n.invokeTask(i,o,s,a);try{return rD(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),iD(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return rD(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!VF(a)&&e(),iD(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Py(t),Dv(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Py(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function rD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function iD(t){t._nesting--,Dv(t)}var df=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mt,this.onMicrotaskEmpty=new Mt,this.onStable=new Mt,this.onError=new Mt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function FF(t){return mT(t,"__ignore_ng_zone__")}function VF(t){return mT(t,"__scheduler_tick__")}function mT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}function LF(t="zone.js",e){return t==="noop"?new df:t==="zone.js"?new Ne(e):t}var fn=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(fn||{}),jF={destroy(){}};function Cv(t,e){!e&&dk(Cv);let n=e?.injector??G(In);return pO(n)?(Ku("NgAfterNextRender"),UF(t,n,!0,e?.phase??fn.MixedReadWrite)):jF}function BF(t,e){if(t instanceof Function)switch(e){case fn.EarlyRead:return{earlyRead:t};case fn.Write:return{write:t};case fn.MixedReadWrite:return{mixedReadWrite:t};case fn.Read:return{read:t}}return t}function UF(t,e,n,r){let i=BF(t,r),o=e.get(Tv),s=o.handler??=new Oy,a=[],c=[],l=()=>{for(let E of c)s.unregister(E);f()},f=e.get(lv).onDestroy(l),m=0,w=(E,M)=>{if(!M)return;let P=n?(...H)=>(m--,m<1&&l(),M(...H)):M,N=er(e,()=>new ky(E,a,P));s.register(N),c.push(N),m++};return w(fn.EarlyRead,i.earlyRead),w(fn.Write,i.write),w(fn.MixedReadWrite,i.mixedReadWrite),w(fn.Read,i.read),{destroy:l}}var ky=class{constructor(e,n,r){this.phase=e,this.pipelinedArgs=n,this.callbackFn=r,this.zone=G(Ne),this.errorHandler=G(Cr,{optional:!0}),G(Ma,{optional:!0})?.notify(6)}invoke(){try{let e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}},Oy=class{constructor(){this.executingCallbacks=!1,this.buckets={[fn.EarlyRead]:new Set,[fn.Write]:new Set,[fn.MixedReadWrite]:new Set,[fn.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Tv=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Fy(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=x0(i,a);else if(o==2){let c=a,l=e[++s];r=x0(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var hf=class extends Ra{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Gi(e);return new Pa(n,this.ngModule)}};function oD(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:qi.None;e?n.push({propName:s,templateName:r,isSignal:(a&qi.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function $F(t){let e=t.toLowerCase();return e==="svg"?KD:e==="math"?yk:null}var Pa=class extends lf{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=oD(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return oD(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Q1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Fe(null);try{i=i||this.ngModule;let s=i instanceof bn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new vy(e,s):e,c=a.get(Na,null);if(c===null)throw new ce(407,!1);let l=a.get(NF,null),f=a.get(Tv,null),m=a.get(Ma,null),w={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:f,changeDetectionScheduler:m},E=c.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=r?jO(E,r,this.componentDef.encapsulation,a):VC(E,M,$F(M)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let H=null;P!==null&&(H=fv(P,a,!0));let X=_v(0,null,null,1,0,null,null,null,null,null,null),$=Af(null,X,null,N,null,null,w,E,a,null,H);iv($);let re,le;try{let se=this.componentDef,T,I=null;se.findHostDirectiveDefs?(T=[],I=new Map,se.findHostDirectiveDefs(se,T,I),T.push(se)):T=[se];let C=HF($,P),S=zF(C,P,se,T,$,w,E);le=YD(X,Wi),P&&WF(E,se,P,r),n!==void 0&&KF(le,this.ngContentSelectors,n),re=GF(S,se,T,I,$,[QF]),bv(X,$,null)}finally{ov()}return new Vy(this.componentType,re,Cf(le,$),$,le)}finally{Fe(o)}}},Vy=class extends Ry{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ns(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Ev(o[Ae],o,i,e,n),this.previousInputValues.set(e,n);let s=Yi(this._tNode.index,o);Iv(s,1)}}get injector(){return new Yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function HF(t,e){let n=t[Ae],r=Wi;return t[r]=e,xf(n,r,2,"#host",null)}function zF(t,e,n,r,i,o,s){let a=i[Ae];qF(r,t,e,s);let c=null;e!==null&&(c=fv(e,i[Ta]));let l=o.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let m=Af(i,XC(n),null,f,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&Ay(a,t,r.length-1),Mf(i,m),i[t.index]=m}function qF(t,e,n,r){for(let i of t)e.mergedAttrs=ju(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Fy(e,e.mergedAttrs,!0),n!==null&&zC(r,n,e))}function GF(t,e,n,r,i,o){let s=pn(),a=i[Ae],c=nr(s,i);nT(a,i,s,n,null,r);for(let f=0;f<n.length;f++){let m=s.directiveStart+f,w=xa(i,a,m,s);ts(w,i)}rT(a,i,s),c&&ts(c,i);let l=xa(i,a,s.directiveStart+s.componentOffset,s);if(t[Xn]=i[Xn]=l,o!==null)for(let f of o)f(l,e);return YC(a,s,i),l}function WF(t,e,n,r){if(r)ly(t,n,["ng-version","18.1.2"]);else{let{attrs:i,classes:o}=Y1(e.selectors[0]);i&&ly(t,n,i),o&&o.length>0&&HC(t,n,o.join(" "))}}function KF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function QF(){let t=pn();cv(Je()[Ae],t)}var Ua=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=YF;let t=e;return t})();function YF(){let t=pn();return JF(t,Je())}var ZF=Ua,yT=class extends ZF{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Cf(this._hostTNode,this._hostLView)}get injector(){return new Yo(this._hostTNode,this._hostLView)}get parentInjector(){let e=uv(this._hostTNode,this._hostLView);if(vC(e)){let n=sf(e,this._hostLView),r=of(e),i=n[Ae].data[r+8];return new Yo(i,n)}else return new Yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=sD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Fn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=X0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,J0(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!fk(e),a;if(s)a=n;else{let M=n||{};a=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let c=s?e:new Pa(Gi(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let P=(s?l:this.parentInjector).get(bn,null);P&&(o=P)}let f=Gi(c.componentType??{}),m=X0(this._lContainer,f?.id??null),w=m?.firstChild??null,E=c.create(l,i,w,o);return this.insertImpl(E.hostView,a,J0(this._hostTNode,m)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(vk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[rn],l=new yT(c,c[tr],c[rn]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return dF(s,i,o,r),e.attachToViewContainerRef(),CD(ny(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=sD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ty(this._lContainer,n);r&&(Yh(ny(this._lContainer),n),BC(r[Ae],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ty(this._lContainer,n);return r&&Yh(ny(this._lContainer),n)!=null?new ns(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function sD(t){return t[ef]}function ny(t){return t[ef]||(t[ef]=[])}function JF(t,e){let n,r=e[t.index];return si(r)?n=r:(n=iT(r,e,null,t),e[t.index]=n,Mf(e,n)),eV(n,e,t,r),new yT(n,t,e)}function XF(t,e){let n=t[Ot],r=n.createComment(""),i=nr(e,t),o=yv(n,i);return cf(n,o,r,SO(n,i),!1),r}var eV=rV,tV=()=>!1;function nV(t,e,n){return tV(t,e,n)}function rV(t,e,n,r){if(t[Zo])return;let i;n.type&8?i=Dr(r):i=XF(e,n),t[Zo]=i}function iV(t){return typeof t=="function"&&t[Jr]!==void 0}function Nf(t,e){Ku("NgSignals");let n=o0(t),r=n[Jr];return e?.equal&&(r.equal=e.equal),n.set=i=>Am(r,i),n.update=i=>s0(r,i),n.asReadonly=oV.bind(n),n}function oV(){let t=this[Jr];if(t.readonlyFn===void 0){let e=()=>this();e[Jr]=t,t.readonlyFn=e}return t.readonlyFn}function vT(t){return iV(t)&&typeof t.set=="function"}function sV(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(lV))}return o}return ff.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,f=i.styleUrls;i.styleUrls.forEach((m,w)=>{a.push(""),s.push(r(m).then(E=>{a[l+w]=E,f.splice(f.indexOf(m),1),f.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>dV(o));e.push(c)}),cV(),Promise.all(e).then(()=>{})}var ff=new Map,aV=new Set;function cV(){let t=ff;return ff=new Map,t}function uV(){return ff.size===0}function lV(t){return typeof t=="string"?t:t.text()}function dV(t){aV.delete(t)}function hV(t){return Object.getPrototypeOf(t.prototype).constructor}function Zi(t){let e=hV(t.type),n=!0,r=[t];for(;e;){let i;if(Ki(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ce(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Bh(t.inputs),s.inputTransforms=Bh(t.inputTransforms),s.declaredInputs=Bh(t.declaredInputs),s.outputs=Bh(t.outputs);let a=i.hostBindings;a&&yV(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&gV(t,c),l&&mV(t,l),fV(t,i),m1(t.outputs,i.outputs),Ki(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Zi&&(n=!1)}}e=Object.getPrototypeOf(e)}pV(r)}function fV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function pV(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ju(i.hostAttrs,n=ju(n,i.hostAttrs))}}function Bh(t){return t===Ia?{}:t===kn?[]:t}function gV(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function mV(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function yV(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Qi=class{},Hu=class{};var pf=class extends Qi{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hf(this);let i=PD(e);this._bootstrapComponents=FC(i.bootstrap),this._r3Injector=SC(e,n,[{provide:Qi,useValue:this},{provide:Ra,useValue:this.componentFactoryResolver},...r],nn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gf=class extends Hu{constructor(e){super(),this.moduleType=e}create(e){return new pf(this.moduleType,e,[])}};function vV(t,e,n){return new pf(t,e,n)}var Ly=class extends Qi{constructor(e){super(),this.componentFactoryResolver=new hf(this),this.instance=null;let n=new Bu([...e.providers,{provide:Qi,useValue:this},{provide:Ra,useValue:this.componentFactoryResolver}],e.parent||ev(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Pf(t,e,n=null){return new Ly({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function wT(t){return _V(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function wV(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function _V(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function EV(t,e,n){return t[e]=n}function ka(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function bV(t,e,n,r){let i=ka(t,e,n);return ka(t,e+1,r)||i}function IV(t){return(t.flags&32)===32}function DV(t,e,n,r,i,o,s,a,c){let l=e.consts,f=xf(e,t,4,s||null,a||null);tT(e,n,f,rf(l,c)),cv(e,f);let m=f.tView=_v(2,f,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}function CV(t,e,n,r,i,o,s,a,c,l){let f=n+Wi,m=e.firstCreatePass?DV(f,e,t,r,i,o,s,a,c):e.data[f];Wu(m,!1);let w=TV(e,t,m,n);sv()&&vv(e,t,w,m),ts(w,t);let E=iT(w,t,w,m);return t[f]=E,Mf(t,E),nV(E,m,t),tv(m)&&ZC(e,t,m),c!=null&&JC(t,m,l),m}function ci(t,e,n,r,i,o,s,a){let c=Je(),l=Ln(),f=rf(l.consts,o);return CV(c,l,t,e,n,r,i,f,s,a),ci}var TV=SV;function SV(t,e,n,r){return av(!0),e[Ot].createComment("")}function AV(t,e,n,r){return ka(t,rv(),n)?e+ED(n)+r:ss}function Uh(t,e){return t<<17|e<<2}function rs(t){return t>>17&32767}function xV(t){return(t&2)==2}function MV(t,e){return t&131071|e<<17}function jy(t){return t|2}function Oa(t){return(t&131068)>>2}function ry(t,e){return t&-131069|e<<2}function RV(t){return(t&1)===1}function By(t){return t|1}function NV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=rs(s),c=Oa(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let m=n;f=m[1],(f===null||Gu(m,f)>0)&&(l=!0)}else f=n;if(i)if(c!==0){let w=rs(t[a+1]);t[r+1]=Uh(w,a),w!==0&&(t[w+1]=ry(t[w+1],r)),t[a+1]=MV(t[a+1],r)}else t[r+1]=Uh(a,0),a!==0&&(t[a+1]=ry(t[a+1],r)),a=r;else t[r+1]=Uh(c,0),a===0?a=r:t[c+1]=ry(t[c+1],r),c=r;l&&(t[r+1]=jy(t[r+1])),aD(t,f,r,!0),aD(t,f,r,!1),PV(e,f,t,r,o),s=Uh(a,c),o?e.classBindings=s:e.styleBindings=s}function PV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Gu(o,e)>=0&&(n[r+1]=By(n[r+1]))}function aD(t,e,n,r){let i=t[n+1],o=e===null,s=r?rs(i):Oa(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];kV(c,e)&&(a=!0,t[s+1]=r?By(l):jy(l)),s=r?rs(l):Oa(l)}a&&(t[n+1]=r?jy(i):By(i))}function kV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Gu(t,e)>=0:!1}function mn(t,e,n){let r=Je(),i=rv();if(ka(r,i,e)){let o=Ln(),s=fC();eT(o,s,r,t,e,r[Ot],n,!1)}return mn}function cD(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Ev(t,n,o[s],s,r)}function Sv(t,e){return OV(t,e,null,!0),Sv}function OV(t,e,n,r){let i=Je(),o=Ln(),s=Rk(2);if(o.firstUpdatePass&&VV(o,t,s,r),e!==ss&&ka(i,s,e)){let a=o.data[ja()];$V(o,a,i,i[Ot],t,i[s+1]=HV(e,n),r,s)}}function FV(t,e){return e>=t.expandoStartIndex}function VV(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[ja()],s=FV(t,n);zV(o,r)&&e===null&&!s&&(e=!1),e=LV(i,o,e,r),NV(i,o,e,n,s,r)}}function LV(t,e,n,r){let i=Ok(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=iy(null,t,e,n,r),n=zu(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=iy(i,t,e,n,r),o===null){let c=jV(t,e,r);c!==void 0&&Array.isArray(c)&&(c=iy(null,t,e,c[1],r),c=zu(c,e.attrs,r),BV(t,e,r,c))}else o=UV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function jV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Oa(r)!==0)return t[rs(r)]}function BV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[rs(i)]=r}function UV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=zu(r,s,n)}return zu(r,e.attrs,n)}function iy(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=zu(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function zu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),F1(t,s,n?!0:e[++o]))}return t===void 0?null:t}function $V(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],f=RV(l)?uD(c,e,n,i,Oa(l),s):void 0;if(!mf(f)){mf(o)||xV(l)&&(o=uD(c,null,n,i,a,s));let m=QD(ja(),n);kO(r,s,m,i,o)}}function uD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),f=l?c[1]:c,m=f===null,w=n[i+1];w===ss&&(w=m?kn:void 0);let E=m?Km(w,r):f===r?w:void 0;if(l&&!mf(E)&&(E=Km(c,r)),mf(E)&&(a=E,s))return a;let M=t[i+1];i=s?rs(M):Oa(M)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Km(c,r))}return a}function mf(t){return t!==void 0}function HV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=nn(pv(t)))),t}function zV(t,e){return(t.flags&(e?8:16))!==0}function qV(t,e,n,r,i,o){let s=e.consts,a=rf(s,i),c=xf(e,t,2,r,a);return tT(e,n,c,rf(s,o)),c.attrs!==null&&Fy(c,c.attrs,!1),c.mergedAttrs!==null&&Fy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function J(t,e,n,r){let i=Je(),o=Ln(),s=Wi+t,a=i[Ot],c=o.firstCreatePass?qV(s,o,i,e,n,r):o.data[s],l=GV(o,i,c,a,e,t);i[s]=l;let f=tv(c);return Wu(c,!0),zC(a,l,c),!IV(c)&&sv()&&vv(o,i,l,c),Ek()===0&&ts(l,i),bk(),f&&(ZC(o,i,c),YC(o,c,i)),r!==null&&JC(i,c),J}function Q(){let t=pn();oC()?Ak():(t=t.parent,Wu(t,!1));let e=t;Ck(e)&&Tk(),Ik();let n=Ln();return n.firstCreatePass&&(cv(n,t),HD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Hk(e)&&cD(n,e,Je(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&zk(e)&&cD(n,e,Je(),e.stylesWithoutHost,!1),Q}function yn(t,e,n,r){return J(t,e,n,r),Q(),yn}var GV=(t,e,n,r,i,o)=>(av(!0),VC(r,i,jk()));function _T(){return Je()}var yf="en-US";var WV=yf;function KV(t){typeof t=="string"&&(WV=t.toLowerCase().replace(/_/g,"-"))}var QV=(t,e,n)=>{};function rr(t,e,n,r){let i=Je(),o=Ln(),s=pn();return ET(o,i,i[Ot],s,t,e,r),rr}function YV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Xh],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function ET(t,e,n,r,i,o,s){let a=tv(r),l=t.firstCreatePass&&oF(t),f=e[Xn],m=iF(e),w=!0;if(r.type&3||s){let P=nr(r,e),N=s?s(P):P,H=m.length,X=s?re=>s(Dr(re[r.index])):r.index,$=null;if(!s&&a&&($=YV(t,e,i,r.index)),$!==null){let re=$.__ngLastListenerFn__||$;re.__ngNextListenerFn__=o,$.__ngLastListenerFn__=o,w=!1}else{o=dD(r,e,f,o),QV(P,i,o);let re=n.listen(N,i,o);m.push(o,re),l&&l.push(i,X,H,H+1)}}else o=dD(r,e,f,o);let E=r.outputs,M;if(w&&E!==null&&(M=E[i])){let P=M.length;if(P)for(let N=0;N<P;N+=2){let H=M[N],X=M[N+1],le=e[H][X].subscribe(o),se=m.length;m.push(o,le),l&&l.push(i,r.index,se,-(se+1))}}}function lD(t,e,n,r){let i=Fe(null);try{return _r(6,e,n),n(r)!==!1}catch(o){return sT(t,o),!1}finally{_r(7,e,n),Fe(i)}}function dD(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Yi(t.index,e):e;Iv(s,5);let a=lD(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=lD(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function $a(t=1){return Vk(t)}function te(t,e=""){let n=Je(),r=Ln(),i=t+Wi,o=r.firstCreatePass?xf(r,i,1,e,null):r.data[i],s=ZV(r,n,o,e,t);n[i]=s,sv()&&vv(r,n,s,o),Wu(o,!1)}var ZV=(t,e,n,r,i)=>(av(!0),mO(e[Ot],r));function as(t){return on("",t,""),as}function on(t,e,n){let r=Je(),i=AV(r,t,e,n);return i!==ss&&sF(r,ja(),i),on}function Av(t,e,n){vT(e)&&(e=e());let r=Je(),i=rv();if(ka(r,i,e)){let o=Ln(),s=fC();eT(o,s,r,t,e,r[Ot],n,!1)}return Av}function bT(t,e){let n=vT(t);return n&&t.set(e),n}function xv(t,e){let n=Je(),r=Ln(),i=pn();return ET(r,n,n[Ot],i,t,e),xv}function JV(t,e,n){let r=Ln();if(r.firstCreatePass){let i=Ki(t);Uy(n,r.data,r.blueprint,i,!0),Uy(e,r.data,r.blueprint,i,!1)}}function Uy(t,e,n,r,i){if(t=tn(t),Array.isArray(t))for(let o=0;o<t.length;o++)Uy(t[o],e,n,r,i);else{let o=Ln(),s=Je(),a=pn(),c=Ca(t)?t:tn(t.provide),l=jD(t),f=a.providerIndexes&1048575,m=a.directiveStart,w=a.providerIndexes>>20;if(Ca(t)||!t.multi){let E=new es(l,i,Ce),M=sy(c,e,i?f:f+w,m);M===-1?(_y(af(a,s),o,c),oy(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),s.push(E)):(n[M]=E,s[M]=E)}else{let E=sy(c,e,f+w,m),M=sy(c,e,f,f+w),P=E>=0&&n[E],N=M>=0&&n[M];if(i&&!N||!i&&!P){_y(af(a,s),o,c);let H=t2(i?e2:XV,n.length,i,r,l);!i&&N&&(n[M].providerFactory=H),oy(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(H),s.push(H)}else{let H=IT(n[i?M:E],l,!i&&r);oy(o,t,E>-1?E:M,H)}!i&&r&&N&&n[M].componentProviders++}}}function oy(t,e,n,r){let i=Ca(e),o=ik(e);if(i||o){let c=(o?tn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,c]):l[f+1].push(r,c)}else l.push(n,c)}}}function IT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function sy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function XV(t,e,n,r){return $y(this.multi,[])}function e2(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=xa(n,n[Ae],this.providerFactory.index,r);o=a.slice(0,s),$y(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],$y(i,o);return o}function $y(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function t2(t,e,n,r,i){let o=new es(t,n,Ce);return o.multi=[],o.index=e,o.componentProviders=0,IT(o,i,r&&!n),o}function Qu(t,e=[]){return n=>{n.providersResolver=(r,i)=>JV(r,i?i(t):t,e)}}var n2=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=FD(!1,r.type),o=i.length>0?Pf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ie({token:e,providedIn:"environment",factory:()=>new e(z(bn))});let t=e;return t})();function DT(t){Ku("NgStandalone"),t.getStandaloneInjector=e=>e.get(n2).getOrCreateStandaloneInjector(t)}function cs(t,e,n,r,i){return i2(Je(),xk(),t,e,n,r,i)}function r2(t,e){let n=t[e];return n===ss?void 0:n}function i2(t,e,n,r,i,o,s){let a=e+n;return bV(t,a,i,o)?EV(t,a+2,s?r.call(s,i,o):r(i,o)):r2(t,a+2)}var $h=null;function o2(t){$h!==null&&(t.defaultEncapsulation!==$h.defaultEncapsulation||t.preserveWhitespaces!==$h.preserveWhitespaces)||($h=t)}var ii=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},CT=new ii("18.1.2");var kf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Mv=new ee(""),Yu=new ee(""),Of=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Rv||(s2(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(z(Ne),z(Ff),z(Yu))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Ff=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Rv?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function s2(t){Rv=t}var Rv;function us(t){return!!t&&typeof t.then=="function"}function TT(t){return!!t&&typeof t.subscribe=="function"}var Vf=new ee(""),ST=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=G(Vf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(us(s))r.push(s);else if(TT(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nv=new ee("");function a2(){i0(()=>{throw new ce(600,!1)})}function c2(t){return t.isBoundToModule}var u2=10;function l2(t,e,n){try{let r=n();return us(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function AT(t,e){return Array.isArray(e)?e.reduce(AT,t):W(W({},t),e)}var ls=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(AC),this.afterRenderEffectManager=G(Tv),this.zonelessEnabled=G(fT),this.externalTestViews=new Set,this.beforeRender=new nt,this.afterTick=new nt,this.componentTypes=[],this.components=[],this.isStable=G(Ba).hasPendingTasks.pipe(de(r=>!r)),this._injector=G(bn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof lf;if(!this._injector.get(ST).done){let E=!o&&ND(r),M=!1;throw new ce(405,M)}let a;o?a=r:a=this._injector.get(Ra).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=c2(a)?void 0:this._injector.get(Qi),l=i||a.selector,f=a.create(In.NULL,[],l,c),m=f.location.nativeElement,w=f.injector.get(Mv,null);return w?.registerApplication(m),f.onDestroy(()=>{this.detachView(f.hostView),Wh(this.components,f),w?.unregisterApplication(m)}),this._loadComponent(f),f}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new ce(101,!1);let i=Fe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,Fe(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(Na,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<u2;){let a=o===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)d2(c,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>$u(c))&&(s.execute(),!this.allViews.some(({_lView:c})=>$u(c))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Wh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Nv,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Wh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ce(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Wh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function d2(t,e,n,r){if(!n&&!$u(t))return;uT(t,e,n&&!r?0:1)}var Hy=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Lf=(()=>{let e=class e{compileModuleSync(r){return new gf(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=PD(r),s=FC(o.declarations).reduce((a,c)=>{let l=Gi(c);return l&&a.push(new Pa(l)),a},[]);return new Hy(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),h2=new ee("");function f2(t,e,n){let r=new gf(n);return Promise.resolve(r)}function hD(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var p2=(()=>{let e=class e{constructor(){this.zone=G(Ne),this.changeDetectionScheduler=G(Ma),this.applicationRef=G(ls)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function g2({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Ne(xT()),[{provide:Ne,useFactory:t},{provide:Da,multi:!0,useFactory:()=>{let n=G(p2,{optional:!0});return()=>n.initialize()}},{provide:Da,multi:!0,useFactory:()=>{let n=G(y2);return()=>{n.initialize()}}},{provide:AC,useFactory:m2},e===!0?{provide:pT,useValue:!0}:[]]}function m2(){let t=G(Ne),e=G(Cr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function xT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var y2=(()=>{let e=class e{constructor(){this.subscription=new ct,this.initialized=!1,this.zone=G(Ne),this.pendingTasks=G(Ba)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var v2=(()=>{let e=class e{constructor(){this.appRef=G(ls),this.taskService=G(Ba),this.ngZone=G(Ne),this.zonelessEnabled=G(fT),this.disableScheduling=G(pT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ct,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof df||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?tD:gT;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ne.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(i),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function w2(){return typeof $localize<"u"&&$localize.locale||yf}var Pv=new ee("",{providedIn:"root",factory:()=>G(Pv,Ie.Optional|Ie.SkipSelf)||w2()});var MT=new ee(""),RT=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=LF(i?.ngZone,xT({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=i?.ignoreChangesOutsideZone,a=vV(r.moduleType,this.injector,[...g2({ngZoneFactory:()=>o,ignoreChangesOutsideZone:s}),{provide:Ma,useExisting:v2}]),c=a.injector.get(Cr,null);return o.runOutsideAngular(()=>{let l=o.onError.subscribe({next:f=>{c.handleError(f)}});a.onDestroy(()=>{Wh(this._modules,a),l.unsubscribe()})}),l2(c,o,()=>{let l=a.injector.get(ST);return l.runInitializers(),l.donePromise.then(()=>{let f=a.injector.get(Pv,yf);return KV(f||yf),this._moduleDoBootstrap(a),a})})})}bootstrapModule(r,i=[]){let o=AT({},i);return f2(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(ls);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new ce(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(MT,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(z(In))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Vu=null,NT=new ee("");function _2(t){if(Vu&&!Vu.get(NT,!1))throw new ce(400,!1);a2(),Vu=t;let e=t.get(RT);return I2(t),e}function kv(t,e,n=[]){let r=`Platform: ${e}`,i=new ee(r);return(o=[])=>{let s=PT();if(!s||s.injector.get(NT,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):_2(E2(a,r))}return b2(i)}}function E2(t=[],e){return In.create({name:e,providers:[{provide:Ef,useValue:"platform"},{provide:MT,useValue:new Set([()=>Vu=null])},...t]})}function b2(t){let e=PT();if(!e)throw new ce(401,!1);return e}function PT(){return Vu?.get(RT)??null}function I2(t){t.get(dv,null)?.forEach(n=>n())}function Ov(){return!1}var ds=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=D2;let t=e;return t})();function D2(t){return C2(pn(),Je(),(t&16)===16)}function C2(t,e,n){if(If(t)&&!n){let r=Yi(t.index,e);return new ns(r,r)}else if(t.type&175){let r=e[Ir];return new ns(r,e)}return null}var zy=class{constructor(){}supports(e){return wT(e)}create(e){return new qy(e)}},T2=(t,e)=>e,qy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||T2}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<fD(r,i,o)?n:r,a=fD(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=c-i;if(l!=f){for(let w=0;w<l;w++){let E=w<o.length?o[w]:o[w]=0,M=E+w;f<=M&&M<l&&(o[w]=E+1)}let m=s.previousIndex;o[m]=f-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!wT(e))throw new ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,wV(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Gy(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new vf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Gy=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Wy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},vf=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Wy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function pD(){return new Fv([new zy])}var Fv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||pD()),deps:[[e,new Yy,new Fa]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new ce(901,!1)}};e.\u0275prov=ie({token:e,providedIn:"root",factory:pD});let t=e;return t})();var kT=kv(null,"core",[]),OT=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(z(ls))},e.\u0275mod=Nt({type:e}),e.\u0275inj=Rt({});let t=e;return t})();var FT=new ee("");function jf(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Bf(t,e){Ku("NgSignals");let n=t0(t);return e?.equal&&(n[Jr].equal=e.equal),n}function Ji(t){let e=Fe(null);try{return t()}finally{Fe(e)}}function VT(t){let e=Gi(t);if(!e)return null;let n=new Pa(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var HT=null;function Sr(){return HT}function zT(t){HT??=t}var Uf=class{};var an=new ee(""),Hv=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>G(x2),providedIn:"platform"});let t=e;return t})(),qT=new ee(""),x2=(()=>{let e=class e extends Hv{constructor(){super(),this._doc=G(an),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Sr().getBaseHref(this._doc)}onPopState(r){let i=Sr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Sr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function zv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function LT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function ui(t){return t&&t[0]!=="?"?"?"+t:t}var hs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>G(qv),providedIn:"root"});let t=e;return t})(),GT=new ee(""),qv=(()=>{let e=class e extends hs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??G(an).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return zv(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ui(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+ui(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+ui(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(Hv),z(GT,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),WT=(()=>{let e=class e extends hs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=zv(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+ui(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+ui(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(Hv),z(GT,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Ha=(()=>{let e=class e{constructor(r){this._subject=new Mt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=N2(LT(jT(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ui(i))}normalize(r){return e.stripTrailingSlash(R2(this._basePath,jT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ui(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ui(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=ui,e.joinWithSlash=zv,e.stripTrailingSlash=LT,e.\u0275fac=function(i){return new(i||e)(z(hs))},e.\u0275prov=ie({token:e,factory:()=>M2(),providedIn:"root"});let t=e;return t})();function M2(){return new Ha(z(hs))}function R2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jT(t){return t.replace(/\/index.html$/,"")}function N2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function KT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Lv=/\s+/,BT=[],za=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=BT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Lv):BT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Lv):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Lv).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(Ce(Tr),Ce(ai))},e.\u0275dir=Gt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var jv=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qa=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new jv(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),UT(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);UT(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Ce(Ua),Ce(Rf),Ce(Fv))},e.\u0275dir=Gt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function UT(t,e){t.context.$implicit=e.item}var QT=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Bv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){$T("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){$T("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Ce(Ua),Ce(Rf))},e.\u0275dir=Gt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Bv=class{constructor(){this.$implicit=null,this.ngIf=null}};function $T(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${nn(e)}'.`)}var YT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Nt({type:e}),e.\u0275inj=Rt({});let t=e;return t})(),Gv="browser",P2="server";function k2(t){return t===Gv}function fs(t){return t===P2}var ZT=(()=>{let e=class e{};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>k2(G(gn))?new Uv(G(an),window):new $v});let t=e;return t})(),Uv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=O2(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function O2(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var $v=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},$f=class{};var Qv=class extends Uf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Yv=class t extends Qv{static makeCurrent(){zT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=V2();return n==null?null:L2(n)}resetBaseElement(){Zu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return KT(document.cookie,e)}},Zu=null;function V2(){return Zu=Zu||document.querySelector("base"),Zu?Zu.getAttribute("href"):null}function L2(t){return new URL(t,document.baseURI).pathname}var Zv=class{addToWindow(e){Jn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ce(5103,!1);return o},Jn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Jn.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Jn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Jn.frameworkStabilizers||(Jn.frameworkStabilizers=[]),Jn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Sr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},j2=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),zf=new ee(""),tS=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new ce(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(z(zf),z(Ne))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Ju=class{constructor(e){this._doc=e}},Wv="ng-app-id",nS=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=fs(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Wv}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Wv),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Wv,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(z(an),z(Tf),z(hv,8),z(gn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Kv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Xv=/%COMP%/g,rS="%COMP%",B2=`_nghost-${rS}`,U2=`_ngcontent-${rS}`,$2=!0,H2=new ee("",{providedIn:"root",factory:()=>$2});function z2(t){return U2.replace(Xv,t)}function q2(t){return B2.replace(Xv,t)}function iS(t,e){return e.map(n=>n.replace(Xv,t))}var JT=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,f=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=fs(c),this.defaultRenderer=new Xu(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===br.ShadowDom&&(i=Se(W({},i),{encapsulation:br.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof qf?o.applyToHost(r):o instanceof el&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(i.encapsulation){case br.Emulated:s=new qf(l,f,i,this.appId,m,a,c,w);break;case br.ShadowDom:return new Jv(l,f,r,i,a,c,this.nonce,w);default:s=new el(l,f,i,m,a,c,w);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(z(tS),z(nS),z(Tf),z(H2),z(an),z(gn),z(Ne),z(hv))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Xu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Kv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(XT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(XT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ce(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Kv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Kv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ri.DashCase|ri.Important)?e.style.setProperty(n,r,i&ri.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ri.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Sr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function XT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Jv=class extends Xu{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=iS(i.id,i.styles);for(let f of l){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},el=class extends Xu{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?iS(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},qf=class extends el{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=z2(l),this.hostAttr=q2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},G2=(()=>{let e=class e extends Ju{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(z(an))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),W2=(()=>{let e=class e extends Ju{constructor(r){super(r),this.delegate=G(FT,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(z(an))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),eS=["alt","control","meta","shift"],K2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Q2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Y2=(()=>{let e=class e extends Ju{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Sr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),eS.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),a+=f+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=K2[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),eS.forEach(a=>{if(a!==o){let c=Q2[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(z(an))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})();function Z2(){Yv.makeCurrent()}function J2(){return new Cr}function X2(){return kC(document),document}var eL=[{provide:gn,useValue:Gv},{provide:dv,useValue:Z2,multi:!0},{provide:an,useFactory:X2,deps:[]}],oS=kv(kT,"browser",eL),tL=new ee(""),nL=[{provide:Yu,useClass:Zv,deps:[]},{provide:Mv,useClass:Of,deps:[Ne,Ff,Yu]},{provide:Of,useClass:Of,deps:[Ne,Ff,Yu]}],rL=[{provide:Ef,useValue:"root"},{provide:Cr,useFactory:J2,deps:[]},{provide:zf,useClass:G2,multi:!0,deps:[an,Ne,gn]},{provide:zf,useClass:Y2,multi:!0,deps:[an]},{provide:zf,useClass:W2,multi:!0},JT,nS,tS,{provide:Na,useExisting:JT},{provide:$f,useClass:j2,deps:[]},[]],sS=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Tf,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(z(tL,12))},e.\u0275mod=Nt({type:e}),e.\u0275inj=Rt({providers:[...rL,...nL],imports:[YT,OT]});let t=e;return t})();var aS=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(z(an))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _e="primary",gl=Symbol("RouteTitle"),iw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Za(t){return new iw(t)}function oL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function sL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ar(t[n],e[n]))return!1;return!0}function Ar(t,e){let n=t?ow(t):void 0,r=e?ow(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!wS(t[i],e[i]))return!1;return!0}function ow(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function wS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function _S(t){return t.length>0?t[t.length-1]:null}function eo(t){return Bm(t)?t:us(t)?Ve(Promise.resolve(t)):ue(t)}var aL={exact:bS,subset:IS},ES={exact:cL,subset:uL,ignored:()=>!0};function uS(t,e,n){return aL[n.paths](t.root,e.root,n.matrixParams)&&ES[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function cL(t,e){return Ar(t,e)}function bS(t,e,n){if(!gs(t.segments,e.segments)||!Kf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!bS(t.children[r],e.children[r],n))return!1;return!0}function uL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>wS(t[n],e[n]))}function IS(t,e,n){return DS(t,e,e.segments,n)}function DS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!gs(i,n)||e.hasChildren()||!Kf(i,n,r))}else if(t.segments.length===n.length){if(!gs(t.segments,n)||!Kf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!IS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!gs(t.segments,i)||!Kf(t.segments,i,r)||!t.children[_e]?!1:DS(t.children[_e],e,o,r)}}function Kf(t,e,n){return e.every((r,i)=>ES[n](t[i].parameters,r.parameters))}var di=class{constructor(e=new je([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Za(this.queryParams),this._queryParamMap}toString(){return hL.serialize(this)}},je=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qf(this)}},ps=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Za(this.parameters),this._parameterMap}toString(){return TS(this)}};function lL(t,e){return gs(t,e)&&t.every((n,r)=>Ar(n.parameters,e[r].parameters))}function gs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function dL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===_e&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==_e&&(n=n.concat(e(i,r)))}),n}var ml=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>new Ja,providedIn:"root"});let t=e;return t})(),Ja=class{parse(e){let n=new aw(e);return new di(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${tl(e.root,!0)}`,r=gL(e.queryParams),i=typeof e.fragment=="string"?`#${fL(e.fragment)}`:"";return`${n}${r}${i}`}},hL=new Ja;function Qf(t){return t.segments.map(e=>TS(e)).join("/")}function tl(t,e){if(!t.hasChildren())return Qf(t);if(e){let n=t.children[_e]?tl(t.children[_e],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==_e&&r.push(`${i}:${tl(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=dL(t,(r,i)=>i===_e?[tl(t.children[_e],!1)]:[`${i}:${tl(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[_e]!=null?`${Qf(t)}/${n[0]}`:`${Qf(t)}/(${n.join("//")})`}}function CS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gf(t){return CS(t).replace(/%3B/gi,";")}function fL(t){return encodeURI(t)}function sw(t){return CS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yf(t){return decodeURIComponent(t)}function lS(t){return Yf(t.replace(/\+/g,"%20"))}function TS(t){return`${sw(t.path)}${pL(t.parameters)}`}function pL(t){return Object.entries(t).map(([e,n])=>`;${sw(e)}=${sw(n)}`).join("")}function gL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Gf(n)}=${Gf(i)}`).join("&"):`${Gf(n)}=${Gf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var mL=/^[^\/()?;#]+/;function ew(t){let e=t.match(mL);return e?e[0]:""}var yL=/^[^\/()?;=#]+/;function vL(t){let e=t.match(yL);return e?e[0]:""}var wL=/^[^=?&#]+/;function _L(t){let e=t.match(wL);return e?e[0]:""}var EL=/^[^&#]+/;function bL(t){let e=t.match(EL);return e?e[0]:""}var aw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[_e]=new je(e,n)),r}parseSegment(){let e=ew(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new ps(Yf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=vL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ew(this.remaining);i&&(r=i,this.capture(r))}e[Yf(n)]=Yf(r)}parseQueryParam(e){let n=_L(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=bL(this.remaining);s&&(r=s,this.capture(r))}let i=lS(n),o=lS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ew(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ce(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=_e);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[_e]:new je([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}};function SS(t){return t.segments.length>0?new je([],{[_e]:t}):t}function AS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=AS(i);if(r===_e&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new je(t.segments,e);return IL(n)}function IL(t){if(t.numberOfChildren===1&&t.children[_e]){let e=t.children[_e];return new je(t.segments.concat(e.segments),e.children)}return t}function al(t){return t instanceof di}function DL(t,e,n=null,r=null){let i=xS(t);return MS(i,e,n,r)}function xS(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new je(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=SS(r);return e??i}function MS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return tw(i,i,i,n,r);let o=CL(e);if(o.toRoot())return tw(i,i,new je([],{}),n,r);let s=TL(o,i,t),a=s.processChildren?il(s.segmentGroup,s.index,o.commands):NS(s.segmentGroup,s.index,o.commands);return tw(i,s.segmentGroup,a,n,r)}function Zf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function cl(t){return typeof t=="object"&&t!=null&&t.outlets}function tw(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`});let s;t===e?s=n:s=RS(t,e,n);let a=SS(AS(s));return new di(a,o,i)}function RS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=RS(o,e,n)}),new je(t.segments,r)}var Jf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zf(r[0]))throw new ce(4003,!1);let i=r.find(cl);if(i&&i!==_S(r))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function CL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Jf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Jf(n,e,r)}var Ka=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function TL(t,e,n){if(t.isAbsolute)return new Ka(e,!0,0);if(!n)return new Ka(e,!1,NaN);if(n.parent===null)return new Ka(n,!0,0);let r=Zf(t.commands[0])?0:1,i=n.segments.length-1+r;return SL(n,i,t.numberOfDoubleDots)}function SL(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ce(4005,!1);i=r.segments.length}return new Ka(r,!1,i-o)}function AL(t){return cl(t[0])?t[0].outlets:{[_e]:t}}function NS(t,e,n){if(t??=new je([],{}),t.segments.length===0&&t.hasChildren())return il(t,e,n);let r=xL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new je(t.segments.slice(0,r.pathIndex),{});return o.children[_e]=new je(t.segments.slice(r.pathIndex),t.children),il(o,0,i)}else return r.match&&i.length===0?new je(t.segments,{}):r.match&&!t.hasChildren()?cw(t,e,n):r.match?il(t,0,i):cw(t,e,n)}function il(t,e,n){if(n.length===0)return new je(t.segments,{});{let r=AL(n),i={};if(Object.keys(r).some(o=>o!==_e)&&t.children[_e]&&t.numberOfChildren===1&&t.children[_e].segments.length===0){let o=il(t.children[_e],e,n);return new je(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=NS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new je(t.segments,i)}}function xL(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(cl(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!hS(c,l,s))return o;r+=2}else{if(!hS(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function cw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(cl(o)){let c=ML(o.outlets);return new je(r,c)}if(i===0&&Zf(n[0])){let c=t.segments[e];r.push(new ps(c.path,dS(n[0]))),i++;continue}let s=cl(o)?o.outlets[_e]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Zf(a)?(r.push(new ps(s,dS(a))),i+=2):(r.push(new ps(s,{})),i++)}return new je(r,{})}function ML(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=cw(new je([],{}),0,r))}),e}function dS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function hS(t,e,n){return t==n.path&&Ar(e,n.parameters)}var ol="imperative",Ft=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ft||{}),jn=class{constructor(e,n){this.id=e,this.url=n}},Xa=class extends jn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hi=class extends jn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Cn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Cn||{}),Xf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Xf||{}),li=class extends jn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xi=class extends jn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ft.NavigationSkipped}},ul=class extends jn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ep=class extends jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uw=class extends jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lw=class extends jn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dw=class extends jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hw=class extends jn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fw=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pw=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gw=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mw=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yw=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vw=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tp=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Ft.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ll=class{},ec=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function RL(t,e){return t.providers&&!t._injector&&(t._injector=Pf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ir(t){return t.outlet||_e}function NL(t,e){let n=t.filter(r=>ir(r)===e);return n.push(...t.filter(r=>ir(r)!==e)),n}function yl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ww=class{get injector(){return yl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new vl(this.rootInjector),this.attachRef=null}},vl=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new ww(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(z(bn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),np=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=_w(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=_w(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ew(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ew(e,this._root).map(n=>n.value)}};function _w(t,e){if(t===e.value)return e;for(let n of e.children){let r=_w(t,n);if(r)return r}return null}function Ew(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ew(t,n);if(r.length)return r.unshift(e),r}return[]}var Dn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Wa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var rp=class extends np{constructor(e,n){super(e),this.snapshot=n,Mw(this,e)}toString(){return this.snapshot.toString()}};function PS(t){let e=PL(t),n=new Ut([new ps("",{})]),r=new Ut({}),i=new Ut({}),o=new Ut({}),s=new Ut(""),a=new tc(n,r,o,s,i,_e,t,e.root);return a.snapshot=e.root,new rp(new Dn(a,[]),e)}function PL(t){let e={},n={},r={},i="",o=new Qa([],e,r,i,n,_e,t,null,{});return new op("",new Dn(o,[]))}var tc=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(de(l=>l[gl]))??ue(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>Za(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>Za(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ip(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:W(W({},e.params),t.params),data:W(W({},e.data),t.data),resolve:W(W(W(W({},t.data),e.data),i?.data),t._resolvedData)}:r={params:W({},t.params),data:W({},t.data),resolve:W(W({},t.data),t._resolvedData??{})},i&&OS(i)&&(r.resolve[gl]=i.title),r}var Qa=class{get title(){return this.data?.[gl]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Za(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Za(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},op=class extends np{constructor(e,n){super(n),this.url=e,Mw(this,n)}toString(){return kS(this._root)}};function Mw(t,e){e.value._routerState=t,e.children.forEach(n=>Mw(t,n))}function kS(t){let e=t.children.length>0?` { ${t.children.map(kS).join(", ")} } `:"";return`${t.value}${e}`}function nw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ar(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ar(e.params,n.params)||t.paramsSubject.next(n.params),sL(e.url,n.url)||t.urlSubject.next(n.url),Ar(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function bw(t,e){let n=Ar(t.params,e.params)&&lL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||bw(t.parent,e.parent))}function OS(t){return typeof t.title=="string"||t.title===null}var Rw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=_e,this.activateEvents=new Mt,this.deactivateEvents=new Mt,this.attachEvents=new Mt,this.detachEvents=new Mt,this.parentContexts=G(vl),this.location=G(Ua),this.changeDetector=G(ds),this.inputBinder=G(lp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Iw(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Gt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[La]});let t=e;return t})(),Iw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===tc?this.route:e===vl?this.childContexts:this.parent.get(e,n)}},lp=new ee(""),fS=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Pu([i.queryParams,i.params,i.data]).pipe(ut(([s,a,c],l)=>(c=W(W(W({},s),a),c),l===0?ue(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=VT(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})();function kL(t,e,n){let r=dl(t,e._root,n?n._root:void 0);return new rp(r,e)}function dl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=OL(t,e,n);return new Dn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>dl(t,a)),s}}let r=FL(e.value),i=e.children.map(o=>dl(t,o));return new Dn(r,i)}}function OL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return dl(t,r,i);return dl(t,r)})}function FL(t){return new tc(new Ut(t.url),new Ut(t.params),new Ut(t.queryParams),new Ut(t.fragment),new Ut(t.data),t.outlet,t.component,t)}var hl=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},FS="ngNavigationCancelingError";function sp(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=al(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VS(!1,Cn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function VS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[FS]=!0,n.cancellationCode=e,n}function VL(t){return LS(t)&&al(t.url)}function LS(t){return!!t&&t[FS]}var LL=(t,e,n,r)=>de(i=>(new Dw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Dw=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),nw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Wa(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Wa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Wa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Wa(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new vw(o.value.snapshot))}),e.children.length&&this.forwardEvent(new mw(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(nw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),nw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ap=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ya=class{constructor(e,n){this.component=e,this.route=n}};function jL(t,e,n){let r=t._root,i=e?e._root:null;return nl(r,i,n,[r.value])}function BL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function rc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!yD(t)?t:e.get(t):r}function nl(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Wa(e);return t.children.forEach(s=>{UL(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>sl(a,n.getContext(s),i)),i}function UL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=$L(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ap(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?nl(t,e,a?a.children:null,r,i):nl(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ya(a.outlet.component,s))}else s&&sl(e,a,i),i.canActivateChecks.push(new ap(r)),o.component?nl(t,null,a?a.children:null,r,i):nl(t,null,n,r,i);return i}function $L(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!gs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!gs(t.url,e.url)||!Ar(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bw(t,e)||!Ar(t.queryParams,e.queryParams);case"paramsChange":default:return!bw(t,e)}}function sl(t,e,n){let r=Wa(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?sl(s,e.children.getContext(o),n):sl(s,null,n):sl(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ya(e.outlet.component,i)):n.canDeactivateChecks.push(new Ya(null,i)):n.canDeactivateChecks.push(new Ya(null,i))}function wl(t){return typeof t=="function"}function HL(t){return typeof t=="boolean"}function zL(t){return t&&wl(t.canLoad)}function qL(t){return t&&wl(t.canActivate)}function GL(t){return t&&wl(t.canActivateChild)}function WL(t){return t&&wl(t.canDeactivate)}function KL(t){return t&&wl(t.canMatch)}function jS(t){return t instanceof ei||t?.name==="EmptyError"}var Wf=Symbol("INITIAL_VALUE");function nc(){return ut(t=>Pu(t.map(e=>e.pipe(ti(1),Ko(Wf)))).pipe(de(e=>{for(let n of e)if(n!==!0){if(n===Wf)return Wf;if(n===!1||QL(n))return n}return!0}),$t(e=>e!==Wf),ti(1)))}function QL(t){return al(t)||t instanceof hl}function YL(t,e){return Et(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ue(Se(W({},n),{guardsResult:!0})):ZL(s,r,i,t).pipe(Et(a=>a&&HL(a)?JL(r,o,t,e):ue(a)),de(a=>Se(W({},n),{guardsResult:a})))})}function ZL(t,e,n,r){return Ve(t).pipe(Et(i=>rj(i.component,i.route,n,e,r)),Nn(i=>i!==!0,!0))}function JL(t,e,n,r){return Ve(e).pipe(Go(i=>ga(ej(i.route.parent,r),XL(i.route,r),nj(t,i.path,n),tj(t,i.route,n))),Nn(i=>i!==!0,!0))}function XL(t,e){return t!==null&&e&&e(new yw(t)),ue(!0)}function ej(t,e){return t!==null&&e&&e(new gw(t)),ue(!0)}function tj(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ue(!0);let i=r.map(o=>Oh(()=>{let s=yl(e)??n,a=rc(o,s),c=qL(a)?a.canActivate(e,t):er(s,()=>a(e,t));return eo(c).pipe(Nn())}));return ue(i).pipe(nc())}function nj(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>BL(s)).filter(s=>s!==null).map(s=>Oh(()=>{let a=s.guards.map(c=>{let l=yl(s.node)??n,f=rc(c,l),m=GL(f)?f.canActivateChild(r,t):er(l,()=>f(r,t));return eo(m).pipe(Nn())});return ue(a).pipe(nc())}));return ue(o).pipe(nc())}function rj(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ue(!0);let s=o.map(a=>{let c=yl(e)??i,l=rc(a,c),f=WL(l)?l.canDeactivate(t,e,n,r):er(c,()=>l(t,e,n,r));return eo(f).pipe(Nn())});return ue(s).pipe(nc())}function ij(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ue(!0);let o=i.map(s=>{let a=rc(s,t),c=zL(a)?a.canLoad(e,n):er(t,()=>a(e,n));return eo(c)});return ue(o).pipe(nc(),BS(r))}function BS(t){return km(xt(e=>{if(typeof e!="boolean")throw sp(t,e)}),de(e=>e===!0))}function oj(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ue(!0);let o=i.map(s=>{let a=rc(s,t),c=KL(a)?a.canMatch(e,n):er(t,()=>a(e,n));return eo(c)});return ue(o).pipe(nc(),BS(r))}var fl=class{constructor(e){this.segmentGroup=e||null}},pl=class extends Error{constructor(e){super(),this.urlTree=e}};function Ga(t){return pa(new fl(t))}function sj(t){return pa(new ce(4e3,!1))}function aj(t){return pa(VS(!1,Cn.GuardRejected))}var Cw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ue(r);if(i.numberOfChildren>1||!i.children[_e])return sj(`${e.redirectTo}`);i=i.children[_e]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:f,url:m,outlet:w,params:E,data:M,title:P}=i,N=er(o,()=>a({params:E,data:M,queryParams:c,fragment:l,routeConfig:f,url:m,outlet:w,title:P}));if(N instanceof di)throw new pl(N);n=N}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new pl(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new di(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new je(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new ce(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Tw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cj(t,e,n,r,i){let o=Nw(t,e,n);return o.matched?(r=RL(e,r),oj(r,e,n,i).pipe(de(s=>s===!0?o:W({},Tw)))):ue(o)}function Nw(t,e,n){if(e.path==="**")return uj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?W({},Tw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||oL)(n,t,e);if(!i)return W({},Tw);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?W(W({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function uj(t){return{matched:!0,parameters:t.length>0?_S(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function pS(t,e,n,r){return n.length>0&&hj(t,n,r)?{segmentGroup:new je(e,dj(r,new je(n,t.children))),slicedSegments:[]}:n.length===0&&fj(t,n,r)?{segmentGroup:new je(t.segments,lj(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new je(t.segments,t.children),slicedSegments:n}}function lj(t,e,n,r){let i={};for(let o of n)if(dp(t,e,o)&&!r[ir(o)]){let s=new je([],{});i[ir(o)]=s}return W(W({},r),i)}function dj(t,e){let n={};n[_e]=e;for(let r of t)if(r.path===""&&ir(r)!==_e){let i=new je([],{});n[ir(r)]=i}return n}function hj(t,e,n){return n.some(r=>dp(t,e,r)&&ir(r)!==_e)}function fj(t,e,n){return n.some(r=>dp(t,e,r))}function dp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pj(t,e,n,r){return ir(t)!==r&&(r===_e||!dp(e,n,t))?!1:Nw(e,t,n).matched}function gj(t,e,n){return e.length===0&&!t.children[n]}var Sw=class{};function mj(t,e,n,r,i,o,s="emptyOnly"){return new Aw(t,e,n,r,i,s,o).recognize()}var yj=31,Aw=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Cw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=pS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(de(({children:n,rootSnapshot:r})=>{let i=new Dn(r,n),o=new op("",i),s=DL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Qa([],Object.freeze({}),Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,_e,n).pipe(de(r=>({children:r,rootSnapshot:n})),Bi(r=>{if(r instanceof pl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof fl?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(de(s=>s instanceof Dn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ve(o).pipe(Go(s=>{let a=r.children[s],c=NL(n,s);return this.processSegmentGroup(e,c,a,s,i)}),Wo((s,a)=>(s.push(...a),s)),Ui(null),qm(),Et(s=>{if(s===null)return Ga(r);let a=US(s);return vj(a),ue(a)}))}processSegment(e,n,r,i,o,s,a){return Ve(n).pipe(Go(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(Bi(l=>{if(l instanceof fl)return ue(null);throw l}))),Nn(c=>!!c),Bi(c=>{if(jS(c))return gj(r,i,o)?ue(new Sw):Ga(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return pj(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Ga(i):Ga(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:f,positionalParamSegments:m,remainingSegments:w}=Nw(n,i,o);if(!c)return Ga(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yj&&(this.allowRedirects=!1));let E=new Qa(o,l,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,gS(i),ir(i),i.component??i._loadedComponent??null,i,mS(i)),M=ip(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(M.params),E.data=Object.freeze(M.data);let P=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,m,E,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(Et(N=>this.processSegment(e,r,n,N.concat(w),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=cj(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(ut(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ut(({routes:l})=>{let f=r._loadedInjector??e,{parameters:m,consumedSegments:w,remainingSegments:E}=c,M=new Qa(w,m,Object.freeze(W({},this.urlTree.queryParams)),this.urlTree.fragment,gS(r),ir(r),r.component??r._loadedComponent??null,r,mS(r)),P=ip(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(P.params),M.data=Object.freeze(P.data);let{segmentGroup:N,slicedSegments:H}=pS(n,w,E,l);if(H.length===0&&N.hasChildren())return this.processChildren(f,l,N,M).pipe(de($=>new Dn(M,$)));if(l.length===0&&H.length===0)return ue(new Dn(M,[]));let X=ir(r)===o;return this.processSegment(f,l,N,H,X?_e:o,!0,M).pipe(de($=>new Dn(M,$ instanceof Dn?[$]:[])))}))):Ga(n)))}getChildConfig(e,n,r){return n.children?ue({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ue({routes:n._loadedRoutes,injector:n._loadedInjector}):ij(e,n,r,this.urlSerializer).pipe(Et(i=>i?this.configLoader.loadChildren(e,n).pipe(xt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):aj(n))):ue({routes:[],injector:e})}};function vj(t){t.sort((e,n)=>e.value.outlet===_e?-1:n.value.outlet===_e?1:e.value.outlet.localeCompare(n.value.outlet))}function wj(t){let e=t.value.routeConfig;return e&&e.path===""}function US(t){let e=[],n=new Set;for(let r of t){if(!wj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=US(r.children);e.push(new Dn(r.value,i))}return e.filter(r=>!n.has(r))}function gS(t){return t.data||{}}function mS(t){return t.resolve||{}}function _j(t,e,n,r,i,o){return Et(s=>mj(t,e,n,r,s.extractedUrl,i,o).pipe(de(({state:a,tree:c})=>Se(W({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Ej(t,e){return Et(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ue(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of $S(c))s.add(l);let a=0;return Ve(s).pipe(Go(c=>o.has(c)?bj(c,r,t,e):(c.data=ip(c,c.parent,t).resolve,ue(void 0))),xt(()=>a++),ma(1),Et(c=>a===s.size?ue(n):en))})}function $S(t){let e=t.children.map(n=>$S(n)).flat();return[t,...e]}function bj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!OS(i)&&(o[gl]=i.title),Ij(o,t,e,r).pipe(de(s=>(t._resolvedData=s,t.data=ip(t,t.parent,n).resolve,null)))}function Ij(t,e,n,r){let i=ow(t);if(i.length===0)return ue({});let o={};return Ve(i).pipe(Et(s=>Dj(t[s],e,n,r).pipe(Nn(),xt(a=>{if(a instanceof hl)throw sp(new Ja,a);o[s]=a}))),ma(1),Hm(o),Bi(s=>jS(s)?en:pa(s)))}function Dj(t,e,n,r){let i=yl(e)??r,o=rc(t,i),s=o.resolve?o.resolve(e,n):er(i,()=>o(e,n));return eo(s)}function rw(t){return ut(e=>{let n=t(e);return n?Ve(n).pipe(de(()=>e)):ue(e)})}var HS=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===_e);return i}getResolvedTitleForRoute(r){return r.data[gl]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>G(Cj),providedIn:"root"});let t=e;return t})(),Cj=(()=>{let e=class e extends HS{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(z(aS))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_l=new ee("",{providedIn:"root",factory:()=>({})}),Tj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Vn({type:e,selectors:[["ng-component"]],standalone:!0,features:[DT],decls:1,vars:0,template:function(i,o){i&1&&yn(0,"router-outlet")},dependencies:[Rw],encapsulation:2});let t=e;return t})();function Pw(t){let e=t.children&&t.children.map(Pw),n=e?Se(W({},t),{children:e}):W({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==_e&&(n.component=Tj),n}var cp=new ee(""),kw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(Lf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ue(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=eo(r.loadComponent()).pipe(de(zS),xt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ku(()=>{this.componentLoaders.delete(r)})),o=new la(i,()=>new nt).pipe(ua());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ue({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Sj(i,this.compiler,r,this.onLoadEndListener).pipe(ku(()=>{this.childrenLoaders.delete(i)})),a=new la(s,()=>new nt).pipe(ua());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Sj(t,e,n,r){return eo(t.loadChildren()).pipe(de(zS),Et(i=>i instanceof Hu||Array.isArray(i)?ue(i):Ve(e.compileModuleAsync(i))),de(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(cp,[],{optional:!0,self:!0}).flat()),{routes:s.map(Pw),injector:o}}))}function Aj(t){return t&&typeof t=="object"&&"default"in t}function zS(t){return Aj(t)?t.default:t}var Ow=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>G(xj),providedIn:"root"});let t=e;return t})(),xj=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qS=new ee(""),GS=new ee("");function Mj(t,e,n){let r=t.get(GS),i=t.get(an);return t.get(Ne).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),Rj(t))),{onViewTransitionCreated:c}=r;return c&&er(t,()=>c({transition:a,from:e,to:n})),s})}function Rj(t){return new Promise(e=>{Cv({read:()=>setTimeout(e)},{injector:t})})}var Nj=new ee(""),Fw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nt,this.transitionAbortSubject=new nt,this.configLoader=G(kw),this.environmentInjector=G(bn),this.urlSerializer=G(ml),this.rootContexts=G(vl),this.location=G(Ha),this.inputBindingEnabled=G(lp,{optional:!0})!==null,this.titleStrategy=G(HS),this.options=G(_l,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(Ow),this.createViewTransition=G(qS,{optional:!0}),this.navigationErrorHandler=G(Nj,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null;let r=o=>this.events.next(new fw(o)),i=o=>this.events.next(new pw(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Se(W(W({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ut({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ol,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($t(s=>s.id!==0),de(s=>Se(W({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ut(s=>{let a=!1,c=!1;return ue(s).pipe(ut(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Cn.SupersededByNewNavigation),en;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Se(W({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!f&&m!=="reload"){let w="";return this.events.next(new Xi(l.id,this.urlSerializer.serialize(l.rawUrl),w,Xf.IgnoredSameUrlNavigation)),l.resolve(!1),en}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ue(l).pipe(ut(w=>{let E=this.transitions?.getValue();return this.events.next(new Xa(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?en:Promise.resolve(w)}),_j(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),xt(w=>{s.targetSnapshot=w.targetSnapshot,s.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=Se(W({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let E=new ep(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:w,extractedUrl:E,source:M,restoredState:P,extras:N}=l,H=new Xa(w,this.urlSerializer.serialize(E),M,P);this.events.next(H);let X=PS(this.rootComponentType).snapshot;return this.currentTransition=s=Se(W({},l),{targetSnapshot:X,urlAfterRedirects:E,extras:Se(W({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,ue(s)}else{let w="";return this.events.next(new Xi(l.id,this.urlSerializer.serialize(l.extractedUrl),w,Xf.IgnoredByUrlHandlingStrategy)),l.resolve(!1),en}}),xt(l=>{let f=new uw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),de(l=>(this.currentTransition=s=Se(W({},l),{guards:jL(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),YL(this.environmentInjector,l=>this.events.next(l)),xt(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw sp(this.urlSerializer,l.guardsResult);let f=new lw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),$t(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Cn.GuardRejected),!1)),rw(l=>{if(l.guards.canActivateChecks.length)return ue(l).pipe(xt(f=>{let m=new dw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),ut(f=>{let m=!1;return ue(f).pipe(Ej(this.paramsInheritanceStrategy,this.environmentInjector),xt({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(f,"",Cn.NoDataFromResolver)}}))}),xt(f=>{let m=new hw(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),rw(l=>{let f=m=>{let w=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(m.routeConfig).pipe(xt(E=>{m.component=E}),de(()=>{})));for(let E of m.children)w.push(...f(E));return w};return Pu(f(l.targetSnapshot.root)).pipe(Ui(null),ti(1))}),rw(()=>this.afterPreactivation()),ut(()=>{let{currentSnapshot:l,targetSnapshot:f}=s,m=this.createViewTransition?.(this.environmentInjector,l.root,f.root);return m?Ve(m).pipe(de(()=>s)):ue(s)}),de(l=>{let f=kL(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Se(W({},l),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,s}),xt(()=>{this.events.next(new ll)}),LL(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ti(1),xt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Wm(this.transitionAbortSubject.pipe(xt(l=>{throw l}))),ku(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Cn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bi(l=>{if(c=!0,LS(l))this.events.next(new li(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),VL(l)?this.events.next(new ec(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let f=new ul(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let m=er(this.environmentInjector,()=>this.navigationErrorHandler?.(f));if(m instanceof hl){let{message:w,cancellationCode:E}=sp(this.urlSerializer,m);this.events.next(new li(s.id,this.urlSerializer.serialize(s.extractedUrl),w,E)),this.events.next(new ec(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(f);let w=r.errorHandler(l);s.resolve(!!w)}}catch(m){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(m)}}return en}))}))}cancelNavigationTransition(r,i,o){let s=new li(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Pj(t){return t!==ol}var kj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>G(Oj),providedIn:"root"});let t=e;return t})(),xw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Oj=(()=>{let e=class e extends xw{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),WS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:()=>G(Fj),providedIn:"root"});let t=e;return t})(),Fj=(()=>{let e=class e extends WS{constructor(){super(...arguments),this.location=G(Ha),this.urlSerializer=G(ml),this.options=G(_l,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(Ow),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new di,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=PS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Xa)this.stateMemento=this.createStateMemento();else if(r instanceof Xi)this.rawUrlTree=i.initialUrl;else if(r instanceof ep){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof ll?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof li&&(r.code===Cn.GuardRejected||r.code===Cn.NoDataFromResolver)?this.restoreHistory(i):r instanceof ul?this.restoreHistory(i,!0):r instanceof hi&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof di?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=W(W({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=W(W({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rl=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(rl||{});function KS(t,e){t.events.pipe($t(n=>n instanceof hi||n instanceof li||n instanceof ul||n instanceof Xi),de(n=>n instanceof hi||n instanceof Xi?rl.COMPLETE:(n instanceof li?n.code===Cn.Redirect||n.code===Cn.SupersededByNewNavigation:!1)?rl.REDIRECTING:rl.FAILED),$t(n=>n!==rl.REDIRECTING),ti(1)).subscribe(()=>{e()})}function Vj(t){throw t}var Lj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fi=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(kf),this.stateManager=G(WS),this.options=G(_l,{optional:!0})||{},this.pendingTasks=G(Ba),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(Fw),this.urlSerializer=G(ml),this.location=G(Ha),this.urlHandlingStrategy=G(Ow),this._events=new nt,this.errorHandler=this.options.errorHandler||Vj,this.navigated=!1,this.routeReuseStrategy=G(kj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(cp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(lp,{optional:!0}),this.eventsSubscription=new ct,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof li&&i.code!==Cn.Redirect&&i.code!==Cn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof hi)this.navigated=!0;else if(i instanceof ec){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=W({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Pj(o.source)},a);this.scheduleNavigation(c,ol,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Uj(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ol,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=W({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Pw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,f=l?this.currentUrlTree.fragment:a,m=null;switch(c){case"merge":m=W(W({},this.currentUrlTree.queryParams),s);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}m!==null&&(m=this.removeEmptyProps(m));let w;try{let E=o?o.snapshot:this.routerState.snapshot.root;w=xS(E)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),w=this.currentUrlTree.root}return MS(w,r,m,f??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=al(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ol,null,i)}navigate(r,i={skipLocationChange:!1}){return Bj(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=W({},Lj):i===!1?o=W({},jj):o=i,al(r))return uS(this.currentUrlTree,r,o);let s=this.parseUrl(r);return uS(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,f;a?(c=a.resolve,l=a.reject,f=a.promise):f=new Promise((w,E)=>{c=w,l=E});let m=this.pendingTasks.add();return KS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(w=>Promise.reject(w))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Bj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ce(4008,!1)}function Uj(t){return!(t instanceof ll)&&!(t instanceof ec)}var up=class{};var $j=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe($t(r=>r instanceof hi),Go(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Pf(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Ve(o).pipe(ji())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=ue(null);let s=o.pipe(Et(a=>a===null?ue(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Ve([s,a]).pipe(ji())}else return s})}};e.\u0275fac=function(i){return new(i||e)(z(fi),z(Lf),z(bn),z(up),z(kw))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),QS=new ee(""),Hj=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Xa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof hi?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Xi&&r.code===Xf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof tp&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new tp(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){GC()},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})();function zj(t){return t.routerState.root}function El(t,e){return{\u0275kind:t,\u0275providers:e}}function qj(){let t=G(In);return e=>{let n=t.get(ls);if(e!==n.components[0])return;let r=t.get(fi),i=t.get(YS);t.get(Vw)===1&&r.initialNavigation(),t.get(ZS,null,Ie.Optional)?.setUpPreloading(),t.get(QS,null,Ie.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YS=new ee("",{factory:()=>new nt}),Vw=new ee("",{providedIn:"root",factory:()=>1});function Gj(){return El(2,[{provide:Vw,useValue:0},{provide:Vf,multi:!0,deps:[In],useFactory:e=>{let n=e.get(qT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(fi),o=e.get(YS);KS(i,()=>{r(!0)}),e.get(Fw).afterPreactivation=()=>(r(!0),o.closed?ue(void 0):o),i.initialNavigation()}))}}])}function Wj(){return El(3,[{provide:Vf,multi:!0,useFactory:()=>{let e=G(fi);return()=>{e.setUpLocationChangeListener()}}},{provide:Vw,useValue:2}])}var ZS=new ee("");function Kj(t){return El(0,[{provide:ZS,useExisting:$j},{provide:up,useExisting:t}])}function Qj(){return El(8,[fS,{provide:lp,useExisting:fS}])}function Yj(t){let e=[{provide:qS,useValue:Mj},{provide:GS,useValue:W({skipNextTransition:!!t?.skipInitialTransition},t)}];return El(9,e)}var yS=new ee("ROUTER_FORROOT_GUARD"),Zj=[Ha,{provide:ml,useClass:Ja},fi,vl,{provide:tc,useFactory:zj,deps:[fi]},kw,[]],Lw=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Zj,[],{provide:cp,multi:!0,useValue:r},{provide:yS,useFactory:tB,deps:[[fi,new Fa,new Yy]]},{provide:_l,useValue:i||{}},i?.useHash?Xj():eB(),Jj(),i?.preloadingStrategy?Kj(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?nB(i):[],i?.bindToComponentInputs?Qj().\u0275providers:[],i?.enableViewTransitions?Yj().\u0275providers:[],rB()]}}static forChild(r){return{ngModule:e,providers:[{provide:cp,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(z(yS,8))},e.\u0275mod=Nt({type:e}),e.\u0275inj=Rt({});let t=e;return t})();function Jj(){return{provide:QS,useFactory:()=>{let t=G(ZT),e=G(Ne),n=G(_l),r=G(Fw),i=G(ml);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Hj(i,r,t,e,n)}}}function Xj(){return{provide:hs,useClass:WT}}function eB(){return{provide:hs,useClass:qv}}function tB(t){return"guarded"}function nB(t){return[t.initialNavigation==="disabled"?Wj().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Gj().\u0275providers:[]]}var vS=new ee("");function rB(){return[{provide:vS,useFactory:qj},{provide:Nv,multi:!0,useExisting:vS}]}var iB="firebase",oB="10.12.4";Li(iB,oB,"app");var ic=new ii("ANGULARFIRE2_VERSION");var sB=(t,e)=>{let n=e?[e]:GI(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ms=class{constructor(){return sB(aB)}},aB="app-check";function jw(){}var hp=class{zone;delegate;constructor(e,n=Lm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Bw=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jw,{},jw,jw)),n.pipe(xt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},fp=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new hp(Zone.current)),this.insideAngular=n.run(()=>new hp(Zone.current,Nu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(z(Ne))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cB(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function vn(t){return uB(cB())(t)}function uB(t){return function(n){return n=n.lift(new Bw(t.ngZone)),n.pipe(Qn(t.outsideAngular),Rn(t.insideAngular))}}function pp(t){return Object.isFrozen(t)&&Object.isFrozen(t.raw)}function gp(t){return t.toString().indexOf("`")===-1}var H8=gp(t=>t``)||gp(t=>t`\0`)||gp(t=>t`\n`)||gp(t=>t`\u0000`),z8=pp``&&pp`\0`&&pp`\n`&&pp`\u0000`;var oW=typeof window<"u"?window.TrustedHTML:void 0;var gW=typeof window<"u"?window.TrustedScriptURL:void 0;var _W=typeof window<"u"?window.TrustedScript:void 0;function pi(t){return{valueOf:t}.valueOf()}var sc=class{constructor(e,n,r,i,o){this.allowedElements=e,this.elementPolicies=n,this.allowedGlobalAttributes=r,this.globalAttributePolicies=i,this.globallyAllowedAttributePrefixes=o}isAllowedElement(e){return e!=="FORM"&&(this.allowedElements.has(e)||this.elementPolicies.has(e))}getAttributePolicy(e,n){let r=this.elementPolicies.get(n);if(r?.has(e))return r.get(e);if(this.allowedGlobalAttributes.has(e))return{policyAction:rt.KEEP};let i=this.globalAttributePolicies.get(e);return i||(this.globallyAllowedAttributePrefixes&&[...this.globallyAllowedAttributePrefixes].some(o=>e.indexOf(o)===0)?{policyAction:rt.KEEP}:{policyAction:rt.DROP})}},rt=function(t){return t[t.DROP=0]="DROP",t[t.KEEP=1]="KEEP",t[t.KEEP_AND_SANITIZE_URL=2]="KEEP_AND_SANITIZE_URL",t[t.KEEP_AND_NORMALIZE=3]="KEEP_AND_NORMALIZE",t[t.KEEP_AND_SANITIZE_STYLE=4]="KEEP_AND_SANITIZE_STYLE",t[t.KEEP_AND_USE_RESOURCE_URL_POLICY=5]="KEEP_AND_USE_RESOURCE_URL_POLICY",t[t.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET=6]="KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET",t}(rt||{});var nA=["ARTICLE","SECTION","NAV","ASIDE","H1","H2","H3","H4","H5","H6","HEADER","FOOTER","ADDRESS","P","HR","PRE","BLOCKQUOTE","OL","UL","LH","LI","DL","DT","DD","FIGURE","FIGCAPTION","MAIN","DIV","EM","STRONG","SMALL","S","CITE","Q","DFN","ABBR","RUBY","RB","RT","RTC","RP","DATA","TIME","CODE","VAR","SAMP","KBD","SUB","SUP","I","B","U","MARK","BDI","BDO","SPAN","BR","WBR","INS","DEL","PICTURE","PARAM","TRACK","MAP","TABLE","CAPTION","COLGROUP","COL","TBODY","THEAD","TFOOT","TR","TD","TH","SELECT","DATALIST","OPTGROUP","OPTION","OUTPUT","PROGRESS","METER","FIELDSET","LEGEND","DETAILS","SUMMARY","MENU","DIALOG","SLOT","CANVAS","FONT","CENTER","ACRONYM","BASEFONT","BIG","DIR","HGROUP","STRIKE","TT"],rA=[["A",new Map([["href",{policyAction:rt.KEEP_AND_SANITIZE_URL}]])],["AREA",new Map([["href",{policyAction:rt.KEEP_AND_SANITIZE_URL}]])],["LINK",new Map([["href",{policyAction:rt.KEEP_AND_USE_RESOURCE_URL_POLICY,conditions:new Map([["rel",new Set(["alternate","author","bookmark","canonical","cite","help","icon","license","next","prefetch","dns-prefetch","prerender","preconnect","preload","prev","search","subresource"])]])}]])],["SOURCE",new Map([["src",{policyAction:rt.KEEP_AND_USE_RESOURCE_URL_POLICY}],["srcset",{policyAction:rt.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET}]])],["IMG",new Map([["src",{policyAction:rt.KEEP_AND_USE_RESOURCE_URL_POLICY}],["srcset",{policyAction:rt.KEEP_AND_USE_RESOURCE_URL_POLICY_FOR_SRCSET}]])],["VIDEO",new Map([["src",{policyAction:rt.KEEP_AND_USE_RESOURCE_URL_POLICY}]])],["AUDIO",new Map([["src",{policyAction:rt.KEEP_AND_USE_RESOURCE_URL_POLICY}]])]],iA=["title","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-current","aria-disabled","aria-dropeffect","aria-expanded","aria-haspopup","aria-hidden","aria-invalid","aria-label","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","alt","align","autocapitalize","autocomplete","autocorrect","autofocus","autoplay","bgcolor","border","cellpadding","cellspacing","checked","color","cols","colspan","controls","datetime","disabled","download","draggable","enctype","face","formenctype","frameborder","height","hreflang","hidden","ismap","label","lang","loop","max","maxlength","media","minlength","min","multiple","muted","nonce","open","placeholder","preload","rel","required","reversed","role","rows","rowspan","selected","shape","size","sizes","slot","span","spellcheck","start","step","summary","translate","type","valign","value","width","wrap","itemscope","itemtype","itemid","itemprop","itemref"],oA=[["dir",{policyAction:rt.KEEP_AND_NORMALIZE,conditions:pi(()=>new Map([["dir",new Set(["auto","ltr","rtl"])]]))}],["async",{policyAction:rt.KEEP_AND_NORMALIZE,conditions:pi(()=>new Map([["async",new Set(["async"])]]))}],["cite",{policyAction:rt.KEEP_AND_SANITIZE_URL}],["loading",{policyAction:rt.KEEP_AND_NORMALIZE,conditions:pi(()=>new Map([["loading",new Set(["eager","lazy"])]]))}],["poster",{policyAction:rt.KEEP_AND_SANITIZE_URL}],["target",{policyAction:rt.KEEP_AND_NORMALIZE,conditions:pi(()=>new Map([["target",new Set(["_self","_blank"])]]))}]],sA=new sc(new Set(nA),new Map(rA),new Set(iA),new Map(oA)),BW=new sc(new Set(pi(()=>nA.concat(["STYLE"]))),new Map(rA),new Set(pi(()=>iA.concat(["id","name","class"]))),new Map(pi(()=>oA.concat([["style",{policyAction:rt.KEEP_AND_SANITIZE_STYLE}]]))));var UB=new Map,$B={activated:!1,tokenObservers:[]},HB={initialized:!1,enabled:!1};function sr(t){return UB.get(t)||Object.assign({},$B)}function fA(){return HB}var zB="https://content-firebaseappcheck.googleapis.com/v1";var qB="exchangeDebugToken",uA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},CQ=24*60*60*1e3;var $w=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return k(this,null,function*(){this.stop();try{this.pending=new wm,this.pending.promise.catch(n=>{}),yield GB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new wm,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function GB(t){return new Promise(e=>{setTimeout(e,t)})}var WB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},to=new zI("appCheck","AppCheck",WB);function pA(t){if(!sr(t).activated)throw to.create("use-before-activation",{appName:t.name})}function gA(r,i){return k(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let E=yield s.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(E){throw to.create("fetch-network-error",{originalErrorMessage:E?.message})}if(c.status!==200)throw to.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(E){throw to.create("fetch-parse-error",{originalErrorMessage:E?.message})}let f=l.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw to.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let m=Number(f[1])*1e3,w=Date.now();return{token:l.token,expireTimeMillis:w+m,issuedAtTimeMillis:w}})}function mA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${zB}/projects/${n}/apps/${r}:${qB}?key=${i}`,body:{debug_token:e}}}var KB="firebase-app-check-database",QB=1,Hw="firebase-app-check-store";var vp=null;function YB(){return vp||(vp=new Promise((t,e)=>{try{let n=indexedDB.open(KB,QB);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(to.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Hw,{keyPath:"compositeKey"})}}}catch(n){e(to.create("storage-open",{originalErrorMessage:n?.message}))}}),vp)}function ZB(t,e){return JB(XB(t),e)}function JB(t,e){return k(this,null,function*(){let r=(yield YB()).transaction(Hw,"readwrite"),o=r.objectStore(Hw).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(to.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function XB(t){return`${t.options.appId}-${t.name}`}var zw=new oh("@firebase/app-check");function Uw(t,e){return ih()?ZB(t,e).catch(n=>{zw.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function yA(){return fA().enabled}function vA(){return k(this,null,function*(){let t=fA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var eU={error:"UNKNOWN_ERROR"};function tU(t){return UI.encodeString(JSON.stringify(t),!1)}function qw(t,e=!1){return k(this,null,function*(){let n=t.app;pA(n);let r=sr(n),i=r.token,o;if(i&&!Il(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Il(c)?i=c:yield Uw(n,void 0))}if(!e&&i&&Il(i))return{token:i.token};let s=!1;if(yA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gA(mA(n,yield vA()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Uw(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield sr(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?zw.warn(c.message):zw.error(c),o=c}let a;return i?o?Il(i)?a={token:i.token,internalError:o}:a=dA(o):(a={token:i.token},r.token=i,yield Uw(n,i)):a=dA(o),s&&oU(n,a),a})}function nU(t){return k(this,null,function*(){let e=t.app;pA(e);let{provider:n}=sr(e);if(yA()){let r=yield vA(),{token:i}=yield gA(mA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function rU(t,e,n,r){let{app:i}=t,o=sr(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Il(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),lA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>lA(t))}function wA(t,e){let n=sr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function lA(t){let{app:e}=t,n=sr(e),r=n.tokenRefresher;r||(r=iU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function iU(t){let{app:e}=t;return new $w(()=>k(this,null,function*(){let n=sr(e),r;if(n.token?r=yield qw(t,!0):r=yield qw(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=sr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},uA.RETRIAL_MIN_WAIT,uA.RETRIAL_MAX_WAIT)}function oU(t,e){let n=sr(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Il(t){return t.expireTimeMillis-Date.now()>0}function dA(t){return{token:tU(eU),error:t}}var Gw=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=sr(this.app);for(let n of e)wA(this.app,n.next);return Promise.resolve()}};function sU(t,e){return new Gw(t,e)}function aU(t){return{getToken:e=>qw(t,e),getLimitedUseToken:()=>nU(t),addTokenListener:e=>rU(t,"INTERNAL",e),removeTokenListener:e=>wA(t.app,e)}}var cU="@firebase/app-check",uU="0.8.6";var lU="app-check",hA="app-check-internal";function dU(){Tu(new $o(lU,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return sU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(hA).initialize()})),Tu(new $o(hA,t=>{let e=t.getProvider("app-check").getImmediate();return aU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Li(cU,uU)}dU();var hU=["localhost","0.0.0.0","127.0.0.1"],VQ=typeof window<"u"&&hU.includes(window.location.hostname);var fU="firebase",pU="10.12.4";dn.registerVersion(fU,pU,"app-compat");var gU=["ngOnDestroy"],bA=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(gU.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(f=>{let m=f?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,m),m})})})});var wp=class{constructor(e){return e}},ac=new ee("angularfire2.app.options"),cc=new ee("angularfire2.app.name");function Dl(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=dn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>dn.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;mU("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new wp(s)}var mU=(t,...e)=>{Ov()&&typeof console<"u"&&console[t](...e)},yU={provide:wp,useFactory:Dl,deps:[ac,Ne,[new Fa,cc]]},IA=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:ac,useValue:n},{provide:cc,useValue:r}]}}constructor(n){dn.registerVersion("angularfire",ic.full,"core"),dn.registerVersion("angularfire",ic.full,"app-compat"),dn.registerVersion("angular",CT.full,n.toString())}static \u0275fac=function(r){return new(r||t)(z(gn))};static \u0275mod=Nt({type:t});static \u0275inj=Rt({providers:[yU]})}return t})();function _p(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return vU(i,s)||(EA("error",`${e} was already initialized on the ${n} Firebase App with different settings.${wU?" You may need to reload as Firebase is not HMR aware.":""}`),EA("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function vU(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var wU=typeof module<"u"&&!!module.hot,EA=(t,...e)=>{Ov()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Ww=new ee("angularfire2.auth.use-emulator"),Kw=new ee("angularfire2.auth.settings"),Qw=new ee("angularfire2.auth.tenant-id"),Yw=new ee("angularfire2.auth.langugage-code"),Zw=new ee("angularfire2.auth.use-device-language"),Jw=new ee("angularfire.auth.persistence"),Xw=(t,e,n,r,i,o,s,a)=>_p(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,f]of Object.entries(s))c.settings[l]=f;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),DA=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,f,m,w,E){let M=new nt,P=ue(void 0).pipe(Rn(s.outsideAngular),ut(()=>o.runOutsideAngular(()=>import("./chunk-XW52KDYP.js"))),de(()=>Dl(n,o,r)),de(N=>Xw(N,o,a,l,f,m,c,w)),Vh({bufferSize:1,refCount:!1}));if(fs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ue(null);else{P.pipe(Nn()).subscribe();let N=P.pipe(ut($=>$.getRedirectResult().then(re=>re,()=>null)),vn,Vh({bufferSize:1,refCount:!1})),H=P.pipe(ut($=>new Te(re=>({unsubscribe:o.runOutsideAngular(()=>$.onAuthStateChanged(le=>re.next(le),le=>re.error(le),()=>re.complete()))})))),X=P.pipe(ut($=>new Te(re=>({unsubscribe:o.runOutsideAngular(()=>$.onIdTokenChanged(le=>re.next(le),le=>re.error(le),()=>re.complete()))}))));this.authState=N.pipe(Lh(H),Qn(s.outsideAngular),Rn(s.insideAngular)),this.user=N.pipe(Lh(X),Qn(s.outsideAngular),Rn(s.insideAngular)),this.idToken=this.user.pipe(ut($=>$?Ve($.getIdToken()):ue(null))),this.idTokenResult=this.user.pipe(ut($=>$?Ve($.getIdTokenResult()):ue(null))),this.credential=$m(N,M,this.authState.pipe($t($=>!$))).pipe(de($=>$?.user?$:null),Qn(s.outsideAngular),Rn(s.insideAngular))}return bA(this,P,o,{spy:{apply:(N,H,X)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&X.then($=>M.next($))}}})}static \u0275fac=function(r){return new(r||t)(z(ac),z(cc,8),z(gn),z(Ne),z(fp),z(Ww,8),z(Kw,8),z(Qw,8),z(Yw,8),z(Zw,8),z(Jw,8),z(ms,8))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var CA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TA={};var no,e_;(function(){var t;function e(T,I){function C(){}C.prototype=I.prototype,T.D=I.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(S,A,R){for(var D=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)D[Ge-2]=arguments[Ge];return I.prototype[A].apply(S,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,I,C){C||(C=0);var S=Array(16);if(typeof I=="string")for(var A=0;16>A;++A)S[A]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(A=0;16>A;++A)S[A]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=T.g[0],C=T.g[1],A=T.g[2];var R=T.g[3],D=I+(R^C&(A^R))+S[0]+3614090360&4294967295;I=C+(D<<7&4294967295|D>>>25),D=R+(A^I&(C^A))+S[1]+3905402710&4294967295,R=I+(D<<12&4294967295|D>>>20),D=A+(C^R&(I^C))+S[2]+606105819&4294967295,A=R+(D<<17&4294967295|D>>>15),D=C+(I^A&(R^I))+S[3]+3250441966&4294967295,C=A+(D<<22&4294967295|D>>>10),D=I+(R^C&(A^R))+S[4]+4118548399&4294967295,I=C+(D<<7&4294967295|D>>>25),D=R+(A^I&(C^A))+S[5]+1200080426&4294967295,R=I+(D<<12&4294967295|D>>>20),D=A+(C^R&(I^C))+S[6]+2821735955&4294967295,A=R+(D<<17&4294967295|D>>>15),D=C+(I^A&(R^I))+S[7]+4249261313&4294967295,C=A+(D<<22&4294967295|D>>>10),D=I+(R^C&(A^R))+S[8]+1770035416&4294967295,I=C+(D<<7&4294967295|D>>>25),D=R+(A^I&(C^A))+S[9]+2336552879&4294967295,R=I+(D<<12&4294967295|D>>>20),D=A+(C^R&(I^C))+S[10]+4294925233&4294967295,A=R+(D<<17&4294967295|D>>>15),D=C+(I^A&(R^I))+S[11]+2304563134&4294967295,C=A+(D<<22&4294967295|D>>>10),D=I+(R^C&(A^R))+S[12]+1804603682&4294967295,I=C+(D<<7&4294967295|D>>>25),D=R+(A^I&(C^A))+S[13]+4254626195&4294967295,R=I+(D<<12&4294967295|D>>>20),D=A+(C^R&(I^C))+S[14]+2792965006&4294967295,A=R+(D<<17&4294967295|D>>>15),D=C+(I^A&(R^I))+S[15]+1236535329&4294967295,C=A+(D<<22&4294967295|D>>>10),D=I+(A^R&(C^A))+S[1]+4129170786&4294967295,I=C+(D<<5&4294967295|D>>>27),D=R+(C^A&(I^C))+S[6]+3225465664&4294967295,R=I+(D<<9&4294967295|D>>>23),D=A+(I^C&(R^I))+S[11]+643717713&4294967295,A=R+(D<<14&4294967295|D>>>18),D=C+(R^I&(A^R))+S[0]+3921069994&4294967295,C=A+(D<<20&4294967295|D>>>12),D=I+(A^R&(C^A))+S[5]+3593408605&4294967295,I=C+(D<<5&4294967295|D>>>27),D=R+(C^A&(I^C))+S[10]+38016083&4294967295,R=I+(D<<9&4294967295|D>>>23),D=A+(I^C&(R^I))+S[15]+3634488961&4294967295,A=R+(D<<14&4294967295|D>>>18),D=C+(R^I&(A^R))+S[4]+3889429448&4294967295,C=A+(D<<20&4294967295|D>>>12),D=I+(A^R&(C^A))+S[9]+568446438&4294967295,I=C+(D<<5&4294967295|D>>>27),D=R+(C^A&(I^C))+S[14]+3275163606&4294967295,R=I+(D<<9&4294967295|D>>>23),D=A+(I^C&(R^I))+S[3]+4107603335&4294967295,A=R+(D<<14&4294967295|D>>>18),D=C+(R^I&(A^R))+S[8]+1163531501&4294967295,C=A+(D<<20&4294967295|D>>>12),D=I+(A^R&(C^A))+S[13]+2850285829&4294967295,I=C+(D<<5&4294967295|D>>>27),D=R+(C^A&(I^C))+S[2]+4243563512&4294967295,R=I+(D<<9&4294967295|D>>>23),D=A+(I^C&(R^I))+S[7]+1735328473&4294967295,A=R+(D<<14&4294967295|D>>>18),D=C+(R^I&(A^R))+S[12]+2368359562&4294967295,C=A+(D<<20&4294967295|D>>>12),D=I+(C^A^R)+S[5]+4294588738&4294967295,I=C+(D<<4&4294967295|D>>>28),D=R+(I^C^A)+S[8]+2272392833&4294967295,R=I+(D<<11&4294967295|D>>>21),D=A+(R^I^C)+S[11]+1839030562&4294967295,A=R+(D<<16&4294967295|D>>>16),D=C+(A^R^I)+S[14]+4259657740&4294967295,C=A+(D<<23&4294967295|D>>>9),D=I+(C^A^R)+S[1]+2763975236&4294967295,I=C+(D<<4&4294967295|D>>>28),D=R+(I^C^A)+S[4]+1272893353&4294967295,R=I+(D<<11&4294967295|D>>>21),D=A+(R^I^C)+S[7]+4139469664&4294967295,A=R+(D<<16&4294967295|D>>>16),D=C+(A^R^I)+S[10]+3200236656&4294967295,C=A+(D<<23&4294967295|D>>>9),D=I+(C^A^R)+S[13]+681279174&4294967295,I=C+(D<<4&4294967295|D>>>28),D=R+(I^C^A)+S[0]+3936430074&4294967295,R=I+(D<<11&4294967295|D>>>21),D=A+(R^I^C)+S[3]+3572445317&4294967295,A=R+(D<<16&4294967295|D>>>16),D=C+(A^R^I)+S[6]+76029189&4294967295,C=A+(D<<23&4294967295|D>>>9),D=I+(C^A^R)+S[9]+3654602809&4294967295,I=C+(D<<4&4294967295|D>>>28),D=R+(I^C^A)+S[12]+3873151461&4294967295,R=I+(D<<11&4294967295|D>>>21),D=A+(R^I^C)+S[15]+530742520&4294967295,A=R+(D<<16&4294967295|D>>>16),D=C+(A^R^I)+S[2]+3299628645&4294967295,C=A+(D<<23&4294967295|D>>>9),D=I+(A^(C|~R))+S[0]+4096336452&4294967295,I=C+(D<<6&4294967295|D>>>26),D=R+(C^(I|~A))+S[7]+1126891415&4294967295,R=I+(D<<10&4294967295|D>>>22),D=A+(I^(R|~C))+S[14]+2878612391&4294967295,A=R+(D<<15&4294967295|D>>>17),D=C+(R^(A|~I))+S[5]+4237533241&4294967295,C=A+(D<<21&4294967295|D>>>11),D=I+(A^(C|~R))+S[12]+1700485571&4294967295,I=C+(D<<6&4294967295|D>>>26),D=R+(C^(I|~A))+S[3]+2399980690&4294967295,R=I+(D<<10&4294967295|D>>>22),D=A+(I^(R|~C))+S[10]+4293915773&4294967295,A=R+(D<<15&4294967295|D>>>17),D=C+(R^(A|~I))+S[1]+2240044497&4294967295,C=A+(D<<21&4294967295|D>>>11),D=I+(A^(C|~R))+S[8]+1873313359&4294967295,I=C+(D<<6&4294967295|D>>>26),D=R+(C^(I|~A))+S[15]+4264355552&4294967295,R=I+(D<<10&4294967295|D>>>22),D=A+(I^(R|~C))+S[6]+2734768916&4294967295,A=R+(D<<15&4294967295|D>>>17),D=C+(R^(A|~I))+S[13]+1309151649&4294967295,C=A+(D<<21&4294967295|D>>>11),D=I+(A^(C|~R))+S[4]+4149444226&4294967295,I=C+(D<<6&4294967295|D>>>26),D=R+(C^(I|~A))+S[11]+3174756917&4294967295,R=I+(D<<10&4294967295|D>>>22),D=A+(I^(R|~C))+S[2]+718787259&4294967295,A=R+(D<<15&4294967295|D>>>17),D=C+(R^(A|~I))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+I&4294967295,T.g[1]=T.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,I){I===void 0&&(I=T.length);for(var C=I-this.blockSize,S=this.B,A=this.h,R=0;R<I;){if(A==0)for(;R<=C;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<I;)if(S[A++]=T.charCodeAt(R++),A==this.blockSize){i(this,S),A=0;break}}else for(;R<I;)if(S[A++]=T[R++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=I},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var I=1;I<T.length-8;++I)T[I]=0;var C=8*this.o;for(I=T.length-8;I<T.length;++I)T[I]=C&255,C/=256;for(this.u(T),T=Array(16),I=C=0;4>I;++I)for(var S=0;32>S;S+=8)T[C++]=this.g[I]>>>S&255;return T};function o(T,I){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=I(T)}function s(T,I){this.h=I;for(var C=[],S=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;S&&R==I||(C[A]=R,S=!1)}this.g=C}var a={};function c(T){return-128<=T&&128>T?o(T,function(I){return new s([I|0],0>I?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return N(l(-T));for(var I=[],C=1,S=0;T>=C;S++)I[S]=T/C|0,C*=4294967296;return new s(I,0)}function f(T,I){if(T.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T.charAt(0)=="-")return N(f(T.substring(1),I));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(I,8)),S=m,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),D=parseInt(T.substring(A,A+R),I);8>R?(R=l(Math.pow(I,R)),S=S.j(R).add(l(D))):(S=S.j(C),S=S.add(l(D)))}return S}var m=c(0),w=c(1),E=c(16777216);t=s.prototype,t.m=function(){if(P(this))return-N(this).m();for(var T=0,I=1,C=0;C<this.g.length;C++){var S=this.i(C);T+=(0<=S?S:4294967296+S)*I,I*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(M(this))return"0";if(P(this))return"-"+N(this).toString(T);for(var I=l(Math.pow(T,6)),C=this,S="";;){var A=re(C,I).g;C=H(C,A.j(I));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=A,M(C))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function M(T){if(T.h!=0)return!1;for(var I=0;I<T.g.length;I++)if(T.g[I]!=0)return!1;return!0}function P(T){return T.h==-1}t.l=function(T){return T=H(this,T),P(T)?-1:M(T)?0:1};function N(T){for(var I=T.g.length,C=[],S=0;S<I;S++)C[S]=~T.g[S];return new s(C,~T.h).add(w)}t.abs=function(){return P(this)?N(this):this},t.add=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],S=0,A=0;A<=I;A++){var R=S+(this.i(A)&65535)+(T.i(A)&65535),D=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);S=D>>>16,R&=65535,D&=65535,C[A]=D<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function H(T,I){return T.add(N(I))}t.j=function(T){if(M(this)||M(T))return m;if(P(this))return P(T)?N(this).j(N(T)):N(N(this).j(T));if(P(T))return N(this.j(N(T)));if(0>this.l(E)&&0>T.l(E))return l(this.m()*T.m());for(var I=this.g.length+T.g.length,C=[],S=0;S<2*I;S++)C[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<T.g.length;A++){var R=this.i(S)>>>16,D=this.i(S)&65535,Ge=T.i(A)>>>16,Br=T.i(A)&65535;C[2*S+2*A]+=D*Br,X(C,2*S+2*A),C[2*S+2*A+1]+=R*Br,X(C,2*S+2*A+1),C[2*S+2*A+1]+=D*Ge,X(C,2*S+2*A+1),C[2*S+2*A+2]+=R*Ge,X(C,2*S+2*A+2)}for(S=0;S<I;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=I;S<2*I;S++)C[S]=0;return new s(C,0)};function X(T,I){for(;(T[I]&65535)!=T[I];)T[I+1]+=T[I]>>>16,T[I]&=65535,I++}function $(T,I){this.g=T,this.h=I}function re(T,I){if(M(I))throw Error("division by zero");if(M(T))return new $(m,m);if(P(T))return I=re(N(T),I),new $(N(I.g),N(I.h));if(P(I))return I=re(T,N(I)),new $(N(I.g),I.h);if(30<T.g.length){if(P(T)||P(I))throw Error("slowDivide_ only works with positive integers.");for(var C=w,S=I;0>=S.l(T);)C=le(C),S=le(S);var A=se(C,1),R=se(S,1);for(S=se(S,2),C=se(C,2);!M(S);){var D=R.add(S);0>=D.l(T)&&(A=A.add(C),R=D),S=se(S,1),C=se(C,1)}return I=H(T,A.j(I)),new $(A,I)}for(A=m;0<=T.l(I);){for(C=Math.max(1,Math.floor(T.m()/I.m())),S=Math.ceil(Math.log(C)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=l(C),D=R.j(I);P(D)||0<D.l(T);)C-=S,R=l(C),D=R.j(I);M(R)&&(R=w),A=A.add(R),T=H(T,D)}return new $(A,T)}t.A=function(T){return re(this,T).h},t.and=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],S=0;S<I;S++)C[S]=this.i(S)&T.i(S);return new s(C,this.h&T.h)},t.or=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],S=0;S<I;S++)C[S]=this.i(S)|T.i(S);return new s(C,this.h|T.h)},t.xor=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],S=0;S<I;S++)C[S]=this.i(S)^T.i(S);return new s(C,this.h^T.h)};function le(T){for(var I=T.g.length+1,C=[],S=0;S<I;S++)C[S]=T.i(S)<<1|T.i(S-1)>>>31;return new s(C,T.h)}function se(T,I){var C=I>>5;I%=32;for(var S=T.g.length-C,A=[],R=0;R<S;R++)A[R]=0<I?T.i(R+C)>>>I|T.i(R+C+1)<<32-I:T.i(R+C);return new s(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,e_=TA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,no=TA.Integer=s}).apply(typeof CA<"u"?CA:typeof self<"u"?self:typeof window<"u"?window:{});var Ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gi={};var t_,n_,uc,r_,Cl,bp,i_,o_,s_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ep=="object"&&Ep];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var g=r;u=u.split(".");for(var _=0;_<u.length-1;_++){var x=u[_];if(!(x in g))break e;g=g[x]}u=u[u.length-1],_=g[u],p=p(_),p!=_&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var g=0,_=!1,x={next:function(){if(!_&&g<u.length){var V=g++;return{value:p(V,u[V]),done:!1}}return _=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(u){return u||function(){return o(this,function(p,g){return g})}});var s=s||{},a=this||self;function c(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function f(u,p,g){return u.call.apply(u.bind,arguments)}function m(u,p,g){if(!u)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,_),u.apply(p,x)}}return function(){return u.apply(p,arguments)}}function w(u,p,g){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,w.apply(null,arguments)}function E(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var _=g.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function M(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(_,x,V){for(var q=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)q[Ue-2]=arguments[Ue];return p.prototype[x].apply(_,q)}}function P(u){let p=u.length;if(0<p){let g=Array(p);for(let _=0;_<p;_++)g[_]=u[_];return g}return[]}function N(u,p){for(let g=1;g<arguments.length;g++){let _=arguments[g];if(c(_)){let x=u.length||0,V=_.length||0;u.length=x+V;for(let q=0;q<V;q++)u[x+q]=_[q]}else u.push(_)}}class H{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function X(u){return/^[\s\xa0]*$/.test(u)}function $(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function re(u){return re[" "](u),u}re[" "]=function(){};var le=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function se(u,p,g){for(let _ in u)p.call(g,u[_],_,u)}function T(u,p){for(let g in u)p.call(void 0,u[g],g,u)}function I(u){let p={};for(let g in u)p[g]=u[g];return p}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,p){let g,_;for(let x=1;x<arguments.length;x++){_=arguments[x];for(g in _)u[g]=_[g];for(let V=0;V<C.length;V++)g=C[V],Object.prototype.hasOwnProperty.call(_,g)&&(u[g]=_[g])}}function A(u){var p=1;u=u.split(":");let g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function R(u){a.setTimeout(()=>{throw u},0)}function D(){var u=Xc;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ge{constructor(){this.h=this.g=null}add(p,g){let _=Br.get();_.set(p,g),this.h?this.h.next=_:this.g=_,this.h=_}}var Br=new H(()=>new Jg,u=>u.reset());class Jg{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,Io=!1,Xc=new Ge,eu=()=>{let u=a.Promise.resolve(void 0);fe=()=>{u.then(Xg)}};var Xg=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(g){R(g)}var p=Br;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}Io=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function kt(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var Gs=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function Ci(u,p){if(kt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(le){e:{try{re(p.nodeName);var x=!0;break e}catch{}x=!1}x||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:tu[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ci.aa.h.call(this)}}M(Ci,kt);var tu={2:"touch",3:"pen",4:"mouse"};Ci.prototype.h=function(){Ci.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),Ur=0;function vd(u,p,g,_,x){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!_,this.ha=x,this.key=++Ur,this.da=this.fa=!1}function Ws(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Do(u){this.src=u,this.g={},this.h=0}Do.prototype.add=function(u,p,g,_,x){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var q=Co(u,p,_,x);return-1<q?(p=u[q],g||(p.fa=!1)):(p=new vd(p,this.src,V,!!_,x),p.fa=g,u.push(p)),p};function Ti(u,p){var g=p.type;if(g in u.g){var _=u.g[g],x=Array.prototype.indexOf.call(_,p,void 0),V;(V=0<=x)&&Array.prototype.splice.call(_,x,1),V&&(Ws(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Co(u,p,g,_){for(var x=0;x<u.length;++x){var V=u[x];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==_)return x}return-1}var $r="closure_lm_"+(1e6*Math.random()|0),To={};function jt(u,p,g,_,x){if(_&&_.once)return Le(u,p,g,_,x);if(Array.isArray(p)){for(var V=0;V<p.length;V++)jt(u,p[V],g,_,x);return null}return g=xi(g),u&&u[vt]?u.K(p,g,l(_)?!!_.capture:!!_,x):Si(u,p,g,!1,_,x)}function Si(u,p,g,_,x,V){if(!p)throw Error("Invalid event type");var q=l(x)?!!x.capture:!!x,Ue=Ks(u);if(Ue||(u[$r]=Ue=new Do(u)),g=Ue.add(p,g,_,q,V),g.proxy)return g;if(_=Qt(),g.proxy=_,_.src=u,_.listener=g,u.addEventListener)Gs||(x=q),x===void 0&&(x=!1),u.addEventListener(p.toString(),_,x);else if(u.attachEvent)u.attachEvent(ru(p.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Qt(){function u(g){return p.call(u.src,u.listener,g)}let p=iu;return u}function Le(u,p,g,_,x){if(Array.isArray(p)){for(var V=0;V<p.length;V++)Le(u,p[V],g,_,x);return null}return g=xi(g),u&&u[vt]?u.L(p,g,l(_)?!!_.capture:!!_,x):Si(u,p,g,!0,_,x)}function Ai(u,p,g,_,x){if(Array.isArray(p))for(var V=0;V<p.length;V++)Ai(u,p[V],g,_,x);else _=l(_)?!!_.capture:!!_,g=xi(g),u&&u[vt]?(u=u.i,p=String(p).toString(),p in u.g&&(V=u.g[p],g=Co(V,g,_,x),-1<g&&(Ws(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ks(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Co(p,g,_,x)),(g=-1<u?p[u]:null)&&nu(g))}function nu(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[vt])Ti(p.i,u);else{var g=u.type,_=u.proxy;p.removeEventListener?p.removeEventListener(g,_,u.capture):p.detachEvent?p.detachEvent(ru(g),_):p.addListener&&p.removeListener&&p.removeListener(_),(g=Ks(p))?(Ti(g,u),g.h==0&&(g.src=null,p[$r]=null)):Ws(u)}}}function ru(u){return u in To?To[u]:To[u]="on"+u}function iu(u,p){if(u.da)u=!0;else{p=new Ci(p,this);var g=u.listener,_=u.ha||u.src;u.fa&&nu(u),u=g.call(_,p)}return u}function Ks(u){return u=u[$r],u instanceof Do?u:null}var So="__closure_events_fn_"+(1e9*Math.random()>>>0);function xi(u){return typeof u=="function"?u:(u[So]||(u[So]=function(p){return u.handleEvent(p)}),u[So])}function He(){F.call(this),this.i=new Do(this),this.M=this,this.F=null}M(He,F),He.prototype[vt]=!0,He.prototype.removeEventListener=function(u,p,g,_){Ai(this,u,p,g,_)};function ot(u,p){var g,_=u.F;if(_)for(g=[];_;_=_.F)g.push(_);if(u=u.M,_=p.type||p,typeof p=="string")p=new kt(p,u);else if(p instanceof kt)p.target=p.target||u;else{var x=p;p=new kt(_,u),S(p,x)}if(x=!0,g)for(var V=g.length-1;0<=V;V--){var q=p.g=g[V];x=An(q,_,!0,p)&&x}if(q=p.g=u,x=An(q,_,!0,p)&&x,x=An(q,_,!1,p)&&x,g)for(V=0;V<g.length;V++)q=p.g=g[V],x=An(q,_,!1,p)&&x}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],_=0;_<g.length;_++)Ws(g[_]);delete u.g[p],u.h--}}this.F=null},He.prototype.K=function(u,p,g,_){return this.i.add(String(u),p,!1,g,_)},He.prototype.L=function(u,p,g,_){return this.i.add(String(u),p,!0,g,_)};function An(u,p,g,_){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var x=!0,V=0;V<p.length;++V){var q=p[V];if(q&&!q.da&&q.capture==g){var Ue=q.listener,wt=q.ha||q.src;q.fa&&Ti(u.i,q),x=Ue.call(wt,_)!==!1&&x}}return x&&!_.defaultPrevented}function wd(u,p,g){if(typeof u=="function")g&&(u=w(u,g));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Hr(u){u.g=wd(()=>{u.g=null,u.i&&(u.i=!1,Hr(u))},u.l);let p=u.h;u.h=null,u.m.apply(null,p)}class Ao extends F{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Hr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(u){F.call(this),this.h=u,this.g={}}M(Mi,F);var xo=[];function Qs(u){se(u.g,function(p,g){this.g.hasOwnProperty(g)&&nu(p)},u),u.g={}}Mi.prototype.N=function(){Mi.aa.N.call(this),Qs(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ou=a.JSON.stringify,su=a.JSON.parse,au=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ri(){}Ri.prototype.h=null;function _d(u){return u.h||(u.h=u.i())}function zt(){}var Yt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cu(){kt.call(this,"d")}M(cu,kt);function Bt(){kt.call(this,"c")}M(Bt,kt);var xn={},uu=null;function Mo(){return uu=uu||new He}xn.La="serverreachability";function Me(u){kt.call(this,xn.La,u)}M(Me,kt);function qt(u){let p=Mo();ot(p,new Me(p))}xn.STAT_EVENT="statevent";function zn(u,p){kt.call(this,xn.STAT_EVENT,u),this.stat=p}M(zn,kt);function et(u){let p=Mo();ot(p,new zn(p,u))}xn.Ma="timingevent";function ht(u,p){kt.call(this,xn.Ma,u),this.size=p}M(ht,kt);function st(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function zr(){this.g=!0}zr.prototype.xa=function(){this.g=!1};function Ed(u,p,g,_,x,V){u.info(function(){if(u.g)if(V)for(var q="",Ue=V.split("&"),wt=0;wt<Ue.length;wt++){var Re=Ue[wt].split("=");if(1<Re.length){var _t=Re[0];Re=Re[1];var St=_t.split("_");q=2<=St.length&&St[1]=="type"?q+(_t+"="+Re+"&"):q+(_t+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+_+") [attempt "+x+"]: "+p+`
`+g+`
`+q})}function Ro(u,p,g,_,x,V,q){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+x+"]: "+p+`
`+g+`
`+V+" "+q})}function ft(u,p,g,_){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+bd(u,g)+(_?" "+_:"")})}function em(u,p){u.info(function(){return"TIMEOUT: "+p})}zr.prototype.info=function(){};function bd(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var _=g[u];if(!(2>_.length)){var x=_[1];if(Array.isArray(x)&&!(1>x.length)){var V=x[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<x.length;q++)x[q]=""}}}}return ou(g)}catch{return p}}var No={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ys={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lu;function Po(){}M(Po,Ri),Po.prototype.g=function(){return new XMLHttpRequest},Po.prototype.i=function(){return{}},lu=new Po;function dr(u,p,g,_){this.j=u,this.i=p,this.l=g,this.R=_||1,this.U=new Mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Id}function Id(){this.i=null,this.g="",this.h=!1}var hr={},du={};function hu(u,p,g){u.L=1,u.v=Js(En(p)),u.m=g,u.P=!0,Dd(u,null)}function Dd(u,p){u.F=Date.now(),Ni(u),u.A=En(u.v);var g=u.A,_=u.R;Array.isArray(_)||(_=[String(_)]),Vd(g.i,"t",_),u.C=0,g=u.j.J,u.h=new Id,u.g=Yd(u.j,g?p:null,!u.m),0<u.O&&(u.M=new Ao(w(u.Y,u,u.g),u.O)),p=u.U,g=u.g,_=u.ca;var x="readystatechange";Array.isArray(x)||(x&&(xo[0]=x.toString()),x=xo);for(var V=0;V<x.length;V++){var q=jt(g,x[V],_||p.handleEvent,!1,p.h||p);if(!q)break;p.g[q.key]=q}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),qt(),Ed(u.i,u.u,u.A,u.l,u.R,u.m)}dr.prototype.ca=function(u){u=u.target;let p=this.M;p&&Mn(u)==3?p.j():this.Y(u)},dr.prototype.Y=function(u){try{if(u==this.g)e:{let St=Mn(this.g);var p=this.g.Ba();let Yr=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||$d(this.g)))){this.J||St!=4||p==7||(p==8||0>=Yr?qt(3):qt(2)),fu(this);var g=this.g.Z();this.X=g;t:if(Cd(this)){var _=$d(this.g);u="";var x=_.length,V=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),_n(this);var q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<x;p++)this.h.h=!0,u+=this.h.i.decode(_[p],{stream:!(V&&p==x-1)});_.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,Ro(this.i,this.u,this.A,this.l,this.R,St,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,wt=this.g;if((Ue=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ue)){var Re=Ue;break t}}Re=null}if(g=Re)ft(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pu(this,g);else{this.o=!1,this.s=3,et(12),qr(this),_n(this);break e}}if(this.P){g=!0;let Jt;for(;!this.J&&this.C<q.length;)if(Jt=tm(this,q),Jt==du){St==4&&(this.s=4,et(14),g=!1),ft(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==hr){this.s=4,et(15),ft(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else ft(this.i,this.l,Jt,null),pu(this,Jt);if(Cd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||q.length!=0||this.h.h||(this.s=1,et(16),g=!1),this.o=this.o&&g,!g)ft(this.i,this.l,q,"[Invalid Chunked Response]"),qr(this),_n(this);else if(0<q.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),ta(_t),_t.M=!0,et(11))}}else ft(this.i,this.l,q,null),pu(this,q);St==4&&qr(this),this.o&&!this.J&&(St==4?Wd(this.j,this):(this.o=!1,Ni(this)))}else pm(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),qr(this),_n(this)}}}catch{}finally{}};function Cd(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function tm(u,p){var g=u.C,_=p.indexOf(`
`,g);return _==-1?du:(g=Number(p.substring(g,_)),isNaN(g)?hr:(_+=1,_+g>p.length?du:(p=p.slice(_,_+g),u.C=_+g,p)))}dr.prototype.cancel=function(){this.J=!0,qr(this)};function Ni(u){u.S=Date.now()+u.I,Td(u,u.I)}function Td(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=st(w(u.ba,u),p)}function fu(u){u.B&&(a.clearTimeout(u.B),u.B=null)}dr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(em(this.i,this.A),this.L!=2&&(qt(),et(17)),qr(this),this.s=2,_n(this)):Td(this,this.S-u)};function _n(u){u.j.G==0||u.J||Wd(u.j,u)}function qr(u){fu(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Qs(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function pu(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||gu(g.h,u))){if(!u.K&&gu(g.h,u)&&g.G==3){try{var _=g.Da.g.parse(p)}catch{_=null}if(Array.isArray(_)&&_.length==3){var x=_;if(x[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)na(g),ea(g);else break e;bu(g),et(18)}}else g.za=x[1],0<g.za-g.T&&37500>x[2]&&g.F&&g.v==0&&!g.C&&(g.C=st(w(g.Za,g),6e3));if(1>=Ad(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else mr(g,11)}else if((u.K||g.g==u)&&na(g),!X(p))for(x=g.Da.g.parse(p),p=0;p<x.length;p++){let Re=x[p];if(g.T=Re[0],Re=Re[1],g.G==2)if(Re[0]=="c"){g.K=Re[1],g.ia=Re[2];let _t=Re[3];_t!=null&&(g.la=_t,g.j.info("VER="+g.la));let St=Re[4];St!=null&&(g.Aa=St,g.j.info("SVER="+g.Aa));let Yr=Re[5];Yr!=null&&typeof Yr=="number"&&0<Yr&&(_=1.5*Yr,g.L=_,g.j.info("backChannelRequestTimeoutMs_="+_)),_=g;let Jt=u.g;if(Jt){let Zr=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zr){var V=_.h;V.g||Zr.indexOf("spdy")==-1&&Zr.indexOf("quic")==-1&&Zr.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(mu(V,V.h),V.h=null))}if(_.D){let Iu=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Iu&&(_.ya=Iu,he(_.I,_.D,Iu))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),_=g;var q=u;if(_.qa=Qd(_,_.J?_.ia:null,_.W),q.K){xd(_.h,q);var Ue=q,wt=_.L;wt&&(Ue.I=wt),Ue.B&&(fu(Ue),Ni(Ue)),_.g=q}else Wn(_);0<g.i.length&&Gn(g)}else Re[0]!="stop"&&Re[0]!="close"||mr(g,7);else g.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?mr(g,7):Eu(g):Re[0]!="noop"&&g.l&&g.l.ta(Re),g.v=0)}}qt(4)}catch{}}var nm=class{constructor(u,p){this.g=u,this.map=p}};function Zs(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sd(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ad(u){return u.h?1:u.g?u.g.size:0}function gu(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function mu(u,p){u.g?u.g.add(p):u.h=p}function xd(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Zs.prototype.cancel=function(){if(this.i=Be(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Be(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(let g of u.g.values())p=p.concat(g.D);return p}return P(u.i)}function rm(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var p=[],g=u.length,_=0;_<g;_++)p.push(u[_]);return p}p=[],g=0;for(_ in u)p[g++]=u[_];return p}function im(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(let _ in u)p[g++]=_;return p}}}function Md(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=im(u),_=rm(u),x=_.length,V=0;V<x;V++)p.call(void 0,_[V],g&&g[V],u)}var Rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function om(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var _=u[g].indexOf("="),x=null;if(0<=_){var V=u[g].substring(0,_);x=u[g].substring(_+1)}else V=u[g];p(V,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Gr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Gr){this.h=u.h,fr(this,u.j),this.o=u.o,this.g=u.g,ko(this,u.s),this.l=u.l;var p=u.i,g=new Pi;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Oo(this,g),this.m=u.m}else u&&(p=String(u).match(Rd))?(this.h=!1,fr(this,p[1]||"",!0),this.o=Fo(p[2]||""),this.g=Fo(p[3]||"",!0),ko(this,p[4]),this.l=Fo(p[5]||"",!0),Oo(this,p[6]||"",!0),this.m=Fo(p[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}Gr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Vo(p,Pd,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Vo(p,Pd,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Vo(g,g.charAt(0)=="/"?am:sm,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Vo(g,cm)),u.join("")};function En(u){return new Gr(u)}function fr(u,p,g){u.j=g?Fo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ko(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Oo(u,p,g){p instanceof Pi?(u.i=p,um(u.i,u.h)):(g||(p=Vo(p,kd)),u.i=new Pi(p,u.h))}function he(u,p,g){u.i.set(p,g)}function Js(u){return he(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Fo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Vo(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,Nd),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Nd(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Pd=/[#\/\?@]/g,sm=/[#\?:]/g,am=/[#\?]/g,kd=/[#\?@]/g,cm=/#/g;function Pi(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function pr(u){u.g||(u.g=new Map,u.h=0,u.i&&om(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Pi.prototype,t.add=function(u,p){pr(this),this.i=null,u=ki(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function Od(u,p){pr(u),p=ki(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Fd(u,p){return pr(u),p=ki(u,p),u.g.has(p)}t.forEach=function(u,p){pr(this),this.g.forEach(function(g,_){g.forEach(function(x){u.call(p,x,_,this)},this)},this)},t.na=function(){pr(this);let u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let _=0;_<p.length;_++){let x=u[_];for(let V=0;V<x.length;V++)g.push(p[_])}return g},t.V=function(u){pr(this);let p=[];if(typeof u=="string")Fd(this,u)&&(p=p.concat(this.g.get(ki(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return pr(this),this.i=null,u=ki(this,u),Fd(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Vd(u,p,g){Od(u,p),0<g.length&&(u.i=null,u.g.set(ki(u,p),P(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var _=p[g];let V=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var x=V;q[_]!==""&&(x+="="+encodeURIComponent(String(q[_]))),u.push(x)}}return this.i=u.join("&")};function ki(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function um(u,p){p&&!u.j&&(pr(u),u.i=null,u.g.forEach(function(g,_){var x=_.toLowerCase();_!=x&&(Od(this,_),Vd(this,x,g))},u)),u.j=p}function lm(u,p){let g=new zr;if(a.Image){let _=new Image;_.onload=E(gr,g,"TestLoadImage: loaded",!0,p,_),_.onerror=E(gr,g,"TestLoadImage: error",!1,p,_),_.onabort=E(gr,g,"TestLoadImage: abort",!1,p,_),_.ontimeout=E(gr,g,"TestLoadImage: timeout",!1,p,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else p(!1)}function Ld(u,p){let g=new zr,_=new AbortController,x=setTimeout(()=>{_.abort(),gr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:_.signal}).then(V=>{clearTimeout(x),V.ok?gr(g,"TestPingServer: ok",!0,p):gr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(x),gr(g,"TestPingServer: error",!1,p)})}function gr(u,p,g,_,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),_(g)}catch{}}function jd(){this.g=new au}function dm(u,p,g){let _=g||"";try{Md(u,function(x,V){let q=x;l(x)&&(q=ou(x)),p.push(_+V+"="+encodeURIComponent(q))})}catch(x){throw p.push(_+"type="+encodeURIComponent("_badmap")),x}}function Lo(u){this.l=u.Ub||null,this.j=u.eb||!1}M(Lo,Ri),Lo.prototype.g=function(){return new qn(this.l,this.j)},Lo.prototype.i=function(u){return function(){return u}}({});function qn(u,p){He.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(qn,He),t=qn.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Wr(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function yu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?jo(this):Wr(this),this.readyState==3&&yu(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,jo(this))},t.Qa=function(u){this.g&&(this.response=u,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wr(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Wr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vu(u){let p="";return se(u,function(g,_){p+=_,p+=":",p+=g,p+=`\r
`}),p}function wu(u,p,g){e:{for(_ in g){var _=!1;break e}_=!0}_||(g=vu(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):he(u,p,g))}function Ze(u){He.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Ze,He);var hm=/^https?$/i,fm=["POST","PUT"];t=Ze.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lu.g(),this.v=this.o?_d(this.o):_d(lu),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){Bd(this,V);return}if(u=g||"",g=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var x in _)g.set(x,_[x]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let V of _.keys())g.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),x=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fm,p,void 0))||_||x||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,q]of g)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_u(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Bd(this,V)}};function Bd(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ud(u),Xs(u)}function Ud(u){u.A||(u.A=!0,ot(u,"complete"),ot(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ot(this,"complete"),ot(this,"abort"),Xs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xs(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kr(this):this.bb())},t.bb=function(){Kr(this)};function Kr(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Mn(u)!=4||u.Z()!=2)){if(u.u&&Mn(u)==4)wd(u.Ea,0,u);else if(ot(u,"readystatechange"),Mn(u)==4){u.h=!1;try{let q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var _;if(_=q===0){var x=String(u.D).match(Rd)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),_=!hm.test(x?x.toLowerCase():"")}g=_}if(g)ot(u,"complete"),ot(u,"success");else{u.m=6;try{var V=2<Mn(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",Ud(u)}}finally{Xs(u)}}}}function Xs(u,p){if(u.g){_u(u);let g=u.g,_=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||ot(u,"ready");try{g.onreadystatechange=_}catch{}}}function _u(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Mn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),su(p)}};function $d(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pm(u){let p={};u=(u.g&&2<=Mn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(X(u[_]))continue;var g=A(u[_]);let x=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let V=p[x]||[];p[x]=V,V.push(g)}T(p,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bo(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function Hd(u){this.Aa=0,this.i=[],this.j=new zr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bo("baseRetryDelayMs",5e3,u),this.cb=Bo("retryDelaySeedMs",1e4,u),this.Wa=Bo("forwardChannelMaxRetries",2,u),this.wa=Bo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Zs(u&&u.concurrentRequestLimit),this.Da=new jd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hd.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,_){et(0),this.W=u,this.H=p||{},g&&_!==void 0&&(this.H.OSID=g,this.H.OAID=_),this.F=this.X,this.I=Qd(this,null,this.W),Gn(this)};function Eu(u){if(zd(u),u.G==3){var p=u.U++,g=En(u.I);if(he(g,"SID",u.K),he(g,"RID",p),he(g,"TYPE","terminate"),Oi(u,g),p=new dr(u,u.j,p),p.L=2,p.v=Js(En(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Yd(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ni(p)}Qr(u)}function ea(u){u.g&&(ta(u),u.g.cancel(),u.g=null)}function zd(u){ea(u),u.u&&(a.clearTimeout(u.u),u.u=null),na(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Gn(u){if(!Sd(u.h)&&!u.s){u.s=!0;var p=u.Ga;fe||eu(),Io||(fe(),Io=!0),Xc.add(p,u),u.B=0}}function gm(u,p){return Ad(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=st(w(u.Ga,u,p),Kd(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let x=new dr(this,this.j,u),V=this.o;if(this.S&&(V?(V=I(V),S(V,this.S)):V=this.S),this.m!==null||this.O||(x.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var _=this.i[g];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(p+=_,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Gd(this,x,p),g=En(this.I),he(g,"RID",u),he(g,"CVER",22),this.D&&he(g,"X-HTTP-Session-Id",this.D),Oi(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(vu(V)))+"&"+p:this.m&&wu(g,this.m,V)),mu(this.h,x),this.Ua&&he(g,"TYPE","init"),this.P?(he(g,"$req",p),he(g,"SID","null"),x.T=!0,hu(x,g,null)):hu(x,g,p),this.G=2}}else this.G==3&&(u?qd(this,u):this.i.length==0||Sd(this.h)||qd(this))};function qd(u,p){var g;p?g=p.l:g=u.U++;let _=En(u.I);he(_,"SID",u.K),he(_,"RID",g),he(_,"AID",u.T),Oi(u,_),u.m&&u.o&&wu(_,u.m,u.o),g=new dr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Gd(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),mu(u.h,g),hu(g,_,p)}function Oi(u,p){u.H&&se(u.H,function(g,_){he(p,_,g)}),u.l&&Md({},function(g,_){he(p,_,g)})}function Gd(u,p,g){g=Math.min(u.i.length,g);var _=u.l?w(u.l.Na,u.l,u):null;e:{var x=u.i;let V=-1;for(;;){let q=["count="+g];V==-1?0<g?(V=x[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Ue=!0;for(let wt=0;wt<g;wt++){let Re=x[wt].g,_t=x[wt].map;if(Re-=V,0>Re)V=Math.max(0,x[wt].g-100),Ue=!1;else try{dm(_t,q,"req"+Re+"_")}catch{_&&_(_t)}}if(Ue){_=q.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,_}function Wn(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;fe||eu(),Io||(fe(),Io=!0),Xc.add(p,u),u.v=0}}function bu(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=st(w(u.Fa,u),Kd(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Fi(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=st(w(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),ea(this),Fi(this))};function ta(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Fi(u){u.g=new dr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=En(u.qa);he(p,"RID","rpc"),he(p,"SID",u.K),he(p,"AID",u.T),he(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&he(p,"TO",u.ja),he(p,"TYPE","xmlhttp"),Oi(u,p),u.m&&u.o&&wu(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Js(En(p)),g.m=null,g.P=!0,Dd(g,u)}t.Za=function(){this.C!=null&&(this.C=null,ea(this),bu(this),et(19))};function na(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Wd(u,p){var g=null;if(u.g==p){na(u),ta(u),u.g=null;var _=2}else if(gu(u.h,p))g=p.D,xd(u.h,p),_=1;else return;if(u.G!=0){if(p.o)if(_==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var x=u.B;_=Mo(),ot(_,new ht(_,g)),Gn(u)}else Wn(u);else if(x=p.s,x==3||x==0&&0<p.X||!(_==1&&gm(u,p)||_==2&&bu(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),x){case 1:mr(u,5);break;case 4:mr(u,10);break;case 3:mr(u,6);break;default:mr(u,2)}}}function Kd(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function mr(u,p){if(u.j.info("Error code "+p),p==2){var g=w(u.fb,u),_=u.Xa;let x=!_;_=new Gr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fr(_,"https"),Js(_),x?lm(_.toString(),g):Ld(_.toString(),g)}else et(2);u.G=0,u.l&&u.l.sa(p),Qr(u),zd(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function Qr(u){if(u.G=0,u.ka=[],u.l){let p=Be(u.h);(p.length!=0||u.i.length!=0)&&(N(u.ka,p),N(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function Qd(u,p,g){var _=g instanceof Gr?En(g):new Gr(g);if(_.g!="")p&&(_.g=p+"."+_.g),ko(_,_.s);else{var x=a.location;_=x.protocol,p=p?p+"."+x.hostname:x.hostname,x=+x.port;var V=new Gr(null);_&&fr(V,_),p&&(V.g=p),x&&ko(V,x),g&&(V.l=g),_=V}return g=u.D,p=u.ya,g&&p&&he(_,g,p),he(_,"VER",u.la),Oi(u,_),_}function Yd(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ze(new Lo({eb:g})):new Ze(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zd(){}t=Zd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ra(){}ra.prototype.g=function(u,p){return new Zt(u,p)};function Zt(u,p){He.call(this),this.g=new Hd(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!X(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!X(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Vi(this)}M(Zt,He),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Eu(this.g)},Zt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=ou(u),u=g);p.i.push(new nm(p.Ya++,u)),p.G==3&&Gn(p)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Eu(this.g),delete this.g,Zt.aa.N.call(this)};function Jd(u){cu.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(let g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}M(Jd,cu);function Xd(){Bt.call(this),this.status=1}M(Xd,Bt);function Vi(u){this.g=u}M(Vi,Zd),Vi.prototype.ua=function(){ot(this.g,"a")},Vi.prototype.ta=function(u){ot(this.g,new Jd(u))},Vi.prototype.sa=function(u){ot(this.g,new Xd)},Vi.prototype.ra=function(){ot(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,s_=gi.createWebChannelTransport=function(){return new ra},o_=gi.getStatEventTarget=function(){return Mo()},i_=gi.Event=xn,bp=gi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},No.NO_ERROR=0,No.TIMEOUT=8,No.HTTP_ERROR=6,Cl=gi.ErrorCode=No,Ys.COMPLETE="complete",r_=gi.EventType=Ys,zt.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",He.prototype.listen=He.prototype.K,uc=gi.WebChannel=zt,n_=gi.FetchXmlHttpFactory=Lo,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,t_=gi.XhrIo=Ze}).apply(typeof Ep<"u"?Ep:typeof self<"u"?self:typeof window<"u"?window:{});var SA="@firebase/firestore";var Dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");var Bc="10.12.3";var uo=new oh("@firebase/firestore");function pc(){return uo.logLevel}function Sx(t){uo.setLogLevel(t)}function U(t,...e){if(uo.logLevel<=vr.DEBUG){let n=e.map(ub);uo.debug(`Firestore (${Bc}): ${t}`,...n)}}function gt(t,...e){if(uo.logLevel<=vr.ERROR){let n=e.map(ub);uo.error(`Firestore (${Bc}): ${t}`,...n)}}function Un(t,...e){if(uo.logLevel<=vr.WARN){let n=e.map(ub);uo.warn(`Firestore (${Bc}): ${t}`,...n)}}function ub(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ne(t="Unexpected state"){let e=`FIRESTORE (${Bc}) INTERNAL ASSERTION FAILED: `+t;throw gt(e),new Error(e)}function oe(t,e){t||ne()}function Ax(t,e){t||ne()}function Z(t,e){return t}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends HI{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ct=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Pp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},d_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}},h_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},f_=class{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new Ct;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ct,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>k(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ct)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new Pp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new Dt(e)}},p_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},g_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new p_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},m_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},y_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string"),this.R=n.token,new m_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function EU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var kp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=EU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ye(t,e){return t<e?-1:t>e?1:0}function Ic(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function xx(t){return t+"\0"}var it=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new it(0,0))}static max(){return new t(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Op=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ke=class t extends Op{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},bU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mt=class t extends Op{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return bU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Y=class t{constructor(e){this.path=e}static fromPath(e){return new t(ke.fromString(e))}static fromName(e){return new t(ke.fromString(e).popFirst(5))}static empty(){return new t(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ke(e.slice()))}};var Dc=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function v_(t){return t.fields.find(e=>e.kind===2)}function _s(t){return t.fields.filter(e=>e.kind!==2)}Dc.UNKNOWN_ID=-1;var _c=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Vl=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,$n.min())}};function Mx(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new $n(i,Y.empty(),e)}function Rx(t){return new $n(t.readTime,t.key,-1)}var $n=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ae.min(),Y.empty(),-1)}static max(){return new t(ae.max(),Y.empty(),-1)}};function lb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}var Nx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function _o(t){return k(this,null,function*(){if(t.code!==j.FAILED_PRECONDITION||t.message!==Nx)throw t;U("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Vp=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ct,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ts(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=db(r.target.error);this.V.reject(new Ts(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Ts(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(U("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new __(n)}},lo=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Cu())===12.2&&gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return U("SimpleDb","Removing database:",e),Es(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ih())return!1;if(t.C())return!0;let e=Cu(),n=t.S(e),r=0<n&&n<10,i=Px(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return k(this,null,function*(){return this.db||(U("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Ts(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new B(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new B(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Ts(e,s))},i.onupgradeneeded=o=>{U("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{U("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return k(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Vp.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),O.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(U("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Px(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var w_=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Es(this.B.delete())}},Ts=class extends B{constructor(e,n){super(j.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Eo(t){return t.name==="IndexedDbTransactionError"}var __=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(U("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(U("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Es(r)}add(e){return U("SimpleDb","ADD",this.store.name,e,e),Es(this.store.add(e))}get(e){return Es(this.store.get(e)).next(n=>(n===void 0&&(n=null),U("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return U("SimpleDb","DELETE",this.store.name,e),Es(this.store.delete(e))}count(){return U("SimpleDb","COUNT",this.store.name),Es(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new O((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new O((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){U("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new O((r,i)=>{n.onerror=o=>{let s=db(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new O((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new w_(a),l=n(a.primaryKey,a.value,c);if(l instanceof O){let f=l.catch(m=>(c.done(),O.reject(m)));r.push(f)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Es(t){return new O((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=db(r.target.error);n(i)}})}var AA=!1;function db(t){let e=lo.S(Cu());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AA||(AA=!0,setTimeout(()=>{throw r},0)),r}}return t}var E_=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){U("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>k(this,null,function*(){this.task=null;try{U("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Eo(n)?U("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield _o(n)}yield this.X(6e4)}))}},b_=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return k(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return O.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return U("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(U("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=Rx(o);lb(s,r)>0&&(r=s)}),new $n(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Tn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function od(t){return t==null}function Ll(t){return t===0&&1/t==-1/0}function kx(t){return typeof t=="number"&&Number.isInteger(t)&&!Ll(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function cn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xA(e)),e=IU(t.get(n),e);return xA(e)}function IU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function xA(t){return t+""}function xr(t){let e=t.length;if(oe(e>=2),e===2)return oe(t.charAt(0)===""&&t.charAt(1)===""),ke.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&ne(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ne()}o=s+2}return new ke(r)}var MA=["userId","batchId"];function Sp(t,e){return[t,cn(e)]}function Ox(t,e,n){return[t,cn(e),n]}var DU={},CU=["prefixPath","collectionGroup","readTime","documentId"],TU=["prefixPath","collectionGroup","documentId"],SU=["collectionGroup","readTime","prefixPath","documentId"],AU=["canonicalId","targetId"],xU=["targetId","path"],MU=["path","targetId"],RU=["collectionId","parent"],NU=["indexId","uid"],PU=["uid","sequenceNumber"],kU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OU=["indexId","uid","orderedDocumentKey"],FU=["userId","collectionPath","documentId"],VU=["userId","collectionPath","largestBatchId"],LU=["userId","collectionGroup","largestBatchId"],Fx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jU=[...Fx,"documentOverlays"],Vx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lx=Vx,jx=[...Lx,"indexConfiguration","indexState","indexEntries"],BU=jx;var jl=class extends Fp{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function Lt(t,e){let n=Z(t);return lo.F(n._e,e)}function RA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ls(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Bx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ye=class t{constructor(e,n){this.comparator=e,this.root=n||Rr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}},wc=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lp(this.data.getIterator())}getIteratorFrom(e){return new Lp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Lp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function lc(t){return t.hasNext()?t.getNext():void 0}var Sn=class t{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(mt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ic(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var jp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Ux(){return typeof atob<"u"}var Vt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jp("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Vt.EMPTY_BYTE_STRING=new Vt("");var UU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(t){if(oe(!!t),typeof t=="string"){let e=0,n=UU.exec(t);if(oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ho(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}function xg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hb(t){let e=t.mapValue.fields.__previous_value__;return xg(e)?hb(e):e}function Bl(t){let e=vi(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}var I_=class{constructor(e,n,r,i,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},fo=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ao={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ap={nullValue:"NULL_VALUE"};function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xg(t)?4:$x(t)?9007199254740991:10:ne()}function kr(t,e){if(t===e)return!0;let n=Ss(t);if(n!==Ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bl(t).isEqual(Bl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=vi(i.timestampValue),a=vi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ho(i.bytesValue).isEqual(ho(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return lt(i.geoPointValue.latitude)===lt(o.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return lt(i.integerValue)===lt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=lt(i.doubleValue),a=lt(o.doubleValue);return s===a?Ll(s)===Ll(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ic(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(RA(s)!==RA(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!kr(s[c],a[c])))return!1;return!0}(t,e);default:return ne()}}function Ul(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function po(t,e){if(t===e)return 0;let n=Ss(t),r=Ss(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=lt(o.integerValue||o.doubleValue),c=lt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return NA(t.timestampValue,e.timestampValue);case 4:return NA(Bl(t),Bl(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(o,s){let a=ho(o),c=ho(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let f=ye(a[l],c[l]);if(f!==0)return f}return ye(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ye(lt(o.latitude),lt(s.latitude));return a!==0?a:ye(lt(o.longitude),lt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let f=po(a[l],c[l]);if(f)return f}return ye(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ao.mapValue&&s===ao.mapValue)return 0;if(o===ao.mapValue)return 1;if(s===ao.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},f=Object.keys(l);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){let w=ye(c[m],f[m]);if(w!==0)return w;let E=po(a[c[m]],l[f[m]]);if(E!==0)return E}return ye(c.length,f.length)}(t.mapValue,e.mapValue);default:throw ne()}}function NA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);let n=vi(t),r=vi(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function Cc(t){return D_(t)}function D_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=vi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ho(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=D_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${D_(n.fields[s])}`;return i+"}"}(t.mapValue):ne()}function As(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function C_(t){return!!t&&"integerValue"in t}function $l(t){return!!t&&"arrayValue"in t}function PA(t){return!!t&&"nullValue"in t}function kA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xp(t){return!!t&&"mapValue"in t}function Nl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Nl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $x(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function $U(t){return"nullValue"in t?Ap:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?As(fo.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ne()}function HU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?As(fo.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ao:ne()}function OA(t,e){let n=po(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function FA(t,e){let n=po(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Kt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nl(n)}setAll(e){let n=mt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Nl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());xp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ls(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Nl(this.value))}};function Hx(t){let e=[];return Ls(t.fields,(n,r)=>{let i=new mt([n]);if(xp(r)){let o=Hx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Sn(e)}var Tt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ae.min(),ae.min(),ae.min(),Kt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ae.min(),ae.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ae.min(),ae.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Or=class{constructor(e,n){this.position=e,this.inclusive=n}};function VA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),n.key):r=po(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function LA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}var xs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function zU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Bp=class{},xe=class t extends Bp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new A_(e,n,r):n==="array-contains"?new R_(e,r):n==="in"?new Up(e,r):n==="not-in"?new N_(e,r):n==="array-contains-any"?new P_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new x_(e,r):new M_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(po(n,this.value)):n!==null&&Ss(this.value)===Ss(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class t extends Bp{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Tc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Tc(t){return t.op==="and"}function T_(t){return t.op==="or"}function fb(t){return zx(t)&&Tc(t)}function zx(t){for(let e of t.filters)if(e instanceof $e)return!1;return!0}function S_(t){if(t instanceof xe)return t.field.canonicalString()+t.op.toString()+Cc(t.value);if(fb(t))return t.filters.map(e=>S_(e)).join(",");{let e=t.filters.map(n=>S_(n)).join(",");return`${t.op}(${e})`}}function qx(t,e){return t instanceof xe?function(r,i){return i instanceof xe&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&qx(s,i.filters[a]),!0):!1}(t,e):void ne()}function Gx(t,e){let n=t.filters.concat(e);return $e.create(n,t.op)}function Wx(t){return t instanceof xe?function(n){return`${n.field.canonicalString()} ${n.op} ${Cc(n.value)}`}(t):t instanceof $e?function(n){return n.op.toString()+" {"+n.getFilters().map(Wx).join(" ,")+"}"}(t):"Filter"}var A_=class extends xe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){let n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}},x_=class extends xe{constructor(e,n){super(e,"in",n),this.keys=Kx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},M_=class extends xe{constructor(e,n){super(e,"not-in",n),this.keys=Kx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Kx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}var R_=class extends xe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return $l(n)&&Ul(n.arrayValue,this.value)}},Up=class extends xe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ul(this.value.arrayValue,n)}},N_=class extends xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ul(this.value.arrayValue,n)}},P_=class extends xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!$l(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ul(this.value.arrayValue,r))}};var k_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function O_(t,e=null,n=[],r=[],i=null,o=null,s=null){return new k_(t,e,n,r,i,o,s)}function Ms(t){let e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>S_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),od(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Cc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Cc(r)).join(",")),e.ue=n}return e.ue}function sd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LA(t.startAt,e.startAt)&&LA(t.endAt,e.endAt)}function $p(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Hp(t,e){return t.filters.filter(n=>n instanceof xe&&n.field.isEqual(e))}function jA(t,e,n){let r=Ap,i=!0;for(let o of Hp(t,e)){let s=Ap,a=!0;switch(o.op){case"<":case"<=":s=$U(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Ap}OA({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];OA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function BA(t,e,n){let r=ao,i=!0;for(let o of Hp(t,e)){let s=ao,a=!0;switch(o.op){case">=":case">":s=HU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ao}FA({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];FA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var ar=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Qx(t,e,n,r,i,o,s,a){return new ar(t,e,n,r,i,o,s,a)}function Uc(t){return new ar(t)}function UA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pb(t){return t.collectionGroup!==null}function Ec(t){let e=Z(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new qe(mt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new xs(o,r))}),n.has(mt.keyField().canonicalString())||e.ce.push(new xs(mt.keyField(),r))}return e.ce}function un(t){let e=Z(t);return e.le||(e.le=qU(e,Ec(t))),e.le}function qU(t,e){if(t.limitType==="F")return O_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xs(i.field,o)});let n=t.endAt?new Or(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Or(t.startAt.position,t.startAt.inclusive):null;return O_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function F_(t,e){let n=t.filters.concat([e]);return new ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zp(t,e,n){return new ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return sd(un(t),un(e))&&t.limitType===e.limitType}function Yx(t){return`${Ms(un(t))}|lt:${t.limitType}`}function gc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Wx(i)).join(", ")}]`),od(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Cc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Cc(i)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function cd(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Ec(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=VA(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Ec(r),i)||r.endAt&&!function(s,a,c){let l=VA(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Ec(r),i))}(t,e)}function Zx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Jx(t){return(e,n)=>{let r=!1;for(let i of Ec(t)){let o=GU(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function GU(t,e,n){let r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?po(c,l):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var Fr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Bx(this.inner)}size(){return this.innerSize}};var WU=new Ye(Y.comparator);function wn(){return WU}var Xx=new Ye(Y.comparator);function Ml(...t){let e=Xx;for(let n of t)e=e.insert(n.key,n);return e}function eM(t){let e=Xx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mr(){return Pl()}function tM(){return Pl()}function Pl(){return new Fr(t=>t.toString(),(t,e)=>t.isEqual(e))}var KU=new Ye(Y.comparator),QU=new qe(Y.comparator);function ve(...t){let e=QU;for(let n of t)e=e.add(n);return e}var YU=new qe(ye);function gb(){return YU}function nM(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ll(e)?"-0":e}}function rM(t){return{integerValue:""+t}}function iM(t,e){return kx(e)?rM(e):nM(t,e)}var Sc=class{constructor(){this._=void 0}};function ZU(t,e,n){return t instanceof go?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&xg(o)&&(o=hb(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof wi?sM(t,e):t instanceof _i?aM(t,e):function(i,o){let s=oM(i,o),a=$A(s)+$A(i.Pe);return C_(s)&&C_(i.Pe)?rM(a):nM(i.serializer,a)}(t,e)}function JU(t,e,n){return t instanceof wi?sM(t,e):t instanceof _i?aM(t,e):n}function oM(t,e){return t instanceof mo?function(r){return C_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var go=class extends Sc{},wi=class extends Sc{constructor(e){super(),this.elements=e}};function sM(t,e){let n=cM(e);for(let r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}var _i=class extends Sc{constructor(e){super(),this.elements=e}};function aM(t,e){let n=cM(e);for(let r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}var mo=class extends Sc{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function $A(t){return lt(t.integerValue||t.doubleValue)}function cM(t){return $l(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Rs=class{constructor(e,n){this.field=e,this.transform=n}};function XU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof wi&&i instanceof wi||r instanceof _i&&i instanceof _i?Ic(r.elements,i.elements,kr):r instanceof mo&&i instanceof mo?kr(r.Pe,i.Pe):r instanceof go&&i instanceof go}(t.transform,e.transform)}var V_=class{constructor(e,n){this.version=e,this.transformResults=n}},dt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ac=class{};function uM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vo(t.key,dt.none()):new yo(t.key,t.data,dt.none());{let n=t.data,r=Kt.empty(),i=new qe(mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new cr(t.key,r,new Sn(i.toArray()),dt.none())}}function e$(t,e,n){t instanceof yo?function(i,o,s){let a=i.value.clone(),c=zA(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof cr?function(i,o,s){if(!Mp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=zA(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(lM(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function kl(t,e,n,r){return t instanceof yo?function(o,s,a,c){if(!Mp(o.precondition,s))return a;let l=o.value.clone(),f=qA(o.fieldTransforms,c,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof cr?function(o,s,a,c){if(!Mp(o.precondition,s))return a;let l=qA(o.fieldTransforms,c,s),f=s.data;return f.setAll(lM(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(o,s,a){return Mp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function t$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=oM(r.transform,i||null);o!=null&&(n===null&&(n=Kt.empty()),n.set(r.field,o))}return n||null}function HA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ic(r,i,(o,s)=>XU(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var yo=class extends Ac{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},cr=class extends Ac{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function lM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function zA(t,e,n){let r=new Map;oe(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,JU(s,a,n[i]))}return r}function qA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,ZU(o,s,e))}return r}var vo=class extends Ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Hl=class extends Ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var zl=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&e$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=kl(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=kl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=tM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=uM(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ic(this.mutations,e.mutations,(n,r)=>HA(n,r))&&Ic(this.baseMutations,e.baseMutations,(n,r)=>HA(n,r))}},L_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length);let i=function(){return KU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var ql=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var j_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var bt,Pe;function dM(t){switch(t){default:return ne();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function hM(t){if(t===void 0)return gt("GRPC error has no .code"),j.UNKNOWN;switch(t){case bt.OK:return j.OK;case bt.CANCELLED:return j.CANCELLED;case bt.UNKNOWN:return j.UNKNOWN;case bt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case bt.INTERNAL:return j.INTERNAL;case bt.UNAVAILABLE:return j.UNAVAILABLE;case bt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case bt.NOT_FOUND:return j.NOT_FOUND;case bt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case bt.ABORTED:return j.ABORTED;case bt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case bt.DATA_LOSS:return j.DATA_LOSS;default:return ne()}}(Pe=bt||(bt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";var GA=null;function fM(){return new TextEncoder}var n$=new no([4294967295,4294967295],0);function WA(t){let e=fM().encode(t),n=new e_;return n.update(e),new Uint8Array(n.digest())}function KA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new no([n,r],0),new no([i,o],0)]}var B_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cs(`Invalid padding: ${n}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=no.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(no.fromNumber(r)));return i.compare(n$)===1&&(i=new no([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=WA(e),[r,i]=KA(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=WA(e),[r,i]=KA(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Cs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Gl=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ae.min(),i,new Ye(ye),wn(),ve())}},Wl=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ve(),ve(),ve())}};var bc=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},qp=class{constructor(e,n){this.targetId=e,this.me=n}},Gp=class{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Wp=class{constructor(){this.fe=0,this.ge=YA(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ve(),n=ve(),r=ve();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Wl(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=YA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},U_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=wn(),this.qe=QA(),this.Qe=new Ye(ye)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if($p(o))if(r===0){let s=new Y(o.path);this.Ue(n,s,Tt.newNoDocument(s,ae.min()))}else oe(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}GA?.et(function(f,m,w,E,M){var P,N,H,X,$,re;let le={localCacheCount:f,existenceFilterCount:m.count,databaseId:w.database,projectId:w.projectId},se=m.unchangedNames;return se&&(le.bloomFilter={applied:M===0,hashCount:(P=se?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(X=(H=(N=se?.bits)===null||N===void 0?void 0:N.bitmap)===null||H===void 0?void 0:H.length)!==null&&X!==void 0?X:0,padding:(re=($=se?.bits)===null||$===void 0?void 0:$.padding)!==null&&re!==void 0?re:0,mightContain:T=>{var I;return(I=E?.mightContain(T))!==null&&I!==void 0&&I}}),le}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=ho(r).toUint8Array()}catch(c){if(c instanceof jp)return Un("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new B_(s,i,o)}catch(c){return Un(c instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&$p(a.target)){let c=new Y(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Tt.newNoDocument(c,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=ve();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Gl(e,n,this.Qe,this.ke,r);return this.ke=wn(),this.qe=QA(),this.Qe=new Ye(ye),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new qe(ye),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function QA(){return new Ye(Y.comparator)}function YA(){return new Ye(Y.comparator)}var r$={asc:"ASCENDING",desc:"DESCENDING"},i$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o$={and:"AND",or:"OR"},$_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function H_(t,e){return t.useProto3Json||od(e)?e:{value:e}}function xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s$(t,e){return xc(t,e.toTimestamp())}function yt(t){return oe(!!t),ae.fromTimestamp(function(n){let r=vi(n);return new it(r.seconds,r.nanos)}(t))}function mb(t,e){return z_(t,e).canonicalString()}function z_(t,e){let n=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gM(t){let e=ke.fromString(t);return oe(CM(e)),e}function Kl(t,e){return mb(t.databaseId,e.path)}function Nr(t,e){let n=gM(e);if(n.get(1)!==t.databaseId.projectId)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(vM(n))}function mM(t,e){return mb(t.databaseId,e)}function yM(t){let e=gM(t);return e.length===4?ke.emptyPath():vM(e)}function q_(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vM(t){return oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ZA(t,e,n){return{name:Kl(t,e),fields:n.value.mapValue.fields}}function wM(t,e,n){let r=Nr(t,e.name),i=yt(e.updateTime),o=e.createTime?yt(e.createTime):ae.min(),s=new Kt({mapValue:{fields:e.fields}}),a=Tt.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function a$(t,e){return"found"in e?function(r,i){oe(!!i.found),i.found.name,i.found.updateTime;let o=Nr(r,i.found.name),s=yt(i.found.updateTime),a=i.found.createTime?yt(i.found.createTime):ae.min(),c=new Kt({mapValue:{fields:i.found.fields}});return Tt.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){oe(!!i.missing),oe(!!i.readTime);let o=Nr(r,i.missing),s=yt(i.readTime);return Tt.newNoDocument(o,s)}(t,e):ne()}function c$(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,f){return l.useProto3Json?(oe(f===void 0||typeof f=="string"),Vt.fromBase64String(f||"")):(oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Vt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let f=l.code===void 0?j.UNKNOWN:hM(l.code);return new B(f,l.message||"")}(s);n=new Gp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Nr(t,r.document.name),o=yt(r.document.updateTime),s=r.document.createTime?yt(r.document.createTime):ae.min(),a=new Kt({mapValue:{fields:r.document.fields}}),c=Tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];n=new bc(l,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Nr(t,r.document),o=r.readTime?yt(r.readTime):ae.min(),s=Tt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new bc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Nr(t,r.document),o=r.removedTargetIds||[];n=new bc([],o,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new j_(i,o),a=r.targetId;n=new qp(a,s)}}return n}function Ql(t,e){let n;if(e instanceof yo)n={update:ZA(t,e.key,e.value)};else if(e instanceof vo)n={delete:Kl(t,e.key)};else if(e instanceof cr)n={update:ZA(t,e.key,e.data),updateMask:p$(e.fieldMask)};else{if(!(e instanceof Hl))return ne();n={verify:Kl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof go)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _i)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mo)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:s$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne()}(t,e.precondition)),n}function G_(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?dt.updateTime(yt(o.updateTime)):o.exists!==void 0?dt.exists(o.exists):dt.none()}(e.currentDocument):dt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME"),c=new go;else if("appendMissingElements"in a){let f=a.appendMissingElements.values||[];c=new wi(f)}else if("removeAllFromArray"in a){let f=a.removeAllFromArray.values||[];c=new _i(f)}else"increment"in a?c=new mo(s,a.increment):ne();let l=mt.fromServerFormat(a.fieldPath);return new Rs(l,c)}(t,i)):[];if(e.update){e.update.name;let i=Nr(t,e.update.name),o=new Kt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Sn(l.map(f=>mt.fromServerFormat(f)))}(e.updateMask);return new cr(i,o,s,n,r)}return new yo(i,o,n,r)}if(e.delete){let i=Nr(t,e.delete);return new vo(i,n)}if(e.verify){let i=Nr(t,e.verify);return new Hl(i,n)}return ne()}function u$(t,e){return t&&t.length>0?(oe(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?yt(i.updateTime):yt(o);return s.isEqual(ae.min())&&(s=yt(o)),new V_(s,i.transformResults||[])}(n,e))):[]}function _M(t,e){return{documents:[mM(t,e.path)]}}function EM(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mM(t,i);let o=function(l){if(l.length!==0)return DM($e.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(f=>function(w){return{field:mc(w.field),direction:d$(w.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=H_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function bM(t){let e=yM(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){oe(r===1);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(m){let w=IM(m);return w instanceof $e&&fb(w)?w.getFilters():[w]}(n.where));let s=[];n.orderBy&&(s=function(m){return m.map(w=>function(M){return new xs(yc(M.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let a=null;n.limit&&(a=function(m){let w;return w=typeof m=="object"?m.value:m,od(w)?null:w}(n.limit));let c=null;n.startAt&&(c=function(m){let w=!!m.before,E=m.values||[];return new Or(E,w)}(n.startAt));let l=null;return n.endAt&&(l=function(m){let w=!m.before,E=m.values||[];return new Or(E,w)}(n.endAt)),Qx(e,i,s,o,a,"F",c,l)}function l$(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=yc(n.unaryFilter.field);return xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=yc(n.unaryFilter.field);return xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=yc(n.unaryFilter.field);return xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=yc(n.unaryFilter.field);return xe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return xe.create(yc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $e.create(n.compositeFilter.filters.map(r=>IM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function d$(t){return r$[t]}function h$(t){return i$[t]}function f$(t){return o$[t]}function mc(t){return{fieldPath:t.canonicalString()}}function yc(t){return mt.fromServerFormat(t.fieldPath)}function DM(t){return t instanceof xe?function(n){if(n.op==="=="){if(kA(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NAN"}};if(PA(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kA(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NOT_NAN"}};if(PA(n.value))return{unaryFilter:{field:mc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mc(n.field),op:h$(n.op),value:n.value}}}(t):t instanceof $e?function(n){let r=n.getFilters().map(i=>DM(i));return r.length===1?r[0]:{compositeFilter:{op:f$(n.op),filters:r}}}(t):ne()}function p$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Mc=class t{constructor(e,n,r,i,o=ae.min(),s=ae.min(),a=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Kp=class{constructor(e){this.ct=e}};function g$(t,e){let n;if(e.document)n=wM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Y.fromSegments(e.noDocument.path),i=Ps(e.noDocument.readTime);n=Tt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne();{let r=Y.fromSegments(e.unknownDocument.path),i=Ps(e.unknownDocument.version);n=Tt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new it(i[0],i[1]);return ae.fromTimestamp(o)}(e.readTime)),n}function JA(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Kl(o,s.key),fields:s.data.value.mapValue.fields,updateTime:xc(o,s.version.toTimestamp()),createTime:xc(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ns(e.version)};else{if(!e.isUnknownDocument())return ne();r.unknownDocument={path:n.path.toArray(),version:Ns(e.version)}}return r}function Qp(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ns(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ps(t){let e=new it(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function bs(t,e){let n=(e.baseMutations||[]).map(o=>G_(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>G_(t.ct,o)),i=it.fromMillis(e.localWriteTimeMs);return new zl(e.batchId,i,n,r)}function Rl(t){let e=Ps(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ps(t.lastLimboFreeSnapshotVersion):ae.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return oe(o.documents.length===1),un(Uc(yM(o.documents[0])))}(t.query):function(o){return un(bM(o))}(t.query),new Mc(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Vt.fromBase64String(t.resumeToken))}function TM(t,e){let n=Ns(e.snapshotVersion),r=Ns(e.lastLimboFreeSnapshotVersion),i;i=$p(e.target)?_M(t.ct,e.target):EM(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ms(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yb(t){let e=bM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zp(e,e.limit,"L"):e}function a_(t,e){return new ql(e.largestBatchId,G_(t.ct,e.overlayMutation))}function XA(t,e){let n=e.path.lastSegment();return[t,cn(e.path.popLast()),n]}function ex(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ns(r.readTime),documentKey:cn(r.documentKey.path),largestBatchId:r.largestBatchId}}var W_=class{getBundleMetadata(e,n){return tx(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ps(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return tx(e).put(function(i){return{bundleId:i.id,createTime:Ns(yt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return nx(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:yb(o.bundledQuery),readTime:Ps(o.readTime)}}(r)})}saveNamedQuery(e,n){return nx(e).put(function(i){return{name:i.name,readTime:Ns(yt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function tx(t){return Lt(t,"bundles")}function nx(t){return Lt(t,"namedQueries")}var Yp=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Tl(e).get(XA(this.userId,n)).next(r=>r?a_(this.serializer,r):null)}getOverlays(e,n){let r=Mr();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new ql(n,s);i.push(this.ht(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(cn(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Tl(e).j("collectionPathOverlayIndex",a))}),O.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Mr(),o=cn(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Tl(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=a_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Mr(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Tl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,f)=>{let m=a_(this.serializer,l);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):f.done()}).next(()=>o)}ht(e,n){return Tl(e).put(function(i,o,s){let[a,c,l]=XA(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ql(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Tl(t){return Lt(t,"documentOverlays")}var mi=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(lt(e.integerValue));else if("doubleValue"in e){let r=lt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Ll(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=vi(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(ho(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?$x(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ne()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Y.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};mi.bt=new mi;function m$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function rx(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=m$(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var K_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=rx(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=rx(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Q_=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Y_=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Is=class{constructor(){this.Gt=new K_,this.zt=new Q_(this.Gt),this.jt=new Y_(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Ds=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function ro(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=ix(t.arrayValue,e.arrayValue),n!==0?n:(n=ix(t.directionalValue,e.directionalValue),n!==0?n:Y.comparator(t.documentKey,e.documentKey)))}function ix(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Zp=class{constructor(e){this.Yt=new qe((n,r)=>mt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(oe(e.collectionGroup===this.collectionId),this.en)return!1;let n=v_(e);if(n!==void 0&&!this.nn(n))return!1;let r=_s(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new qe(mt.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new _c(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new _c(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new _c(r.field,r.dir==="asc"?0:1)));return new Dc(Dc.UNKNOWN_ID,this.collectionId,n,Vl.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function SM(t){var e,n;if(oe(t instanceof xe||t instanceof $e),t instanceof xe){if(t instanceof Up){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>xe.create(t.field,"==",o)))||[];return $e.create(i,"or")}return t}let r=t.filters.map(i=>SM(i));return $e.create(r,t.op)}function y$(t){if(t.getFilters().length===0)return[];let e=X_(SM(t));return oe(AM(e)),Z_(e)||J_(e)?[e]:e.getFilters()}function Z_(t){return t instanceof xe}function J_(t){return t instanceof $e&&fb(t)}function AM(t){return Z_(t)||J_(t)||function(n){if(n instanceof $e&&T_(n)){for(let r of n.getFilters())if(!Z_(r)&&!J_(r))return!1;return!0}return!1}(t)}function X_(t){if(oe(t instanceof xe||t instanceof $e),t instanceof xe)return t;if(t.filters.length===1)return X_(t.filters[0]);let e=t.filters.map(r=>X_(r)),n=$e.create(e,t.op);return n=Jp(n),AM(n)?n:(oe(n instanceof $e),oe(Tc(n)),oe(n.filters.length>1),n.filters.reduce((r,i)=>vb(r,i)))}function vb(t,e){let n;return oe(t instanceof xe||t instanceof $e),oe(e instanceof xe||e instanceof $e),n=t instanceof xe?e instanceof xe?function(i,o){return $e.create([i,o],"and")}(t,e):ox(t,e):e instanceof xe?ox(e,t):function(i,o){if(oe(i.filters.length>0&&o.filters.length>0),Tc(i)&&Tc(o))return Gx(i,o.getFilters());let s=T_(i)?i:o,a=T_(i)?o:i,c=s.filters.map(l=>vb(l,a));return $e.create(c,"or")}(t,e),Jp(n)}function ox(t,e){if(Tc(e))return Gx(e,t.getFilters());{let n=e.filters.map(r=>vb(t,r));return $e.create(n,"or")}}function Jp(t){if(oe(t instanceof xe||t instanceof $e),t instanceof xe)return t;let e=t.getFilters();if(e.length===1)return Jp(e[0]);if(zx(t))return t;let n=e.map(i=>Jp(i)),r=[];return n.forEach(i=>{i instanceof xe?r.push(i):i instanceof $e&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:$e.create(r,t.op)}var eE=class{constructor(){this._n=new Yl}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve($n.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve($n.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},Yl=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(ke.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(ke.comparator)).toArray()}};var Ip=new Uint8Array(0),tE=class{constructor(e,n){this.databaseId=n,this.an=new Yl,this.un=new Fr(r=>Ms(r),(r,i)=>sd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:cn(i)};return sx(e).put(o)}return O.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[xx(n),""],!1,!0);return sx(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(xr(s.parent))}return r})}addFieldIndex(e,n){let r=Sl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=hc(e);return o.next(a=>{s.put(ex(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Sl(e),i=hc(e),o=dc(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Sl(e),r=dc(e),i=hc(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return O.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Zp(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=dc(e),i=!0,o=new Map;return O.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ve(),a=[];return O.forEach(o,(c,l)=>{U("IndexedDbIndexManager",`Using index ${function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map(re=>`${re.fieldPath}:${re.kind}`).join(",")}`}(c)} to execute ${Ms(n)}`);let f=function($,re){let le=v_(re);if(le===void 0)return null;for(let se of Hp($,le.fieldPath))switch(se.op){case"array-contains-any":return se.value.arrayValue.values||[];case"array-contains":return[se.value]}return null}(l,c),m=function($,re){let le=new Map;for(let se of _s(re))for(let T of Hp($,se.fieldPath))switch(T.op){case"==":case"in":le.set(se.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return le.set(se.fieldPath.canonicalString(),T.value),Array.from(le.values())}return null}(l,c),w=function($,re){let le=[],se=!0;for(let T of _s(re)){let I=T.kind===0?jA($,T.fieldPath,$.startAt):BA($,T.fieldPath,$.startAt);le.push(I.value),se&&(se=I.inclusive)}return new Or(le,se)}(l,c),E=function($,re){let le=[],se=!0;for(let T of _s(re)){let I=T.kind===0?BA($,T.fieldPath,$.endAt):jA($,T.fieldPath,$.endAt);le.push(I.value),se&&(se=I.inclusive)}return new Or(le,se)}(l,c),M=this.hn(c,l,w),P=this.hn(c,l,E),N=this.Pn(c,l,m),H=this.In(c.indexId,f,M,w.inclusive,P,E.inclusive,N);return O.forEach(H,X=>r.G(X,n.limit).next($=>{$.forEach(re=>{let le=Y.fromSegments(re.documentKey);s.has(le)||(s=s.add(le),a.push(le))})}))}).next(()=>a)}return O.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=y$($e.create(e.filters,"and")).map(r=>O_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),l=c/(n!=null?n.length:1),f=[];for(let m=0;m<c;++m){let w=n?this.Tn(n[m/l]):Ip,E=this.En(e,w,r[m%l],i),M=this.dn(e,w,o[m%l],s),P=a.map(N=>this.En(e,w,N,!0));f.push(...this.createRange(E,M,P))}return f}En(e,n,r,i){let o=new Ds(e,Y.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new Ds(e,Y.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new Zp(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return O.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new qe(mt.comparator),f=!1;for(let m of c.filters)for(let w of m.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?f=!0:l=l.add(w.field));for(let m of c.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new Is;for(let i of _s(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);mi.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new Is;return mi.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Is;return mi.bt.Pt(As(this.databaseId,n),r.Ht(function(o){let s=_s(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Is);let o=0;for(let s of _s(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&$l(a))i=this.mn(i,s,a);else{let l=c.Ht(s.kind);mi.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Is;c.seed(a.Wt()),mi.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof xe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Sl(e),i=hc(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return O.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(f,m){let w=m?new Vl(m.sequenceNumber,new $n(Ps(m.readTime),new Y(xr(m.documentKey)),m.largestBatchId)):Vl.empty(),E=f.fields.map(([M,P])=>new _c(mt.fromServerFormat(M),P));return new Dc(f.indexId,f.collectionGroup,E,w)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ye(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Sl(e),o=hc(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,c=>o.put(ex(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return O.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?O.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,c=>this.pn(e,i,c).next(l=>{let f=this.yn(o,c);return l.isEqual(f)?O.resolve():this.wn(e,o,c,l,f)}))))})}Sn(e,n,r,i){return dc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return dc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=dc(e),o=new qe(ro);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Ds(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new qe(ro),i=this.An(n,e);if(i==null)return r;let o=v_(n);if(o!=null){let s=e.data.field(o.fieldPath);if($l(s))for(let a of s.arrayValue.values||[])r=r.add(new Ds(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Ds(n.indexId,e.key,Ip,i));return r}wn(e,n,r,i,o){U("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,f,m,w){let E=c.getIterator(),M=l.getIterator(),P=lc(E),N=lc(M);for(;P||N;){let H=!1,X=!1;if(P&&N){let $=f(P,N);$<0?X=!0:$>0&&(H=!0)}else P!=null?X=!0:H=!0;H?(m(N),N=lc(M)):X?(w(P),P=lc(E)):(P=lc(E),N=lc(M))}}(i,o,ro,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),O.waitFor(s)}gn(e){let n=1;return hc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>ro(s,a)).filter((s,a,c)=>!a||ro(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ro(s,e),c=ro(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Ip,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Ip,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return ro(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ax)}getMinOffset(e,n){return O.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||ne())).next(ax)}};function sx(t){return Lt(t,"collectionParents")}function dc(t){return Lt(t,"indexEntries")}function Sl(t){return Lt(t,"indexConfiguration")}function hc(t){return Lt(t,"indexState")}function ax(t){oe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;lb(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new $n(e.readTime,e.documentKey,n)}var cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function xM(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:s},(f,m,w)=>(a++,w.delete()));o.push(c.next(()=>{oe(a===1)}));let l=[];for(let f of n.mutations){let m=Ox(e,f.key.path,n.batchId);o.push(i.delete(m)),l.push(f.key)}return O.waitFor(o).next(()=>l)}function Xp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne();e=t.noDocument}return JSON.stringify(e).length}Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(41943040,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);var eg=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){oe(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return io(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=vc(e),s=io(e);return s.add({}).next(a=>{oe(typeof a=="number");let c=new zl(a,n,r,i),l=function(E,M,P){let N=P.baseMutations.map(X=>Ql(E.ct,X)),H=P.mutations.map(X=>Ql(E.ct,X));return{userId:M,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:N,mutations:H}}(this.serializer,this.userId,c),f=[],m=new qe((w,E)=>ye(w.canonicalString(),E.canonicalString()));for(let w of i){let E=Ox(this.userId,w.key.path,a);m=m.add(w.key.path.popLast()),f.push(s.put(l)),f.push(o.put(E,DU))}return m.forEach(w=>{f.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),O.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return io(e).get(n).next(r=>r?(oe(r.userId===this.userId),bs(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?O.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return io(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=r),o=bs(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return io(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return io(e).U("userMutationsIndex",n).next(r=>r.map(i=>bs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Sp(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return vc(e).J({range:i},(s,a,c)=>{let[l,f,m]=s,w=xr(f);if(l===this.userId&&n.path.isEqual(w))return io(e).get(m).next(E=>{if(!E)throw ne();oe(E.userId===this.userId),o.push(bs(this.serializer,E))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ye),i=[];return n.forEach(o=>{let s=Sp(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=vc(e).J({range:a},(l,f,m)=>{let[w,E,M]=l,P=xr(E);w===this.userId&&o.path.isEqual(P)?r=r.add(M):m.done()});i.push(c)}),O.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Sp(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new qe(ye);return vc(e).J({range:s},(c,l,f)=>{let[m,w,E]=c,M=xr(w);m===this.userId&&r.isPrefixOf(M)?M.length===i&&(a=a.add(E)):f.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(io(e).get(o).next(s=>{if(s===null)throw ne();oe(s.userId===this.userId),r.push(bs(this.serializer,s))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return xM(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return vc(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=xr(o[1]);i.push(c)}else a.done()}).next(()=>{oe(i.length===0)})})}containsKey(e,n){return MM(e,this.userId,n)}xn(e){return RM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function MM(t,e,n){let r=Sp(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return vc(t).J({range:o,H:!0},(a,c,l)=>{let[f,m,w]=a;f===e&&m===i&&(s=!0),l.done()}).next(()=>s)}function io(t){return Lt(t,"mutations")}function vc(t){return Lt(t,"documentMutations")}function RM(t){return Lt(t,"mutationQueues")}var Rc=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var nE=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new Rc(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ae.fromTimestamp(new it(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>fc(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(oe(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return fc(e).J((s,a)=>{let c=Rl(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(o)).next(()=>i)}forEachTarget(e,n){return fc(e).J((r,i)=>{let o=Rl(i);n(o)})}Bn(e){return ux(e).get("targetGlobalKey").next(n=>(oe(n!==null),n))}kn(e,n){return ux(e).put("targetGlobalKey",n)}qn(e,n){return fc(e).put(TM(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Ms(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return fc(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Rl(a);sd(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=oo(e);return n.forEach(s=>{let a=cn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),O.waitFor(i)}removeMatchingKeys(e,n,r){let i=oo(e);return O.forEach(n,o=>{let s=cn(o.path);return O.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=oo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=oo(e),o=ve();return i.J({range:r,H:!0},(s,a,c)=>{let l=xr(s[1]),f=new Y(l);o=o.add(f)}).next(()=>o)}containsKey(e,n){let r=cn(n.path),i=IDBKeyRange.bound([r],[xx(r)],!1,!0),o=0;return oo(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,n){return fc(e).get(n).next(r=>r?Rl(r):null)}};function fc(t){return Lt(t,"targets")}function ux(t){return Lt(t,"targetGlobal")}function oo(t){return Lt(t,"targetDocuments")}function lx([t,e],[n,r]){let i=ye(t,n);return i===0?ye(e,r):i}var rE=class{constructor(e){this.Kn=e,this.buffer=new qe(lx),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();lx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},iE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){U("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>k(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?U("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield _o(n)}yield this.zn(3e5)}))}},oE=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Tn.oe);let r=new rE(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(cx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cx):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,n))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),pc()<=vr.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(l-c)+`ms
Total Duration: ${l-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}};function v$(t,e){return new oE(t,e)}var sE=class{constructor(e,n){this.db=e,this.garbageCollector=v$(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Dp(e,r)}removeReference(e,n,r){return Dp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Dp(e,n)}er(e,n){return function(i,o){let s=!1;return RM(i).Y(a=>MM(i,a,o).next(c=>(c&&(s=!0),O.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ae.min()),oo(e).delete(function(m){return[0,cn(m.path)]}(s))))});i.push(c)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Dp(e,n)}Xn(e,n){let r=oo(e),i,o=Tn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Tn.oe&&n(new Y(xr(i)),o),o=l,i=c):o=Tn.oe}).next(()=>{o!==Tn.oe&&n(new Y(xr(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Dp(t,e){return oo(t).put(function(r,i){return{targetId:0,path:cn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var tg=class{constructor(){this.changes=new Fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var aE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ws(e).put(r)}removeEntry(e,n,r){return ws(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Qp(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Tt.newInvalidDocument(n);return ws(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Al(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Tt.newInvalidDocument(n)};return ws(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Al(n))},(i,o)=>{r={document:this.nr(n,o),size:Xp(o)}}).next(()=>r)}getEntries(e,n){let r=wn();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=wn(),i=new Ye(Y.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Xp(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return O.resolve();let i=new qe(fx);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Al(i.first()),Al(i.last())),s=i.getIterator(),a=s.getNext();return ws(e).J({index:"documentKeyIndex",range:o},(c,l,f)=>{let m=Y.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&fx(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?f.$(Al(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Qp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ws(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let f=wn();for(let m of l){let w=this.nr(Y.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);w.isFoundDocument()&&(cd(n,w)||i.has(w.key))&&(f=f.insert(w.key,w))}return f})}getAllFromCollectionGroup(e,n,r,i){let o=wn(),s=hx(n,r),a=hx(n,$n.max());return ws(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,f)=>{let m=this.nr(Y.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(m.key,m),o.size===i&&f.done()}).next(()=>o)}newChangeBuffer(e){return new cE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return dx(e).get("remoteDocumentGlobalKey").next(n=>(oe(!!n),n))}tr(e,n){return dx(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=g$(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return Tt.newInvalidDocument(e)}};function NM(t){return new aE(t)}var cE=class extends tg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Fr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new qe((o,s)=>ye(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=JA(this.ar.serializer,s);i=i.add(o.path.popLast());let l=Xp(c);r+=l-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=JA(this.ar.serializer,s.convertToNoDocument(ae.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function dx(t){return Lt(t,"remoteDocumentGlobal")}function ws(t){return Lt(t,"remoteDocumentsV14")}function Al(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hx(t,e){let n=e.documentKey.path.toArray();return[t,Qp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function fx(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=ye(n[o],r[o]),i)return i;return i=ye(n.length,r.length),i||(i=ye(n[n.length-2],r[r.length-2]),i||ye(n[n.length-1],r[r.length-1]))}var uE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ng=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&kl(r.mutation,i,Sn.empty(),it.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){let i=Mr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ml();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Mr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=wn(),s=Pl(),a=function(){return Pl()}();return n.forEach((c,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof cr)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),kl(f.mutation,l,f.mutation.getFieldMask(),it.now())):s.set(l.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>{var m;return a.set(l,new uE(f,(m=s.get(l))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Pl(),i=new Ye((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let f=r.get(c)||Sn.empty();f=a.applyToLocalView(l,f),r.set(c,f);let m=(i.get(a.batchId)||ve()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,f=c.value,m=tM();f.forEach(w=>{if(!o.has(w)){let E=uM(n.get(w),r.get(w));E!==null&&m.set(w,E),o=o.add(w)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,m))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(Mr()),a=-1,c=o;return s.next(l=>O.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(w=>{c=c.insert(f,w)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ve())).next(f=>({batchId:a,changes:eM(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Ml();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ml();return this.indexManager.getCollectionParents(e,o).next(a=>O.forEach(a,c=>{let l=function(m,w){return new ar(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,w)=>{s=s.insert(m,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Tt.newInvalidDocument(f)))});let a=Ml();return s.forEach((c,l)=>{let f=o.get(c);f!==void 0&&kl(f.mutation,l,Sn.empty(),it.now()),cd(n,l)&&(a=a.insert(c,l))}),a})}};var lE=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yt(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:yb(i.bundledQuery),readTime:yt(i.readTime)}}(n)),O.resolve()}};var dE=class{constructor(){this.overlays=new Ye(Y.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Mr();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=Mr(),o=n.length+1,s=new Y(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ye((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=Mr(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=Mr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ql(n,r));let o=this.hr.get(n);o===void 0&&(o=ve(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var Zl=class{constructor(){this.Pr=new qe(It.Ir),this.Tr=new qe(It.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new It(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new It(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new Y(new ke([])),r=new It(n,e),i=new It(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new Y(new ke([])),r=new It(n,e),i=new It(n,e+1),o=ve();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new It(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},It=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Y.comparator(e.key,n.key)||ye(e.pr,n.pr)}static Er(e,n){return ye(e.pr,n.pr)||Y.comparator(e.key,n.key)}};var hE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new qe(It.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new zl(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new It(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new It(n,0),i=new It(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ye);return n.forEach(i=>{let o=new It(i,0),s=new It(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;Y.isDocumentKey(o)||(o=o.child(""));let s=new It(new Y(o),0),a=new qe(ye);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),O.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,i=>{let o=new It(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new It(n,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var fE=class{constructor(e){this.vr=e,this.docs=function(){return new Ye(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=wn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Tt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=wn(),s=n.path,a=new Y(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:f}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||lb(Rx(f),r)<=0||(i.has(f.key)||cd(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ne()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pE(this)}getSize(e){return O.resolve(this.size)}},pE=class extends tg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var gE=class{constructor(e){this.persistence=e,this.Mr=new Fr(n=>Ms(n),sd),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Zl,this.targetCount=0,this.Lr=Rc.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Rc(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}};var rg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Tn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new gE(this),this.indexManager=new eE,this.remoteDocumentCache=function(i){return new fE(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Kp(n),this.$r=new lE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new hE(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);let i=new mE(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},mE=class extends Fp{constructor(e){super(),this.currentSequenceNumber=e}},ig=class t{constructor(e){this.persistence=e,this.zr=new Zl,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ne()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{let i=Y.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,ae.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var yE=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new Vp("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MA,{unique:!0}),c.createObjectStore("documentMutations")}(e),px(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=O.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),px(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(f=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",MA,{unique:!0});let m=l.store("mutations"),w=f.map(E=>m.put(E));return O.waitFor(w)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:FU});l.createIndex("collectionPathOverlayIndex",VU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",LU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:CU});l.createIndex("documentKeyIndex",TU),l.createIndex("collectionGroupIndex",SU)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:NU}).createIndex("sequenceNumberIndex",PU,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:kU}).createIndex("documentKeyIndex",OU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Xp(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>O.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>O.forEach(a,c=>{oe(c.userId===o.userId);let l=bs(this.serializer,c);return xM(e,o.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new ke(s),l=function(m){return[0,cn(m)]}(c);o.push(n.get(l).next(f=>f?O.resolve():(m=>n.put({targetId:0,path:cn(m),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:RU});let r=n.store("collectionParents"),i=new Yl,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:cn(c)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new ke(s);return o(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,c],l)=>{let f=xr(a);return o(f.popLast())}))}ri(e){let n=e.store("targets");return n.J((r,i)=>{let o=Rl(i),s=TM(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(m){return m.document?new Y(ke.fromString(m.document.name).popFirst(5)):m.noDocument?Y.fromSegments(m.noDocument.path):m.unknownDocument?Y.fromSegments(m.unknownDocument.path):ne()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>O.waitFor(i))}si(e,n){let r=n.store("mutations"),i=NM(this.serializer),o=new rg(ig.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let f=(l=a.get(c.userId))!==null&&l!==void 0?l:ve();bs(this.serializer,c).keys().forEach(m=>f=f.add(m)),a.set(c.userId,f)}),O.forEach(a,(c,l)=>{let f=new Dt(l),m=Yp.lt(this.serializer,f),w=o.getIndexManager(f),E=eg.lt(f,this.serializer,w,o.referenceDelegate);return new ng(i,E,m,w).recalculateAndSaveOverlaysForDocumentKeys(new jl(n,Tn.oe),c).next()})})}};function px(t){t.createObjectStore("targetDocuments",{keyPath:xU}).createIndex("documentTargetsIndex",MU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",AU,{unique:!0}),t.createObjectStore("targetGlobal")}var c_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vE=class t{constructor(e,n,r,i,o,s,a,c,l,f,m=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=f,this.ui=m,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=w=>Promise.resolve(),!t.D())throw new B(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sE(this,i),this.Ti=n+"main",this.serializer=new Kp(c),this.Ei=new lo(this.Ti,this.ui,new yE(this.serializer)),this.Qr=new nE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NM(this.serializer),this.$r=new W_,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,f===!1&&gt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(j.FAILED_PRECONDITION,c_);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Tn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>k(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>k(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>k(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Eo(e))return U("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return xl(e).get("owner").next(n=>O.resolve(this.Si(n)))}bi(e){return Cp(e).delete(this.clientId)}Di(){return k(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Lt(n,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return O.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?O.resolve(!0):xl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new B(j.FAILED_PRECONDITION,c_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cp(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&U("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return k(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new jl(e,Tn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Cp(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return eg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yp.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){U("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?BU:c===15?jx:c===14?Lx:c===13?Vx:c===12?jU:c===11?Fx:void ne()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new jl(a,this.kr?this.kr.next():Tn.oe),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new B(j.FAILED_PRECONDITION,Nx);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return xl(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(j.FAILED_PRECONDITION,c_)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xl(e).put("owner",n)}static D(){return lo.D()}yi(e){let n=xl(e);return n.get("owner").next(r=>this.Si(r)?(U("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(gt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;_m()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return U("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){gt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function xl(t){return Lt(t,"owner")}function Cp(t){return Lt(t,"clientMetadata")}function wb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var wE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ve(),i=ve();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var _E=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var og=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return _m()?8:Px(Cu())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new _E;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(pc()<=vr.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",gc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(pc()<=vr.DEBUG&&U("QueryEngine","Query:",gc(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(pc()<=vr.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",gc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):O.resolve())}ji(e,n){if(UA(n))return O.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=zp(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,s,c.readTime)?this.ji(e,zp(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return UA(n)||i.isEqual(ae.min())?O.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?O.resolve(null):(pc()<=vr.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gc(n)),this.es(e,s,n,Mx(i,-1)).next(a=>a))})}Zi(e,n){let r=new qe(Jx(e));return n.forEach((i,o)=>{cd(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return pc()<=vr.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",gc(n)),this.zi.getDocumentsMatchingQuery(e,n,$n.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var EE=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ye(ye),this.rs=new Fr(o=>Ms(o),sd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ng(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function PM(t,e,n,r){return new EE(t,e,n,r)}function kM(t,e){return k(this,null,function*(){let n=Z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ve();for(let l of i){s.push(l.batchId);for(let f of l.mutations)c=c.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function w$(t,e){let n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,f){let m=l.batch,w=m.keys(),E=O.resolve();return w.forEach(M=>{E=E.next(()=>f.getEntry(c,M)).next(P=>{let N=l.docVersions.get(M);oe(N!==null),P.version.compareTo(N)<0&&(m.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),f.addEntry(P)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function OM(t){let e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function _$(t,e){let n=Z(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((f,m)=>{let w=i.get(m);if(!w)return;a.push(n.Qr.removeMatchingKeys(o,f.removedDocuments,m).next(()=>n.Qr.addMatchingKeys(o,f.addedDocuments,m)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(Vt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),function(P,N,H){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(w,E,f)&&a.push(n.Qr.updateTargetData(o,E))});let c=wn(),l=ve();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(FM(o,s,e.documentUpdates).next(f=>{c=f.cs,l=f.ls})),!r.isEqual(ae.min())){let f=n.Qr.getLastRemoteSnapshotVersion(o).next(m=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return O.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ns=i,o))}function FM(t,e,n){let r=ve(),i=ve();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=wn();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function E$(t,e){let n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nc(t,e){let n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new Mc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Pc(t,e,n){return k(this,null,function*(){let r=Z(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Eo(s))throw s;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function sg(t,e,n){let r=Z(t),i=ae.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,f){let m=Z(c),w=m.rs.get(f);return w!==void 0?O.resolve(m.ns.get(w)):m.Qr.getTargetData(l,f)}(r,s,un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:ae.min(),n?o:ve())).next(a=>(jM(r,Zx(e),a),{documents:a,hs:o})))}function VM(t,e){let n=Z(t),r=Z(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function LM(t,e){let n=Z(t),r=n.ss.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Mx(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(jM(n,e,i),i))}function jM(t,e,n){let r=t.ss.get(e)||ae.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function b$(t,e,n,r){return k(this,null,function*(){let i=Z(t),o=ve(),s=wn();for(let l of n){let f=e.Ps(l.metadata.name);l.document&&(o=o.add(f));let m=e.Is(l);m.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(f,m)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield Nc(i,function(f){return un(Uc(ke.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>FM(l,a,s).next(f=>(a.apply(l),f)).next(f=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.cs,f.ls)).next(()=>f.cs)))})}function I$(r,i){return k(this,arguments,function*(t,e,n=ve()){let o=yield Nc(t,un(yb(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=yt(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(Vt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function gx(t,e){return`firestore_clients_${t}_${e}`}function mx(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function u_(t,e){return`firestore_targets_${t}_${e}`}var ag=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new B(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(gt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ol=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new B(r.error.code,r.error.message))),o?new t(e,r.state,i):(gt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},cg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=gb();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=kx(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(gt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},bE=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(gt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Jl=class{constructor(){this.activeTargetIds=gb()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Fl=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ye(ye),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=gx(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Jl),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return k(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(gx(this.persistenceKey,r));if(i){let o=cg.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(u_(this.persistenceKey,e));if(r){let i=Ol.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(u_(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return U("SharedClientState","READ",e,n),n}setItem(e,n){U("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){U("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(U("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>k(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=Tn.oe;if(o!=null)try{let a=JSON.parse(o);oe(typeof a=="number"),s=a}catch(a){gt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Tn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new ag(this.currentUser,e,n,r),o=mx(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let n=mx(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=u_(this.persistenceKey,e),o=new Ol(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return cg.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return ag.Es(new Dt(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return Ol.Es(i,n)}xs(e){return bE.Es(e)}Js(e){return JSON.parse(e)}zs(e){return k(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);U("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=gb();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},ug=class{constructor(){this.no=new Jl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Jl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var IE=class{io(e){}shutdown(){}};var lg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tp=null;function l_(){return Tp===null?Tp=function(){return 268435456+Math.round(2147483648*Math.random())}():Tp++,"0x"+Tp.toString(16)}var D$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var DE=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Wt="WebChannelConnection",CE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(n,r,i,o,s){let a=l_(),c=this.vo(n,r.toUriEncodedString());U("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(n,c,l,i).then(f=>(U("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw Un("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",c,"request:",i),f})}xo(n,r,i,o,s,a){return this.Co(n,r,i,o,s)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}vo(n,r){let i=D$[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let o=l_();return new Promise((s,a)=>{let c=new t_;c.setWithCredentials(!0),c.listenOnce(r_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Cl.NO_ERROR:let f=c.getResponseJson();U(Wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case Cl.TIMEOUT:U(Wt,`RPC '${e}' ${o} timed out`),a(new B(j.DEADLINE_EXCEEDED,"Request time out"));break;case Cl.HTTP_ERROR:let m=c.getStatus();if(U(Wt,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);let E=w?.error;if(E&&E.status&&E.message){let M=function(N){let H=N.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(H)>=0?H:j.UNKNOWN}(E.status);a(new B(M,E.message))}else a(new B(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(j.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{U(Wt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);U(Wt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=l_(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=s_(),a=o_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new n_({})),this.Fo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let f=o.join("");U(Wt,`Creating RPC '${e}' stream ${i}: ${f}`,c);let m=s.createWebChannel(f,c),w=!1,E=!1,M=new DE({lo:N=>{E?U(Wt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(w||(U(Wt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),w=!0),U(Wt,`RPC '${e}' stream ${i} sending:`,N),m.send(N))},ho:()=>m.close()}),P=(N,H,X)=>{N.listen(H,$=>{try{X($)}catch(re){setTimeout(()=>{throw re},0)}})};return P(m,uc.EventType.OPEN,()=>{E||(U(Wt,`RPC '${e}' stream ${i} transport opened.`),M.mo())}),P(m,uc.EventType.CLOSE,()=>{E||(E=!0,U(Wt,`RPC '${e}' stream ${i} transport closed`),M.po())}),P(m,uc.EventType.ERROR,N=>{E||(E=!0,Un(Wt,`RPC '${e}' stream ${i} transport errored:`,N),M.po(new B(j.UNAVAILABLE,"The operation could not be completed")))}),P(m,uc.EventType.MESSAGE,N=>{var H;if(!E){let X=N.data[0];oe(!!X);let $=X,re=$.error||((H=$[0])===null||H===void 0?void 0:H.error);if(re){U(Wt,`RPC '${e}' stream ${i} received error:`,re);let le=re.status,se=function(C){let S=bt[C];if(S!==void 0)return hM(S)}(le),T=re.message;se===void 0&&(se=j.INTERNAL,T="Unknown error status: "+le+" with message "+re.message),E=!0,M.po(new B(se,T)),m.close()}else U(Wt,`RPC '${e}' stream ${i} received:`,X),M.yo(X)}}),P(a,i_.STAT_EVENT,N=>{N.stat===bp.PROXY?U(Wt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===bp.NOPROXY&&U(Wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}};function BM(){return typeof window<"u"?window:null}function Rp(){return typeof document<"u"?document:null}function ud(t){return new $_(t,!0)}var Xl=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var dg=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Xl(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return k(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return k(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return k(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(gt(n.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new B(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>k(this,null,function*(){this.state=0,this.start()}))}c_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},TE=class extends dg{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=c$(this.serializer,e),r=function(o){if(!("targetChange"in o))return ae.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ae.min():s.readTime?yt(s.readTime):ae.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=q_(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=$p(c)?{documents:_M(o,c)}:{query:EM(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=pM(o,s.resumeToken);let l=H_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ae.min())>0){a.readTime=xc(o,s.snapshotVersion.toTimestamp());let l=H_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=l$(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=q_(this.serializer),n.removeTarget=e,this.i_(n)}},SE=class extends dg{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=u$(e.writeResults,e.commitTime),r=yt(e.commitTime);return this.listener.A_(r,n)}return oe(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=q_(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Ql(this.serializer,r))};this.i_(n)}};var AE=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,z_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(j.UNKNOWN,o.toString())})}xo(e,n,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,z_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(j.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},xE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(gt(n),this.y_=!1):U("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var ME=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>k(this,null,function*(){bo(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(c){return k(this,null,function*(){let l=Z(c);l.M_.add(4),yield $c(l),l.N_.set("Unknown"),l.M_.delete(4),yield ld(l)})}(this))}))}),this.N_=new xE(r,i)}};function ld(t){return k(this,null,function*(){if(bo(t))for(let e of t.x_)yield e(!0)})}function $c(t){return k(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Mg(t,e){let n=Z(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),bb(n)?Eb(n):zc(n).Xo()&&_b(n,e))}function kc(t,e){let n=Z(t),r=zc(n);n.F_.delete(e),r.Xo()&&UM(n,e),n.F_.size===0&&(r.Xo()?r.n_():bo(n)&&n.N_.set("Unknown"))}function _b(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zc(t).P_(e)}function UM(t,e){t.L_.xe(e),zc(t).I_(e)}function Eb(t){t.L_=new U_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),zc(t).start(),t.N_.w_()}function bb(t){return bo(t)&&!zc(t).Zo()&&t.F_.size>0}function bo(t){return Z(t).M_.size===0}function $M(t){t.L_=void 0}function C$(t){return k(this,null,function*(){t.N_.set("Online")})}function T$(t){return k(this,null,function*(){t.F_.forEach((e,n)=>{_b(t,e)})})}function S$(t,e){return k(this,null,function*(){$M(t),bb(t)?(t.N_.D_(e),Eb(t)):t.N_.set("Unknown")})}function A$(t,e,n){return k(this,null,function*(){if(t.N_.set("Online"),e instanceof Gp&&e.state===2&&e.cause)try{yield function(i,o){return k(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hg(t,r)}else if(e instanceof bc?t.L_.Ke(e):e instanceof qp?t.L_.He(e):t.L_.We(e),!n.isEqual(ae.min()))try{let r=yield OM(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let f=o.F_.get(l);f&&o.F_.set(l,f.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let f=o.F_.get(c);if(!f)return;o.F_.set(c,f.withResumeToken(Vt.EMPTY_BYTE_STRING,f.snapshotVersion)),UM(o,c);let m=new Mc(f.target,c,l,f.sequenceNumber);_b(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield hg(t,r)}})}function hg(t,e,n){return k(this,null,function*(){if(!Eo(e))throw e;t.M_.add(1),yield $c(t),t.N_.set("Offline"),n||(n=()=>OM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>k(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ld(t)}))})}function HM(t,e){return e().catch(n=>hg(t,n,e))}function Hc(t){return k(this,null,function*(){let e=Z(t),n=wo(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;x$(e);)try{let i=yield E$(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,M$(e,i)}catch(i){yield hg(e,i)}zM(e)&&qM(e)})}function x$(t){return bo(t)&&t.v_.length<10}function M$(t,e){t.v_.push(e);let n=wo(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function zM(t){return bo(t)&&!wo(t).Zo()&&t.v_.length>0}function qM(t){wo(t).start()}function R$(t){return k(this,null,function*(){wo(t).V_()})}function N$(t){return k(this,null,function*(){let e=wo(t);for(let n of t.v_)e.d_(n.mutations)})}function P$(t,e,n){return k(this,null,function*(){let r=t.v_.shift(),i=L_.from(r,e,n);yield HM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Hc(t)})}function k$(t,e){return k(this,null,function*(){e&&wo(t).E_&&(yield function(r,i){return k(this,null,function*(){if(function(s){return dM(s)&&s!==j.ABORTED}(i.code)){let o=r.v_.shift();wo(r).t_(),yield HM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Hc(r)}})}(t,e)),zM(t)&&qM(t)})}function yx(t,e){return k(this,null,function*(){let n=Z(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=bo(n);n.M_.add(3),yield $c(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ld(n)})}function RE(t,e){return k(this,null,function*(){let n=Z(t);e?(n.M_.delete(2),yield ld(n)):e||(n.M_.add(2),yield $c(n),n.N_.set("Unknown"))})}function zc(t){return t.B_||(t.B_=function(n,r,i){let o=Z(n);return o.f_(),new TE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:C$.bind(null,t),To:T$.bind(null,t),Ao:S$.bind(null,t),h_:A$.bind(null,t)}),t.x_.push(e=>k(this,null,function*(){e?(t.B_.t_(),bb(t)?Eb(t):t.N_.set("Unknown")):(yield t.B_.stop(),$M(t))}))),t.B_}function wo(t){return t.k_||(t.k_=function(n,r,i){let o=Z(n);return o.f_(),new SE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:R$.bind(null,t),Ao:k$.bind(null,t),R_:N$.bind(null,t),A_:P$.bind(null,t)}),t.x_.push(e=>k(this,null,function*(){e?(t.k_.t_(),yield Hc(t)):(yield t.k_.stop(),t.v_.length>0&&(U("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var NE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qc(t,e){if(gt("AsyncQueue",`${e}: ${t}`),Eo(t))return new B(j.UNAVAILABLE,`${e}: ${t}`);throw t}var fg=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Ml(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var pg=class{constructor(){this.q_=new Ye(Y.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ne():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Oc=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,fg.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var PE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},kE=class{constructor(){this.queries=new Fr(e=>Yx(e),ad),this.onlineState="Unknown",this.z_=new Set}};function Ib(t,e){return k(this,null,function*(){let n=Z(t),r=3,i=e.query,o=n.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new PE,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield n.onListen(i,!0);break;case 1:o.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=qc(s,`Initialization of query '${gc(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&Cb(n)})}function Db(t,e){return k(this,null,function*(){let n=Z(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function O$(t,e){let n=Z(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&Cb(n)}function F$(t,e,n){let r=Z(t),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(n);r.queries.delete(e)}function Cb(t){t.z_.forEach(e=>{e.next()})}var OE,vx;(vx=OE||(OE={})).J_="default",vx.Cache="cache";var ed=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Oc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Oc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==OE.Cache}};var FE=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var gg=class{constructor(e){this.serializer=e}Ps(e){return Nr(this.serializer,e)}Is(e){return e.metadata.exists?wM(this.serializer,e.document,!1):Tt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return yt(e)}},VE=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=GM(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=ke.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new gg(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||ve()).add(o);n.set(s,a)}}return n}complete(){return k(this,null,function*(){let e=yield b$(this.localStore,new gg(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield I$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function GM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var mg=class{constructor(e){this.key=e}},yg=class{constructor(e){this.key=e}},vg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ve(),this.mutatedKeys=ve(),this.Ia=Jx(e),this.Ta=new fg(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new pg,i=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{let w=i.get(f),E=cd(this.query,m)?m:null,M=!!w&&this.mutatedKeys.has(w.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),N=!1;w&&E?w.data.isEqual(E.data)?M!==P&&(r.track({type:3,doc:E}),N=!0):this.Ra(w,E)||(r.track({type:2,doc:E}),N=!0,(c&&this.Ia(E,c)>0||l&&this.Ia(E,l)<0)&&(a=!0)):!w&&E?(r.track({type:0,doc:E}),N=!0):w&&!E&&(r.track({type:1,doc:w}),N=!0,(c||l)&&(a=!0)),N&&(E?(s=s.add(E),o=P?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((f,m)=>function(E,M){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return P(E)-P(M)}(f.type,m.type)||this.Ia(f.doc,m.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,l=c!==this.ha;return this.ha=c,s.length!==0||l?{snapshot:new Oc(this.query,e.Ta,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new pg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ve(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new yg(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new mg(r))}),n}pa(e){this.la=e.hs,this.Pa=ve();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Oc.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},LE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},jE=class{constructor(e){this.key=e,this.wa=!1}},BE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Fr(a=>Yx(a),ad),this.Da=new Map,this.Ca=new Set,this.va=new Ye(Y.comparator),this.Fa=new Map,this.Ma=new Zl,this.xa={},this.Oa=new Map,this.Na=Rc.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function V$(t,e,n=!0){return k(this,null,function*(){let r=Rg(t),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield WM(r,e,n,!0),i})}function L$(t,e){return k(this,null,function*(){let n=Rg(t);yield WM(n,e,!0,!1)})}function WM(t,e,n,r){return k(this,null,function*(){let i=yield Nc(t.localStore,un(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield Tb(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Mg(t.remoteStore,i),a})}function Tb(t,e,n,r,i){return k(this,null,function*(){t.Ba=(m,w,E)=>function(P,N,H,X){return k(this,null,function*(){let $=N.view.da(H);$.Xi&&($=yield sg(P.localStore,N.query,!1).then(({documents:T})=>N.view.da(T,$)));let re=X&&X.targetChanges.get(N.targetId),le=X&&X.targetMismatches.get(N.targetId)!=null,se=N.view.applyChanges($,P.isPrimaryClient,re,le);return UE(P,N.targetId,se.fa),se.snapshot})}(t,m,w,E);let o=yield sg(t.localStore,e,!0),s=new vg(e,o.hs),a=s.da(o.documents),c=Wl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);UE(t,n,l.fa);let f=new LE(e,n,s);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function j$(t,e,n){return k(this,null,function*(){let r=Z(t),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!ad(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Pc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kc(r.remoteStore,i.targetId),Fc(r,i.targetId)}).catch(_o))):(Fc(r,i.targetId),yield Pc(r.localStore,i.targetId,!0))})}function B$(t,e){return k(this,null,function*(){let n=Z(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kc(n.remoteStore,r.targetId))})}function U$(t,e,n){return k(this,null,function*(){let r=Mb(t);try{let i=yield function(s,a){let c=Z(s),l=it.now(),f=a.reduce((E,M)=>E.add(M.key),ve()),m,w;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let M=wn(),P=ve();return c.os.getEntries(E,f).next(N=>{M=N,M.forEach((H,X)=>{X.isValidDocument()||(P=P.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,M)).next(N=>{m=N;let H=[];for(let X of a){let $=t$(X,m.get(X.key).overlayedDocument);$!=null&&H.push(new cr(X.key,$,Hx($.value.mapValue),dt.exists(!0)))}return c.mutationQueue.addMutationBatch(E,l,H,a)}).next(N=>{w=N;let H=N.applyToLocalDocumentSet(m,P);return c.documentOverlayCache.saveOverlays(E,N.batchId,H)})}).then(()=>({batchId:w.batchId,changes:eM(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.xa[s.currentUser.toKey()];l||(l=new Ye(ye)),l=l.insert(a,c),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Ii(r,i.changes),yield Hc(r.remoteStore)}catch(i){let o=qc(i,"Failed to persist write");n.reject(o)}})}function KM(t,e){return k(this,null,function*(){let n=Z(t);try{let r=yield _$(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Fa.get(o);s&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?oe(s.wa):i.removedDocuments.size>0&&(oe(s.wa),s.wa=!1))}),yield Ii(n,r,e)}catch(r){yield _o(r)}})}function wx(t,e,n){let r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=Z(s);c.onlineState=a;let l=!1;c.queries.forEach((f,m)=>{for(let w of m.U_)w.j_(a)&&(l=!0)}),l&&Cb(c)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $$(t,e,n){return k(this,null,function*(){let r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new Ye(Y.comparator);s=s.insert(o,Tt.newNoDocument(o,ae.min()));let a=ve().add(o),c=new Gl(ae.min(),new Map,new Ye(ye),s,a);yield KM(r,c),r.va=r.va.remove(o),r.Fa.delete(e),xb(r)}else yield Pc(r.localStore,e,!1).then(()=>Fc(r,e,n)).catch(_o)})}function H$(t,e){return k(this,null,function*(){let n=Z(t),r=e.batch.batchId;try{let i=yield w$(n.localStore,e);Ab(n,r,null),Sb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ii(n,i)}catch(i){yield _o(i)}})}function z$(t,e,n){return k(this,null,function*(){let r=Z(t);try{let i=yield function(s,a){let c=Z(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return c.mutationQueue.lookupMutationBatch(l,a).next(m=>(oe(m!==null),f=m.keys(),c.mutationQueue.removeMutationBatch(l,m))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>c.localDocuments.getDocuments(l,f))})}(r.localStore,e);Ab(r,e,n),Sb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ii(r,i)}catch(i){yield _o(i)}})}function q$(t,e){return k(this,null,function*(){let n=Z(t);bo(n.remoteStore)||U("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=Z(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=qc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Sb(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function Ab(t,e,n){let r=Z(t),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Fc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||QM(t,r)})}function QM(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(kc(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),xb(t))}function UE(t,e,n){for(let r of n)r instanceof mg?(t.Ma.addReference(r.key,e),G$(t,r)):r instanceof yg?(U("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||QM(t,r.key)):ne()}function G$(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(U("SyncEngine","New document in limbo: "+n),t.Ca.add(r),xb(t))}function xb(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new Y(ke.fromString(e)),r=t.Na.next();t.Fa.set(r,new jE(n)),t.va=t.va.insert(n,r),Mg(t.remoteStore,new Mc(un(Uc(n.path)),r,"TargetPurposeLimboResolution",Tn.oe))}}function Ii(t,e,n){return k(this,null,function*(){let r=Z(t),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{s.push(r.Ba(c,e,n).then(l=>{var f;if((l||n)&&r.isPrimaryClient){let m=l?!l.fromCache:(f=n?.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(l){i.push(l);let m=wE.Ki(c.targetId,l);o.push(m)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(c,l){return k(this,null,function*(){let f=Z(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(l,w=>O.forEach(w.qi,E=>f.persistence.referenceDelegate.addReference(m,w.targetId,E)).next(()=>O.forEach(w.Qi,E=>f.persistence.referenceDelegate.removeReference(m,w.targetId,E)))))}catch(m){if(!Eo(m))throw m;U("LocalStore","Failed to update sequence numbers: "+m)}for(let m of l){let w=m.targetId;if(!m.fromCache){let E=f.ns.get(w),M=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(M);f.ns=f.ns.insert(w,P)}}})}(r.localStore,o))})}function W$(t,e){return k(this,null,function*(){let n=Z(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield kM(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(c=>{c.reject(new B(j.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ii(n,r.us)}})}function K$(t,e){let n=Z(t),r=n.Fa.get(e);if(r&&r.wa)return ve().add(r.key);{let i=ve(),o=n.Da.get(e);if(!o)return i;for(let s of o){let a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function Q$(t,e){return k(this,null,function*(){let n=Z(t),r=yield sg(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&UE(n,e.targetId,i.fa),i})}function Y$(t,e){return k(this,null,function*(){let n=Z(t);return LM(n.localStore,e).then(r=>Ii(n,r))})}function Z$(t,e,n,r){return k(this,null,function*(){let i=Z(t),o=yield function(a,c){let l=Z(a),f=Z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.vn(m,c).next(w=>w?l.localDocuments.getDocuments(m,w):O.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield Hc(i.remoteStore):n==="acknowledged"||n==="rejected"?(Ab(i,e,r||null),Sb(i,e),function(a,c){Z(Z(a).mutationQueue).Mn(c)}(i.localStore,e)):ne(),yield Ii(i,o)):U("SyncEngine","Cannot apply mutation batch with id: "+e)})}function J$(t,e){return k(this,null,function*(){let n=Z(t);if(Rg(n),Mb(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield _x(n,r.toArray());n.La=!0,yield RE(n.remoteStore,!0);for(let o of i)Mg(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Fc(n,s),Pc(n.localStore,s,!0))),kc(n.remoteStore,s)}),yield i,yield _x(n,r),function(s){let a=Z(s);a.Fa.forEach((c,l)=>{kc(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new Ye(Y.comparator)}(n),n.La=!1,yield RE(n.remoteStore,!1)}})}function _x(t,e,n){return k(this,null,function*(){let r=Z(t),i=[],o=[];for(let s of e){let a,c=r.Da.get(s);if(c&&c.length!==0){a=yield Nc(r.localStore,un(c[0]));for(let l of c){let f=r.ba.get(l),m=yield Q$(r,f);m.snapshot&&o.push(m.snapshot)}}else{let l=yield VM(r.localStore,s);a=yield Nc(r.localStore,l),yield Tb(r,YM(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function YM(t){return Qx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function X$(t){return function(n){return Z(Z(n).persistence).Bi()}(Z(t).localStore)}function eH(t,e,n,r){return k(this,null,function*(){let i=Z(t);if(i.La)return void U("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield LM(i.localStore,Zx(o[0])),a=Gl.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Vt.EMPTY_BYTE_STRING);yield Ii(i,s,a);break}case"rejected":yield Pc(i.localStore,e,!0),Fc(i,e,r);break;default:ne()}})}function tH(t,e,n){return k(this,null,function*(){let r=Rg(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){U("SyncEngine","Adding an already active target "+i);continue}let o=yield VM(r.localStore,i),s=yield Nc(r.localStore,o);yield Tb(r,YM(o),s.targetId,!1,s.resumeToken),Mg(r.remoteStore,s)}for(let i of n)r.Da.has(i)&&(yield Pc(r.localStore,i,!1).then(()=>{kc(r.remoteStore,i),Fc(r,i)}).catch(_o))}})}function Rg(t){let e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$$.bind(null,e),e.Sa.h_=O$.bind(null,e.eventManager),e.Sa.ka=F$.bind(null,e.eventManager),e}function Mb(t){let e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=z$.bind(null,e),e}function nH(t,e,n){let r=Z(t);(function(o,s,a){return k(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(E,M){let P=Z(E),N=yt(M.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",H=>P.$r.getBundleMetadata(H,M.id)).then(H=>!!H&&H.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(GM(c));let l=new VE(c,o.localStore,s.serializer),f=yield s.qa();for(;f;){let w=yield l._a(f);w&&a._updateProgress(w),f=yield s.qa()}let m=yield l.complete();return yield Ii(o,m.ca,void 0),yield function(E,M){let P=Z(E);return P.persistence.runTransaction("Save bundle","readwrite",N=>P.$r.saveBundleMetadata(N,M))}(o.localStore,c),a._completeWith(m.progress),Promise.resolve(m.ua)}catch(c){return Un("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var td=class{constructor(){this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){this.serializer=ud(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return PM(this.persistence,new og,e.initialUser,this.serializer)}createPersistence(e){return new rg(ig.Hr,this.serializer)}createSharedClientState(e){return new ug}terminate(){return k(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var wg=class t extends td{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){yield vm(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield Mb(this.Qa.syncEngine),yield Hc(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return PM(this.persistence,new og,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new iE(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new b_(n,this.persistence);return new E_(e.asyncQueue,r)}createPersistence(e){let n=wb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new vE(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,BM(),Rp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new ug}},$E=class t extends wg{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return k(this,null,function*(){yield vm(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Fl&&(this.sharedClientState.syncEngine={Zs:Z$.bind(null,n),Xs:eH.bind(null,n),eo:tH.bind(null,n),Bi:X$.bind(null,n),Ys:Y$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>k(this,null,function*(){yield J$(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=BM();if(!Fl.D(n))throw new B(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=wb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fl(n,e.asyncQueue,r,e.clientId,e.initialUser)}},nd=class{initialize(e,n){return k(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=W$.bind(null,this.syncEngine),yield RE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new kE}()}createDatastore(e){let n=ud(e.databaseInfo.databaseId),r=function(o){return new CE(o)}(e.databaseInfo);return function(o,s,a,c){return new AE(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new ME(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>wx(this.syncEngine,n,0),function(){return lg.D()?new lg:new IE}())}createSyncEngine(e,n){return function(i,o,s,a,c,l,f){let m=new BE(i,o,s,a,c,l);return f&&(m.La=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return k(this,null,function*(){var e;yield function(r){return k(this,null,function*(){let i=Z(r);U("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield $c(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function Ex(t,e=10240){let n=0;return{read(){return k(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return k(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Vc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):gt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var HE=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Ct,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return k(this,null,function*(){return this.metadata.promise})}qa(){return k(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return k(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new FE(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return k(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return k(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return k(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var zE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return k(this,null,function*(){let s=Z(i),a={documents:o.map(m=>Kl(s.serializer,m))},c=yield s.xo("BatchGetDocuments",s.serializer.databaseId,ke.emptyPath(),a,o.length),l=new Map;c.forEach(m=>{let w=a$(s.serializer,m);l.set(w.key.toString(),w)});let f=[];return o.forEach(m=>{let w=l.get(m.toString());oe(!!w),f.push(w)}),f})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=Y.fromPath(r);this.mutations.push(new Hl(i,this.precondition(i)))}),yield function(r,i){return k(this,null,function*(){let o=Z(r),s={writes:i.map(a=>Ql(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,ke.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ne();n=ae.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new B(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ae.min())?dt.exists(!1):dt.updateTime(n):dt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ae.min()))throw new B(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dt.updateTime(n)}return dt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var qE=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new Xl(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>k(this,null,function*(){let e=new zE(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!od(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!dM(n)}return!1}};var GE=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Dt.UNAUTHENTICATED,this.clientId=kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>k(this,null,function*(){U("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(U("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=qc(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Np(t,e){return k(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>k(this,null,function*(){r.isEqual(i)||(yield kM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function WE(t,e){return k(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Rb(t);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yx(e.remoteStore,i)),t._onlineComponents=e})}function ZM(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Rb(t){return k(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Np(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!ZM(n))throw n;Un("Error using user provided cache. Falling back to memory cache: "+n),yield Np(t,new td)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield Np(t,new td);return t._offlineComponents})}function Ng(t){return k(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield WE(t,t._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield WE(t,new nd))),t._onlineComponents})}function JM(t){return Rb(t).then(e=>e.persistence)}function Nb(t){return Rb(t).then(e=>e.localStore)}function XM(t){return Ng(t).then(e=>e.remoteStore)}function Pb(t){return Ng(t).then(e=>e.syncEngine)}function rH(t){return Ng(t).then(e=>e.datastore)}function Lc(t){return k(this,null,function*(){let e=yield Ng(t),n=e.eventManager;return n.onListen=V$.bind(null,e.syncEngine),n.onUnlisten=j$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=L$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=B$.bind(null,e.syncEngine),n})}function iH(t){return t.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield JM(t),n=yield XM(t);return e.setNetworkEnabled(!0),function(i){let o=Z(i);return o.M_.delete(0),ld(o)}(n)}))}function oH(t){return t.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield JM(t),n=yield XM(t);return e.setNetworkEnabled(!1),function(i){return k(this,null,function*(){let o=Z(i);o.M_.add(0),yield $c(o),o.N_.set("Offline")})}(n)}))}function sH(t,e){let n=new Ct;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o,s){return k(this,null,function*(){try{let a=yield function(l,f){let m=Z(l);return m.persistence.runTransaction("read document","readonly",w=>m.localDocuments.getDocument(w,f))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new B(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=qc(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Nb(t),e,n)})),n.promise}function eR(t,e,n={}){let r=new Ct;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,a,c,l){let f=new Vc({next:w=>{s.enqueueAndForget(()=>Db(o,m));let E=w.docs.has(a);!E&&w.fromCache?l.reject(new B(j.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&c&&c.source==="server"?l.reject(new B(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(w)},error:w=>l.reject(w)}),m=new ed(Uc(a.path),f,{includeMetadataChanges:!0,ra:!0});return Ib(o,m)}(yield Lc(t),t.asyncQueue,e,n,r)})),r.promise}function aH(t,e){let n=new Ct;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o,s){return k(this,null,function*(){try{let a=yield sg(i,o,!0),c=new vg(o,a.hs),l=c.da(a.documents),f=c.applyChanges(l,!1);s.resolve(f.snapshot)}catch(a){let c=qc(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Nb(t),e,n)})),n.promise}function tR(t,e,n={}){let r=new Ct;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,a,c,l){let f=new Vc({next:w=>{s.enqueueAndForget(()=>Db(o,m)),w.fromCache&&c.source==="server"?l.reject(new B(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(w)},error:w=>l.reject(w)}),m=new ed(a,f,{includeMetadataChanges:!0,ra:!0});return Ib(o,m)}(yield Lc(t),t.asyncQueue,e,n,r)})),r.promise}function cH(t,e){let n=new Vc(e);return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o){Z(i).z_.add(o),o.next()}(yield Lc(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(i,o){Z(i).z_.delete(o)}(yield Lc(t),n)}))}}function uH(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?fM().encode(s):s,function(f,m){return new HE(f,m)}(function(f,m){if(f instanceof Uint8Array)return Ex(f,m);if(f instanceof ArrayBuffer)return Ex(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,ud(e));t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){nH(yield Pb(t),i,r)}))}function lH(t,e){return t.asyncQueue.enqueue(()=>k(this,null,function*(){return function(r,i){let o=Z(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield Nb(t),e)}))}function nR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var bx=new Map;function kb(t,e,n){if(!n)throw new B(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ob(t,e,n,r){if(e===!0&&r===!0)throw new B(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ix(t){if(!Y.isDocumentKey(t))throw new B(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dx(t){if(Y.isDocumentKey(t))throw new B(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Oe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Pg(t);throw new B(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function rR(t,e){if(e<=0)throw new B(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var _g=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ob("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ks=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _g({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _g(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new d_;switch(r.type){case"firstParty":return new g_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=bx.get(n);r&&(U("ComponentProvider","Removing Datastore"),bx.delete(n),r.terminate())}(this),Promise.resolve()}};function iR(t,e,n,r={}){var i;let o=(t=Oe(t,ks))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Dt.MOCK_USER;else{a=$I(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Dt(l)}t._authCredentials=new h_(new Pp(a,c))}}var Ht=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ke=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Pr=class t extends Ht{constructor(e,n,r){super(e,n,Uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ke(this.firestore,null,new Y(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Fb(t,e,...n){if(t=tt(t),kb("collection","path",e),t instanceof ks){let r=ke.fromString(e,...n);return Dx(r),new Pr(t,null,r)}{if(!(t instanceof Ke||t instanceof Pr))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ke.fromString(e,...n));return Dx(r),new Pr(t.firestore,null,r)}}function oR(t,e){if(t=Oe(t,ks),kb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(j.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ht(t,null,function(r){return new ar(ke.emptyPath(),r)}(e))}function dd(t,e,...n){if(t=tt(t),arguments.length===1&&(e=kp.newId()),kb("doc","path",e),t instanceof ks){let r=ke.fromString(e,...n);return Ix(r),new Ke(t,null,new Y(r))}{if(!(t instanceof Ke||t instanceof Pr))throw new B(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ke.fromString(e,...n));return Ix(r),new Ke(t.firestore,t instanceof Pr?t.converter:null,new Y(r))}}function Vb(t,e){return t=tt(t),e=tt(e),(t instanceof Ke||t instanceof Pr)&&(e instanceof Ke||e instanceof Pr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Lb(t,e){return t=tt(t),e=tt(e),t instanceof Ht&&e instanceof Ht&&t.firestore===e.firestore&&ad(t._query,e._query)&&t.converter===e.converter}var KE=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Xl(this,"async_queue_retry"),this.hu=()=>{let n=Rp();n&&U("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Rp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Rp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Ct;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return k(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Eo(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw gt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=NE.createAndSchedule(this,e,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&ne()}verifyOperationInProgress(){}du(){return k(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function QE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var YE=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ct,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var sR=-1,Xe=class extends ks{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new KE}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||aR(this),this._firestoreClient.terminate()}};function Pt(t){return t._firestoreClient||aR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function aR(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,f){return new I_(a,c,l,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,nR(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new GE(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function cR(t,e){yR(t=Oe(t,Xe));let n=Pt(t);if(n._uninitializedComponentsProvider)throw new B(j.FAILED_PRECONDITION,"SDK cache is already specified.");Un("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new nd;return lR(n,i,new wg(i,r.cacheSizeBytes,e?.forceOwnership))}function uR(t){yR(t=Oe(t,Xe));let e=Pt(t);if(e._uninitializedComponentsProvider)throw new B(j.FAILED_PRECONDITION,"SDK cache is already specified.");Un("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new nd;return lR(e,r,new $E(r,n.cacheSizeBytes))}function lR(t,e,n){let r=new Ct;return t.asyncQueue.enqueue(()=>k(this,null,function*(){try{yield Np(t,n),yield WE(t,e),r.resolve()}catch(i){let o=i;if(!ZM(o))throw o;Un("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function dR(t){if(t._initialized&&!t._terminated)throw new B(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ct;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{yield function(r){return k(this,null,function*(){if(!lo.D())return Promise.resolve();let i=r+"main";yield lo.delete(i)})}(wb(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function hR(t){return function(n){let r=new Ct;return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return q$(yield Pb(n),r)})),r.promise}(Pt(t=Oe(t,Xe)))}function fR(t){return iH(Pt(t=Oe(t,Xe)))}function pR(t){return oH(Pt(t=Oe(t,Xe)))}function gR(t,e){let n=Pt(t=Oe(t,Xe)),r=new YE;return uH(n,t._databaseId,e,r),r}function mR(t,e){return lH(Pt(t=Oe(t,Xe)),e).then(n=>n?new Ht(t,null,n.query):null)}function yR(t){if(t._initialized||t._terminated)throw new B(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Vr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Vt.fromBase64String(e))}catch(n){throw new B(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ur=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ei=class{constructor(e){this._methodName=e}};var Os=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}};var dH=/^__.*__$/,ZE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new yo(e,this.data,n,this.fieldTransforms)}},Eg=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function vR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var bg=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ig(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(vR(this.fu)&&dH.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},JE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ud(e)}Fu(e,n,r,i=!1){return new bg({fu:e,methodName:n,vu:r,path:mt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function js(t){let e=t._freezeSettings(),n=ud(t._databaseId);return new JE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kg(t,e,n,r,i,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,i);Ub("Data must be an object, but it was:",s,r);let a=ER(r,s),c,l;if(o.merge)c=new Sn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let m of o.mergeFields){let w=rb(e,m,n);if(!s.contains(w))throw new B(j.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);IR(f,w)||f.push(w)}c=new Sn(f),l=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,l=s.fieldTransforms;return new ZE(new Kt(a),c,l)}var rd=class t extends Ei{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function wR(t,e,n){return new bg({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var XE=class t extends Ei{_toFieldTransform(e){return new Rs(e.path,new go)}isEqual(e){return e instanceof t}},eb=class t extends Ei{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=wR(this,e,!0),r=this.Mu.map(o=>Bs(o,n)),i=new wi(r);return new Rs(e.path,i)}isEqual(e){return e instanceof t&&Em(this.Mu,e.Mu)}},tb=class t extends Ei{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=wR(this,e,!0),r=this.Mu.map(o=>Bs(o,n)),i=new _i(r);return new Rs(e.path,i)}isEqual(e){return e instanceof t&&Em(this.Mu,e.Mu)}},nb=class t extends Ei{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new mo(e.serializer,iM(e.serializer,this.xu));return new Rs(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function jb(t,e,n,r){let i=t.Fu(1,e,n);Ub("Data must be an object, but it was:",i,r);let o=[],s=Kt.empty();Ls(r,(c,l)=>{let f=$b(e,c,n);l=tt(l);let m=i.Su(f);if(l instanceof rd)o.push(f);else{let w=Bs(l,m);w!=null&&(o.push(f),s.set(f,w))}});let a=new Sn(o);return new Eg(s,a,i.fieldTransforms)}function Bb(t,e,n,r,i,o){let s=t.Fu(1,e,n),a=[rb(e,r,n)],c=[i];if(o.length%2!=0)throw new B(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)a.push(rb(e,o[w])),c.push(o[w+1]);let l=[],f=Kt.empty();for(let w=a.length-1;w>=0;--w)if(!IR(l,a[w])){let E=a[w],M=c[w];M=tt(M);let P=s.Su(E);if(M instanceof rd)l.push(E);else{let N=Bs(M,P);N!=null&&(l.push(E),f.set(E,N))}}let m=new Sn(l);return new Eg(f,m,s.fieldTransforms)}function _R(t,e,n,r=!1){return Bs(n,t.Fu(r?4:3,e))}function Bs(t,e){if(bR(t=tt(t)))return Ub("Unsupported field value:",e,t),ER(t,e);if(t instanceof Ei)return function(r,i){if(!vR(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Bs(a,i.bu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=it.fromDate(r);return{timestampValue:xc(i.serializer,o)}}if(r instanceof it){let o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xc(i.serializer,o)}}if(r instanceof Os)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:pM(i.serializer,r._byteString)};if(r instanceof Ke){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mb(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Pg(r)}`)}(t,e)}function ER(t,e){let n={};return Bx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,(r,i)=>{let o=Bs(i,e.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function bR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof Os||t instanceof Vr||t instanceof Ke||t instanceof Ei)}function Ub(t,e,n){if(!bR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Pg(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function rb(t,e,n){if((e=tt(e))instanceof ur)return e._internalPath;if(typeof e=="string")return $b(t,e);throw Ig("Field path arguments must be of type string or ",t,!1,void 0,n)}var hH=new RegExp("[~\\*/\\[\\]]");function $b(t,e,n){if(e.search(hH)>=0)throw Ig(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ur(...e.split("."))._internalPath}catch{throw Ig(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ig(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new B(j.INVALID_ARGUMENT,a+t+c)}function IR(t,e){return t.some(n=>n.isEqual(e))}var Fs=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ke(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ib(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},ib=class extends Fs{data(){return super.data()}};function Og(t,e){return typeof e=="string"?$b(t,e):e instanceof ur?e._internalPath:e._delegate._internalPath}function DR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var id=class{},Vs=class extends id{};function Di(t,e,...n){let r=[];e instanceof id&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof ob).length,a=o.filter(c=>c instanceof Dg).length;if(s>1||s>0&&a>0)throw new B(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Dg=class t extends Vs{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return kR(e._query,n),new Ht(e.firestore,e.converter,F_(e._query,n))}_parse(e){let n=js(e.firestore);return function(o,s,a,c,l,f,m){let w;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Tx(m,f);let E=[];for(let M of m)E.push(Cx(c,o,M));w={arrayValue:{values:E}}}else w=Cx(c,o,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Tx(m,f),w=_R(a,s,m,f==="in"||f==="not-in");return xe.create(l,f,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function CR(t,e,n){let r=e,i=Og("where",t);return Dg._create(i,r,n)}var ob=class t extends id{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$e.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)kR(s,c),s=F_(s,c)}(e._query,n),new Ht(e.firestore,e.converter,F_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var sb=class t extends Vs{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new B(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xs(o,s)}(e._query,this._field,this._direction);return new Ht(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new ar(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function TR(t,e="asc"){let n=e,r=Og("orderBy",t);return sb._create(r,n)}var Cg=class t extends Vs{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ht(e.firestore,e.converter,zp(e._query,this._limit,this._limitType))}};function SR(t){return rR("limit",t),Cg._create("limit",t,"F")}function AR(t){return rR("limitToLast",t),Cg._create("limitToLast",t,"L")}var Tg=class t extends Vs{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=PR(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,function(i,o){return new ar(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function xR(...t){return Tg._create("startAt",t,!0)}function MR(...t){return Tg._create("startAfter",t,!1)}var Sg=class t extends Vs{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=PR(e,this.type,this._docOrFields,this._inclusive);return new Ht(e.firestore,e.converter,function(i,o){return new ar(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function RR(...t){return Sg._create("endBefore",t,!1)}function NR(...t){return Sg._create("endAt",t,!0)}function PR(t,e,n,r){if(n[0]=tt(n[0]),n[0]instanceof Fs)return function(o,s,a,c,l){if(!c)throw new B(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let f=[];for(let m of Ec(o))if(m.field.isKeyField())f.push(As(s,c.key));else{let w=c.data.field(m.field);if(xg(w))throw new B(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let E=m.field.canonicalString();throw new B(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(w)}return new Or(f,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=js(t.firestore);return function(s,a,c,l,f,m){let w=s.explicitOrderBy;if(f.length>w.length)throw new B(j.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let E=[];for(let M=0;M<f.length;M++){let P=f[M];if(w[M].field.isKeyField()){if(typeof P!="string")throw new B(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof P}`);if(!pb(s)&&P.indexOf("/")!==-1)throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${P}' contains a slash.`);let N=s.path.child(ke.fromString(P));if(!Y.isDocumentKey(N))throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let H=new Y(N);E.push(As(a,H))}else{let N=_R(c,l,P);E.push(N)}}return new Or(E,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Cx(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new B(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pb(e)&&n.indexOf("/")!==-1)throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ke.fromString(n));if(!Y.isDocumentKey(r))throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return As(t,new Y(r))}if(n instanceof Ke)return As(t,n._key);throw new B(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pg(n)}.`)}function Tx(t,e){if(!Array.isArray(t)||t.length===0)throw new B(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var jc=class{convertValue(e,n="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ls(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Os(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=hb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){let n=vi(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ke.fromString(e);oe(CM(r));let i=new fo(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(n)||gt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Fg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ab=class extends jc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,n)}};var yi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Hn=class extends Fs{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new co(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Og("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},co=class extends Hn{data(e={}){return super.data(e)}},lr=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new yi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new co(this._firestore,this._userDataWriter,r.key,r,new yi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new co(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new co(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:fH(a.type),doc:c,oldIndex:l,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function fH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}function Hb(t,e){return t instanceof Hn&&e instanceof Hn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof lr&&e instanceof lr&&t._firestore===e._firestore&&Lb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function OR(t){t=Oe(t,Ke);let e=Oe(t.firestore,Xe);return eR(Pt(e),t._key).then(n=>Wb(e,t,n))}var bi=class extends jc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ke(this.firestore,null,n)}};function FR(t){t=Oe(t,Ke);let e=Oe(t.firestore,Xe),n=Pt(e),r=new bi(e);return sH(n,t._key).then(i=>new Hn(e,r,t._key,i,new yi(i!==null&&i.hasLocalMutations,!0),t.converter))}function VR(t){t=Oe(t,Ke);let e=Oe(t.firestore,Xe);return eR(Pt(e),t._key,{source:"server"}).then(n=>Wb(e,t,n))}function LR(t){t=Oe(t,Ht);let e=Oe(t.firestore,Xe),n=Pt(e),r=new bi(e);return DR(t._query),tR(n,t._query).then(i=>new lr(e,r,t,i))}function jR(t){t=Oe(t,Ht);let e=Oe(t.firestore,Xe),n=Pt(e),r=new bi(e);return aH(n,t._query).then(i=>new lr(e,r,t,i))}function BR(t){t=Oe(t,Ht);let e=Oe(t.firestore,Xe),n=Pt(e),r=new bi(e);return tR(n,t._query,{source:"server"}).then(i=>new lr(e,r,t,i))}function zb(t,e,n){t=Oe(t,Ke);let r=Oe(t.firestore,Xe),i=Fg(t.converter,e,n);return Gc(r,[kg(js(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dt.none())])}function qb(t,e,n,...r){t=Oe(t,Ke);let i=Oe(t.firestore,Xe),o=js(i),s;return s=typeof(e=tt(e))=="string"||e instanceof ur?Bb(o,"updateDoc",t._key,e,n,r):jb(o,"updateDoc",t._key,e),Gc(i,[s.toMutation(t._key,dt.exists(!0))])}function UR(t){return Gc(Oe(t.firestore,Xe),[new vo(t._key,dt.none())])}function $R(t,e){let n=Oe(t.firestore,Xe),r=dd(t),i=Fg(t.converter,e);return Gc(n,[kg(js(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dt.exists(!1))]).then(()=>r)}function Gb(t,...e){var n,r,i;t=tt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||QE(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(QE(e[s])){let m=e[s];e[s]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[s+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[s+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,l,f;if(t instanceof Ke)l=Oe(t.firestore,Xe),f=Uc(t._key.path),c={next:m=>{e[s]&&e[s](Wb(l,t,m))},error:e[s+1],complete:e[s+2]};else{let m=Oe(t,Ht);l=Oe(m.firestore,Xe),f=m._query;let w=new bi(l);c={next:E=>{e[s]&&e[s](new lr(l,w,m,E))},error:e[s+1],complete:e[s+2]},DR(t._query)}return function(w,E,M,P){let N=new Vc(P),H=new ed(E,N,M);return w.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return Ib(yield Lc(w),H)})),()=>{N.$a(),w.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return Db(yield Lc(w),H)}))}}(Pt(l),f,a,c)}function HR(t,e){return cH(Pt(t=Oe(t,Xe)),QE(e)?e:{next:e})}function Gc(t,e){return function(r,i){let o=new Ct;return r.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return U$(yield Pb(r),i,o)})),o.promise}(Pt(t),e)}function Wb(t,e,n){let r=n.docs.get(e._key),i=new bi(t);return new Hn(t,i,e._key,r,new yi(n.hasPendingWrites,n.fromCache),e.converter)}var pH={maxAttempts:5};var Ag=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=js(e)}set(e,n,r){this._verifyNotCommitted();let i=so(e,this._firestore),o=Fg(i.converter,n,r),s=kg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,dt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=so(e,this._firestore),s;return s=typeof(n=tt(n))=="string"||n instanceof ur?Bb(this._dataReader,"WriteBatch.update",o._key,n,r,i):jb(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,dt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=so(e,this._firestore);return this._mutations=this._mutations.concat(new vo(n._key,dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function so(t,e){if((t=tt(t)).firestore!==e)throw new B(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var cb=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=js(n)}get(n){let r=so(n,this._firestore),i=new ab(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ne();let s=o[0];if(s.isFoundDocument())return new Fs(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Fs(this._firestore,i,r._key,null,r.converter);throw ne()})}set(n,r,i){let o=so(n,this._firestore),s=Fg(o.converter,r,i),a=kg(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=so(n,this._firestore),a;return a=typeof(r=tt(r))=="string"||r instanceof ur?Bb(this._dataReader,"Transaction.update",s._key,r,i,o):jb(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=so(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=so(e,this._firestore),r=new bi(this._firestore);return super.get(e).then(i=>new Hn(this._firestore,r,n._key,i._document,new yi(!1,!1),n.converter))}};function zR(t,e,n){t=Oe(t,Xe);let r=Object.assign(Object.assign({},pH),n);return function(o){if(o.maxAttempts<1)throw new B(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Ct;return o.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){let l=yield rH(o);new qE(o.asyncQueue,l,a,s,c).Xa()})),c.promise}(Pt(t),i=>e(new cb(t,i)),r)}function qR(){return new rd("deleteField")}function GR(){return new XE("serverTimestamp")}function WR(...t){return new eb("arrayUnion",t)}function KR(...t){return new tb("arrayRemove",t)}function QR(t){return new nb("increment",t)}(function(e,n=!0){(function(i){Bc=i})(qI),Tu(new $o("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Xe(new f_(r.getProvider("auth-internal")),new y_(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fo(l.options.projectId,f)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Li(SA,"4.6.4",e),Li(SA,"4.6.4","esm2017")})();var gH="@firebase/firestore-compat",mH="0.3.33";function Xb(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function YR(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function ZR(){if(!Ux())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Vg=class t{constructor(e){this._delegate=e}static fromBase64String(e){return ZR(),new t(Vr.fromBase64String(e))}static fromUint8Array(e){return YR(),new t(Vr.fromUint8Array(e))}toBase64(){return ZR(),this._delegate.toBase64()}toUint8Array(){return YR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Kb(t){return yH(t,["next","error","complete"])}function yH(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var Qb=class{enableIndexedDbPersistence(e,n){return cR(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return uR(e._delegate)}clearIndexedDbPersistence(e){return dR(e._delegate)}},Lg=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Un("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){iR(this._delegate,e,n,r)}enableNetwork(){return fR(this._delegate)}disableNetwork(){return pR(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ob("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hR(this._delegate)}onSnapshotsInSync(e){return HR(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qc(this,Fb(this._delegate,e))}catch(n){throw ln(n,"collection()","Firestore.collection()")}}doc(e){try{return new Lr(this,dd(this._delegate,e))}catch(n){throw ln(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zs(this,oR(this._delegate,e))}catch(n){throw ln(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return zR(this._delegate,n=>e(new jg(this,n)))}batch(){return Pt(this._delegate),new Bg(new Ag(this._delegate,e=>Gc(this._delegate,e)))}loadBundle(e){return gR(this._delegate,e)}namedQuery(e){return mR(this._delegate,e).then(n=>n?new zs(this,n):null)}},Wc=class extends jc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vg(new Vr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Lr.forKey(n,this.firestore,null)}};function vH(t){Sx(t)}var jg=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Wc(e)}get(e){let n=Us(e);return this._delegate.get(n).then(r=>new $s(this._firestore,new Hn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Us(e);return r?(Xb("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Us(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Us(e);return this._delegate.delete(n),this}},Bg=class{constructor(e){this._delegate=e}set(e,n,r){let i=Us(e);return r?(Xb("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Us(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Us(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Kc=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new co(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hs(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Wc(e),n),i.set(n,o)),o}};Kc.INSTANCES=new WeakMap;var Lr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Wc(e)}static forPath(e,n,r){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Ke(n._delegate,r,new Y(e)))}static forKey(e,n,r){return new t(n,new Ke(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qc(this.firestore,Fb(this._delegate,e))}catch(n){throw ln(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=tt(e),e instanceof Ke?Vb(this._delegate,e):!1}set(e,n){n=Xb("DocumentReference.set",n);try{return n?zb(this._delegate,e,n):zb(this._delegate,e)}catch(r){throw ln(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?qb(this._delegate,e):qb(this._delegate,e,n,...r)}catch(i){throw ln(i,"updateDoc()","DocumentReference.update()")}}delete(){return UR(this._delegate)}onSnapshot(...e){let n=JR(e),r=XR(e,i=>new $s(this.firestore,new Hn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Gb(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=FR(this._delegate):e?.source==="server"?n=VR(this._delegate):n=OR(this._delegate),n.then(r=>new $s(this.firestore,new Hn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Kc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ln(t,e,n){return t.message=t.message.replace(e,n),t}function JR(t){for(let e of t)if(typeof e=="object"&&!Kb(e))return e;return{}}function XR(t,e){var n,r;let i;return Kb(t[0])?i=t[0]:Kb(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var $s=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Lr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Hb(this._delegate,e._delegate)}},Hs=class extends $s{data(e){let n=this._delegate.data(e);return this._delegate._converter||Ax(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},zs=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Wc(e)}where(e,n,r){try{return new t(this.firestore,Di(this._delegate,CR(e,n,r)))}catch(i){throw ln(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Di(this._delegate,TR(e,n)))}catch(r){throw ln(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Di(this._delegate,SR(e)))}catch(n){throw ln(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Di(this._delegate,AR(e)))}catch(n){throw ln(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Di(this._delegate,xR(...e)))}catch(n){throw ln(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Di(this._delegate,MR(...e)))}catch(n){throw ln(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Di(this._delegate,RR(...e)))}catch(n){throw ln(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Di(this._delegate,NR(...e)))}catch(n){throw ln(n,"endAt()","Query.endAt()")}}isEqual(e){return Lb(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=jR(this._delegate):e?.source==="server"?n=BR(this._delegate):n=LR(this._delegate),n.then(r=>new hd(this.firestore,new lr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=JR(e),r=XR(e,i=>new hd(this.firestore,new lr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Gb(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Kc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Yb=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Hs(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},hd=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hs(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Yb(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Hs(this._firestore,r))})}isEqual(e){return Hb(this._delegate,e._delegate)}},Qc=class t extends zs{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Lr(this.firestore,e):null}doc(e){try{return e===void 0?new Lr(this.firestore,dd(this._delegate)):new Lr(this.firestore,dd(this._delegate,e))}catch(n){throw ln(n,"doc()","CollectionReference.doc()")}}add(e){return $R(this._delegate,e).then(n=>new Lr(this.firestore,n))}isEqual(e){return Vb(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Kc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Us(t){return Oe(t,Ke)}var Zb=class t{constructor(...e){this._delegate=new ur(...e)}static documentId(){return new t(mt.keyField().canonicalString())}isEqual(e){return e=tt(e),e instanceof ur?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Jb=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=GR();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=qR();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=WR(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=KR(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=QR(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var wH={Firestore:Lg,GeoPoint:Os,Timestamp:it,Blob:Vg,Transaction:jg,WriteBatch:Bg,DocumentReference:Lr,DocumentSnapshot:$s,Query:zs,QueryDocumentSnapshot:Hs,QuerySnapshot:hd,CollectionReference:Qc,FieldPath:Zb,FieldValue:Jb,setLogLevel:vH,CACHE_SIZE_UNLIMITED:sR};function _H(t,e){t.INTERNAL.registerComponent(new $o("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},wH)))}function EH(t){_H(t,(e,n)=>new Lg(e,n,new Qb)),t.registerVersion(gH,mH)}EH(dn);function bH(t,e=Nu){return new Te(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function eN(t,e){return bH(t,e)}function IH(t,e){return eN(t,e).pipe(Ko(void 0),Ou(),de(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function nI(t,e){return eN(t,e).pipe(de(n=>({payload:n,type:"query"})))}var Ug=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=oN(r,n);return new Hg(i,o,this.afs)}snapshotChanges(){return IH(this.ref,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return this.snapshotChanges().pipe(de(({payload:n})=>e.idField?Se(W({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return Ve(this.ref.get(e)).pipe(vn)}};function $g(t,e){return nI(t,e).pipe(Ko(void 0),Ou(),de(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function tN(t,e,n){return $g(t,n).pipe(Wo((r,i)=>DH(r,i.map(o=>o.payload),e),[]),zm(),de(r=>r.map(i=>({type:i.type,payload:i}))))}function DH(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=CH(t,r))}),t}function eI(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function CH(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return eI(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return eI(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eI(t,e.oldIndex,1);break}return t}function nN(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Hg=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=$g(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(de(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Ko(void 0),Ou(),$t(([r,i])=>i.length>0||!r),de(([,r])=>r),vn)}auditTrail(e){return this.stateChanges(e).pipe(Wo((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=nN(e);return tN(this.query,n,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return nI(this.query,this.afs.schedulers.outsideAngular).pipe(de(n=>n.payload.docs.map(r=>e.idField?Se(W({},r.data()),{[e.idField]:r.id}):r.data())),vn)}get(e){return Ve(this.query.get(e)).pipe(vn)}add(e){return this.ref.add(e)}doc(e){return new Ug(this.ref.doc(e),this.afs)}},tI=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?$g(this.query,this.afs.schedulers.outsideAngular).pipe(vn):$g(this.query,this.afs.schedulers.outsideAngular).pipe(de(n=>n.filter(r=>e.indexOf(r.type)>-1)),$t(n=>n.length>0),vn)}auditTrail(e){return this.stateChanges(e).pipe(Wo((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=nN(e);return tN(this.query,n,this.afs.schedulers.outsideAngular).pipe(vn)}valueChanges(e={}){return nI(this.query,this.afs.schedulers.outsideAngular).pipe(de(r=>r.payload.docs.map(i=>e.idField?W({[e.idField]:i.id},i.data()):i.data())),vn)}get(e){return Ve(this.query.get(e)).pipe(vn)}},rN=new ee("angularfire2.enableFirestorePersistence"),iN=new ee("angularfire2.firestore.persistenceSettings"),TH=new ee("angularfire2.firestore.settings"),SH=new ee("angularfire2.firestore.use-emulator");function oN(t,e=n=>n){return{query:e(t),ref:t}}var qs=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,l,f,m,w,E,M,P,N,H,X){this.schedulers=c;let $=Dl(n,a,r),re=f;m&&Xw($,a,w,M,P,N,E,H),[this.firestore,this.persistenceEnabled$]=_p(`${$.name}.firestore`,"AngularFirestore",$.name,()=>{let le=a.runOutsideAngular(()=>$.firestore());if(o&&le.settings(o),re&&le.useEmulator(...re),i&&!fs(s)){let se=()=>{try{return Ve(le.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(T){return typeof console<"u"&&console.warn(T),ue(!1)}};return[le,a.runOutsideAngular(se)]}else return[le,ue(!1)]},[o,re,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=oN(i,r),a=this.schedulers.ngZone.run(()=>o);return new Hg(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new tI(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Ug(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(z(ac),z(cc,8),z(rN,8),z(TH,8),z(gn),z(Ne),z(fp),z(iN,8),z(SH,8),z(DA,8),z(Ww,8),z(Kw,8),z(Qw,8),z(Yw,8),z(Zw,8),z(Jw,8),z(ms,8))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),sN=(()=>{class t{constructor(){dn.registerVersion("angularfire",ic.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:rN,useValue:!0},{provide:iN,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Nt({type:t});static \u0275inj=Rt({providers:[qs]})}return t})();var AH=(t,e)=>({"bg-green-100":t,"even:bg-blue-gray-50/50":e});function xH(t,e){if(t&1&&(J(0,"tr",20)(1,"td",21)(2,"p",22),te(3),Q()(),J(4,"td",21)(5,"p",22),te(6),Q()(),J(7,"td",21)(8,"p",22),te(9),Q()(),J(10,"td",21)(11,"p",22),te(12),Q()(),J(13,"td",21)(14,"p",22),te(15),Q()()()),t&2){let n=e.$implicit,r=e.index;mn("ngClass",cs(6,AH,r<2,r>=2)),We(3),on(" ",n.name," "),We(3),on(" ",n.stats.wins+n.stats.lost," "),We(3),on(" ",n.stats.wins," "),We(3),on(" ",n.stats.lost," "),We(3),on(" ",n.stats.score," ")}}function MH(t,e){if(t&1&&(J(0,"div",14)(1,"div")(2,"h2",15),te(3),Q(),J(4,"table",16)(5,"thead")(6,"tr")(7,"th",17)(8,"p",18),te(9," Team "),Q()(),J(10,"th",17)(11,"p",18),te(12," Matches Played "),Q()(),J(13,"th",17)(14,"p",18),te(15," Won "),Q()(),J(16,"th",17)(17,"p",18),te(18," Lost "),Q()(),J(19,"th",17)(20,"p",18),te(21," Points "),Q()()()(),J(22,"tbody"),ci(23,xH,16,9,"tr",19),Q()()()()),t&2){let n=e.$implicit,r=$a();We(3),as(n),We(20),mn("ngForOf",r.getTeams(n))}}var aN=(()=>{let e=class e{constructor(r){this.firestore=r,this.badminton_group_map={},this.badminton_map={}}ngOnInit(){return k(this,null,function*(){let i=yield this.firestore.collection("maps").doc("badmiton_team_map").get().toPromise();i.exists?(this.badminton_map=i.data(),console.log(this.badminton_map)):console.log("No such document!");let s=yield this.firestore.collection("maps").doc("badminton_group").get().toPromise();if(s.exists){this.badminton_group_map=s.data(),console.log(this.badminton_group_map);for(let a in this.badminton_group_map)this.badminton_group_map[a]=this.sortGroupByScore(this.badminton_group_map[a])}else console.log("No such document!")})}getGroupNames(){return Object.keys(this.badminton_group_map).sort()}getTeams(r){let i=this.badminton_group_map[r];return Object.keys(i).map(o=>({name:this.badminton_map[o],stats:i[o]}))}sortGroupByScore(r){let i=Object.entries(r).map(([o,s])=>W({team:o},s));return i.sort((o,s)=>s.score-o.score),i.reduce((o,s)=>(o[s.team]={score:s.score,wins:s.wins,lost:s.lost},o),{})}};e.\u0275fac=function(i){return new(i||e)(Ce(qs))},e.\u0275cmp=Vn({type:e,selectors:[["app-home"]],decls:62,vars:1,consts:[[1,"flex","items-center","justify-center"],["src","https://media3.giphy.com/media/RimTYp7pim1H2/giphy.gif?cid=6c09b952r0dpwk8zuvt0jcturdagc1qntwncl3grq9pmtl1b&ep=v1_internal_gif_by_id&rid=giphy.gif&ct=g","alt",""],["src","../../../assets/chamlp.png","alt",""],["src","../../../assets/test111.png","alt",""],[1,"container","mx-auto","px-4","mt-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-green-500","shadow-md","rounded-lg","p-6"],[1,"text-xl","font-semibold","mb-2"],[1,"mb-4"],[1,"font-semibold"],[1,"container","mx-auto","px-4"],[1,"bg-green-100","shadow-md","rounded-lg","p-6"],[1,"bg-white","shadow-md","rounded-lg","p-6"],["class","m-4 relative flex flex-col w-full h-full overflow-scroll text-gray-700 bg-white shadow-md bg-clip-border rounded-xl",4,"ngFor","ngForOf"],[1,"m-4","relative","flex","flex-col","w-full","h-full","overflow-scroll","text-gray-700","bg-white","shadow-md","bg-clip-border","rounded-xl"],[1,"text-xl","font-semibold"],[1,"w-full","text-left","table-auto","min-w-max"],[1,"p-4","border-b","border-blue-gray-100","bg-blue-gray-50"],[1,"block","font-sans","text-sm","antialiased","font-normal","leading-none","text-blue-gray-900","opacity-70"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"p-4"],[1,"block","font-sans","text-sm","antialiased","font-normal","leading-normal","text-blue-gray-900"]],template:function(i,o){i&1&&(J(0,"div",0),yn(1,"img",1),Q(),J(2,"div",0),yn(3,"img",2),Q(),J(4,"div",0),yn(5,"img",3),Q(),J(6,"div",4)(7,"div",5)(8,"div",6)(9,"h2",7),te(10,"Final 1"),Q(),J(11,"p",8),te(12,"Hemanathan, Shikar Sourav vs Nusaif & Lalith Siva Sai"),Q(),J(13,"p",9),te(14,"Winner: Nusaif & Lalith Siva Sai "),Q()()()(),J(15,"div",10)(16,"div",5)(17,"div",11)(18,"h2",7),te(19,"Semi-final 1"),Q(),J(20,"p",8),te(21,"Hemanathan, Shikar Sourav vs Kishore & Preeti"),Q(),J(22,"p",9),te(23,"Winner: Hemanathan, Shikar Sourav "),Q()(),J(24,"div",11)(25,"h2",7),te(26,"Semi-final 2"),Q(),J(27,"p",8),te(28,"Nusaif & Lalith Siva Sai vs Bharath & Prajwal B"),Q(),J(29,"p",9),te(30,"Winner: Nusaif & Lalith Siva Sai"),Q()()()(),J(31,"div",10)(32,"div",5)(33,"div",12)(34,"h2",7),te(35,"Q1"),Q(),J(36,"p",8),te(37,"Hemanathan, Shikar Sourav vs Prajwal K S & Samyak"),Q(),J(38,"p",9),te(39,"Winner: Hemanathan, Shikar Sourav"),Q()(),J(40,"div",12)(41,"h2",7),te(42,"Q2"),Q(),J(43,"p",8),te(44,"Nusaif & Lalith Siva Sai vs Shikhar Srivastav & Vignesh N"),Q(),J(45,"p",9),te(46,"Winner: Nusaif & Lalith Siva Sai "),Q()(),J(47,"div",12)(48,"h2",7),te(49,"Q3"),Q(),J(50,"p",8),te(51,"Kishore & Preeti vs Krishna & Chidambar"),Q(),J(52,"p",9),te(53,"Winner: Kishore & Preeti "),Q()(),J(54,"div",12)(55,"h2",7),te(56,"Q4"),Q(),J(57,"p",8),te(58,"Bharath & Prajwal B vs Gayathri & Saikumar"),Q(),J(59,"p",9),te(60,"Winner: Bharath & Prajwal B "),Q()()()(),ci(61,MH,24,2,"div",13)),i&2&&(We(61),mn("ngForOf",o.getGroupNames()))},dependencies:[za,qa]});let t=e;return t})();function RH(t,e){if(t&1&&(J(0,"tr",5)(1,"td",6)(2,"p",7),te(3),Q()(),J(4,"td",6)(5,"p",7),te(6),Q()()()),t&2){let n=e.$implicit;We(3),on(" ",n[0]," "),We(3),on(" ",n[1]," ")}}var cN=(()=>{let e=class e{constructor(r){this.firestore=r,this.badminton_map={}}ngOnInit(){return k(this,null,function*(){let i=yield this.firestore.collection("maps").doc("badmiton_team_map").get().toPromise();if(i.exists){this.badminton_map=i.data(),console.log(this.badminton_map),this.badmintonArray=Object.entries(this.badminton_map);let o=s=>{let a=s.match(/\d+/);return a?parseInt(a[0],10):0};this.badmintonArray.sort((s,a)=>{let c=o(s[0]),l=o(a[0]);return c-l}),console.log(this.badmintonArray)}else console.log("No such document!")})}};e.\u0275fac=function(i){return new(i||e)(Ce(qs))},e.\u0275cmp=Vn({type:e,selectors:[["app-teams"]],decls:12,vars:1,consts:[[1,"m-4","relative","flex","flex-col","w-full","h-full","overflow-scroll","text-gray-700","bg-white","shadow-md","bg-clip-border","rounded-xl"],[1,"w-full","text-left","table-auto","min-w-max"],[1,"p-4","border-b","border-blue-gray-100","bg-blue-gray-50"],[1,"block","font-sans","text-sm","antialiased","font-normal","leading-none","text-blue-gray-900","opacity-70"],["class","even:bg-blue-gray-50/50",4,"ngFor","ngForOf"],[1,"even:bg-blue-gray-50/50"],[1,"p-4"],[1,"block","font-sans","text-sm","antialiased","font-normal","leading-normal","text-blue-gray-900"]],template:function(i,o){i&1&&(J(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2)(5,"p",3),te(6," Team Name "),Q()(),J(7,"th",2)(8,"p",3),te(9," Members "),Q()()()(),J(10,"tbody"),ci(11,RH,7,2,"tr",4),Q()()()),i&2&&(We(11),mn("ngForOf",o.badmintonArray))},dependencies:[qa]});let t=e;return t})();var kN=VI(oI());var yN=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Ce(ai),Ce(Tr))},e.\u0275dir=Gt({type:e});let t=e;return t})(),lI=(()=>{let e=class e extends yN{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275dir=Gt({type:e,features:[Zi]});let t=e;return t})(),Kg=new ee("");var NH={provide:Kg,useExisting:is(()=>vN),multi:!0};function PH(){let t=Sr()?Sr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var kH=new ee(""),vN=(()=>{let e=class e extends yN{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!PH())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Ce(ai),Ce(Tr),Ce(kH,8))},e.\u0275dir=Gt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&rr("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Qu([NH]),Zi]});let t=e;return t})();var OH=new ee(""),FH=new ee("");function wN(t){return t!=null}function _N(t){return us(t)?Ve(t):t}function EN(t){let e={};return t.forEach(n=>{e=n!=null?W(W({},e),n):e}),Object.keys(e).length===0?null:e}function bN(t,e){return e.map(n=>n(t))}function VH(t){return!t.validate}function IN(t){return t.map(e=>VH(e)?e:n=>e.validate(n))}function LH(t){if(!t)return null;let e=t.filter(wN);return e.length==0?null:function(n){return EN(bN(n,e))}}function DN(t){return t!=null?LH(IN(t)):null}function jH(t){if(!t)return null;let e=t.filter(wN);return e.length==0?null:function(n){let r=bN(n,e).map(_N);return Um(r).pipe(de(EN))}}function CN(t){return t!=null?jH(IN(t)):null}function uN(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function BH(t){return t._rawValidators}function UH(t){return t._rawAsyncValidators}function sI(t){return t?Array.isArray(t)?t:[t]:[]}function qg(t,e){return Array.isArray(t)?t.includes(e):t===e}function lN(t,e){let n=sI(e);return sI(t).forEach(i=>{qg(n,i)||n.push(i)}),n}function dN(t,e){return sI(e).filter(n=>!qg(t,n))}var Gg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=CN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},aI=class extends Gg{get formDirective(){return null}get path(){return null}},yd=class extends Gg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},cI=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},$H={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hZ=Se(W({},$H),{"[class.ng-submitted]":"isSubmitted"}),TN=(()=>{let e=class e extends cI{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Ce(yd,2))},e.\u0275dir=Gt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Sv("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Zi]});let t=e;return t})();var fd="VALID",zg="INVALID",Yc="PENDING",pd="DISABLED",Jc=class{},Wg=class extends Jc{constructor(e,n){super(),this.value=e,this.source=n}},gd=class extends Jc{constructor(e,n){super(),this.pristine=e,this.source=n}},md=class extends Jc{constructor(e,n){super(),this.touched=e,this.source=n}},Zc=class extends Jc{constructor(e,n){super(),this.status=e,this.source=n}};function HH(t){return(Qg(t)?t.validators:t)||null}function zH(t){return Array.isArray(t)?DN(t):t||null}function qH(t,e){return(Qg(e)?e.asyncValidators:t)||null}function GH(t){return Array.isArray(t)?CN(t):t||null}function Qg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var uI=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Bf(()=>this.statusReactive()),this.statusReactive=Nf(void 0),this._pristine=Bf(()=>this.pristineReactive()),this.pristineReactive=Nf(!0),this._touched=Bf(()=>this.touchedReactive()),this.touchedReactive=Nf(!1),this._events=new nt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ji(this.statusReactive)}set status(e){Ji(()=>this.statusReactive.set(e))}get valid(){return this.status===fd}get invalid(){return this.status===zg}get pending(){return this.status==Yc}get disabled(){return this.status===pd}get enabled(){return this.status!==pd}get pristine(){return Ji(this.pristineReactive)}set pristine(e){Ji(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ji(this.touchedReactive)}set touched(e){Ji(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dN(e,this._rawAsyncValidators))}hasValidator(e){return qg(this._rawValidators,e)}hasAsyncValidator(e){return qg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Se(W({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new md(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new md(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Se(W({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new gd(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new gd(!0,r))}markAsPending(e={}){this.status=Yc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Se(W({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=pd,this.errors=null,this._forEachChild(i=>{i.disable(Se(W({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wg(this.value,r)),this._events.next(new Zc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Se(W({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=fd,this._forEachChild(r=>{r.enable(Se(W({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Se(W({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fd||this.status===Yc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wg(this.value,n)),this._events.next(new Zc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Se(W({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pd:fd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Yc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=_N(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Zc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Mt,this.statusChanges=new Mt}_calculateStatus(){return this._allControlsDisabled()?pd:this.errors?zg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yc)?Yc:this._anyControlsHaveStatus(zg)?zg:fd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new gd(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new md(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=zH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=GH(this._rawAsyncValidators)}};var SN=new ee("CallSetDisabledState",{providedIn:"root",factory:()=>dI}),dI="always";function WH(t,e){return[...e.path,t]}function KH(t,e,n=dI){YH(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),ZH(t,e),XH(t,e),JH(t,e),QH(t,e)}function hN(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function QH(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function YH(t,e){let n=BH(t);e.validator!==null?t.setValidators(uN(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=UH(t);e.asyncValidator!==null?t.setAsyncValidators(uN(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();hN(e._rawValidators,i),hN(e._rawAsyncValidators,i)}function ZH(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&AN(t,e)})}function JH(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&AN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function AN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function XH(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function ez(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function tz(t){return Object.getPrototypeOf(t.constructor)===lI}function nz(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===vN?n=o:tz(o)?r=o:i=o}),i||r||n||null}function fN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function pN(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var rz=class extends uI{constructor(e=null,n,r){super(HH(n),qH(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(pN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){pN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iz={provide:yd,useExisting:is(()=>hI)},gN=Promise.resolve(),hI=(()=>{let e=class e extends yd{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new rz,this._registered=!1,this.name="",this.update=new Mt,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=nz(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),ez(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){KH(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){gN.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&jf(i);gN.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?WH(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(Ce(aI,9),Ce(OH,10),Ce(FH,10),Ce(Kg,10),Ce(ds,8),Ce(SN,8))},e.\u0275dir=Gt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qu([iz]),Zi,La]});let t=e;return t})();var oz={provide:Kg,useExisting:is(()=>Yg),multi:!0};function xN(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function sz(t){return t.split(":")[0]}var Yg=(()=>{let e=class e extends lI{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=xN(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=sz(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275dir=Gt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&rr("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qu([oz]),Zi]});let t=e;return t})(),MN=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(xN(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(Ce(Tr),Ce(ai),Ce(Yg,9))},e.\u0275dir=Gt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),az={provide:Kg,useExisting:is(()=>RN),multi:!0};function mN(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function cz(t){return t.split(":")[0]}var RN=(()=>{let e=class e extends lI{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],f=this._getOptionValue(l.value);o.push(f)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let f=this._getOptionValue(l.value);o.push(f)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=cz(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=os(e)))(o||e)}})(),e.\u0275dir=Gt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&rr("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qu([az]),Zi]});let t=e;return t})(),NN=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(mN(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(mN(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(Ce(Tr),Ce(ai),Ce(RN,9))},e.\u0275dir=Gt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var uz=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Nt({type:e}),e.\u0275inj=Rt({});let t=e;return t})();var PN=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:SN,useValue:r.callSetDisabledState??dI}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Nt({type:e}),e.\u0275inj=Rt({imports:[uz]});let t=e;return t})();var dz=(t,e)=>({"bg-green-100 border-green-500":t,"bg-white border-gray-300":e}),hz=(t,e)=>({"text-green-600":t,"text-blue-600":e});function fz(t,e){if(t&1){let n=_T();J(0,"button",18),rr("click",function(){nC(n);let i=$a().$implicit,o=$a();return rC(o.addWinner(i.team_1,i.team_2,i.index))}),te(1,"Add winner"),Q()}}function pz(t,e){if(t&1&&(J(0,"div",9)(1,"h2",10),te(2),Q(),J(3,"p",11)(4,"strong"),te(5,"MATCH:"),Q(),te(6),Q(),J(7,"div",12)(8,"div",13)(9,"p",14),te(10),Q()(),J(11,"span",15),te(12,"VS"),Q(),J(13,"div",13)(14,"p",14),te(15),Q()()(),J(16,"p",11)(17,"strong"),te(18,"Time:"),Q(),te(19),Q(),J(20,"p",16)(21,"strong"),te(22,"Winner:"),Q(),te(23),Q(),ci(24,fz,2,0,"button",17),Q()),t&2){let n=e.$implicit,r=$a();mn("ngClass",cs(9,dz,n.Winner,!n.Winner)),We(2),as(n.Court),We(4),on(" ",n.MATCH,""),We(4),as(n.team_1),We(5),as(n.team_2),We(4),on(" ",n.Time,""),We(),mn("ngClass",cs(12,hz,n.Winner,!n.Winner)),We(3),on(" ",r.team[n.Winner]||"N/A"," "),We(),mn("ngIf",!n.Winner&&r.haskey)}}var ON=(()=>{let e=class e{constructor(r){this.firestore=r,this.badminton_group_map={},this.filteredMatches=[],this.team={},this.selectedCourt="all",this.haskey=""}ngOnInit(){return k(this,null,function*(){this.haskey=localStorage.getItem("secretKey");let i=yield this.firestore.collection("maps").doc("badmiton_team_map").get().toPromise();i.exists?this.team=i.data():console.log("No such document!");let s=yield this.firestore.collection("matches").doc("match").get().toPromise();if(s.exists){this.matches=s.data()||[],this.matches=this.matches.matches;var a=0;this.matches.forEach(f=>{let m=f.MATCH.split(" vs ");f.index=a,a+=1,f.team_1=this.team[m[0]]||m[0],f.team_2=this.team[m[1]]||m[1]}),this.filterMatches()}else console.log("No such document!");let l=yield this.firestore.collection("maps").doc("badminton_group").get().toPromise();l.exists?(this.badminton_group_map=l.data(),console.log(this.badminton_group_map)):console.log("No such document!")})}filterMatches(){this.selectedCourt==="all"?this.filteredMatches=[...this.matches]:(console.log(this.selectedCourt),this.filteredMatches=this.matches.filter(r=>r.Court===this.selectedCourt))}onCourtChange(r){let i=r.target;this.selectedCourt=i.value,console.log("Selected Court:",this.selectedCourt),this.filterMatches()}addWinner(r,i,o){return k(this,null,function*(){let{value:s}=yield kN.default.fire({title:"Select Winner",input:"select",inputOptions:{[r]:r,[i]:i},inputPlaceholder:"Select a team",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel"});if(s){console.log("Selected Team:",s);let a=s===r?i:r,c=this.findKeyByValue(this.team,s),l=this.findKeyByValue(this.team,a);this.matches[o].Winner=c,yield this.firestore.collection("matches").doc("match").update({matches:this.matches}),this.updateGroupMap(c,l)}})}updateGroupMap(r,i){return k(this,null,function*(){let o=yield this.firestore.collection("maps").doc("badminton_group").get().toPromise();if(o.exists){let s=o.data();for(let[a,c]of Object.entries(s))c[r]&&(c[r].wins+=1,c[r].score+=2),c[i]&&(c[i].lost+=1);yield this.firestore.collection("maps").doc("badminton_group").update(s)}else console.log("No such document!")})}findKeyByValue(r,i){for(let[o,s]of Object.entries(r))if(s===i)return o}};e.\u0275fac=function(i){return new(i||e)(Ce(qs))},e.\u0275cmp=Vn({type:e,selectors:[["app-matches"]],decls:14,vars:2,consts:[[1,"p-4"],["for","courtSelect",1,"block","text-lg","font-medium","text-gray-700","mb-2"],["id","courtSelect",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngModelChange","change","ngModel"],["value","all"],["value","Court 1"],["value","Court 2"],["value","Court 3"],[1,"flex","flex-wrap","justify-center","p-6","bg-gray-100"],["class","shadow-lg rounded-lg m-4 p-6 max-w-sm w-full border transition-transform transform hover:scale-105",3,"ngClass",4,"ngFor","ngForOf"],[1,"shadow-lg","rounded-lg","m-4","p-6","max-w-sm","w-full","border","transition-transform","transform","hover:scale-105",3,"ngClass"],[1,"text-2xl","font-bold","text-gray-800","mb-2"],[1,"text-gray-700","mb-1","text-lg"],[1,"flex","justify-between","items-center","my-4"],[1,"bg-blue-200","text-blue-800","rounded","p-2","text-center"],[1,"font-semibold","text-xl"],[1,"bg-red-200","text-red-800","rounded","p-2","font-bold","text-lg"],[1,"font-semibold","text-lg",3,"ngClass"],[3,"click",4,"ngIf"],[3,"click"]],template:function(i,o){i&1&&(J(0,"div",0)(1,"label",1),te(2,"Select Court:"),Q(),J(3,"select",2),xv("ngModelChange",function(a){return bT(o.selectedCourt,a)||(o.selectedCourt=a),a}),rr("change",function(a){return o.onCourtChange(a)}),J(4,"option",3),te(5,"All"),Q(),J(6,"option",4),te(7,"Court 1"),Q(),J(8,"option",5),te(9,"Court 2"),Q(),J(10,"option",6),te(11,"Court 3"),Q()()(),J(12,"div",7),ci(13,pz,25,15,"div",8),Q()),i&2&&(We(3),Av("ngModel",o.selectedCourt),We(10),mn("ngForOf",o.filteredMatches))},dependencies:[za,qa,QT,MN,NN,Yg,TN,hI]});let t=e;return t})();var Zg=VI(oI());var FN=(()=>{let e=class e{constructor(r){this.router=r,this.HARD_CODED_KEY="infraon@hanTZ123",this.promptForKey()}promptForKey(){return k(this,null,function*(){let{value:r}=yield Zg.default.fire({title:"Enter Secret Key",input:"text",inputLabel:"Secret Key",inputPlaceholder:"Enter your secret key here",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:i=>i?"":"You need to enter a secret key!"});r&&this.handleKey(r)})}handleKey(r){return k(this,null,function*(){r===this.HARD_CODED_KEY?(localStorage.setItem("secretKey",r),yield Zg.default.fire({title:"Success!",text:"Secret key has been stored.",icon:"success",confirmButtonText:"OK"}),this.router.navigate(["/"])):yield Zg.default.fire({title:"Error!",text:"Invalid secret key.",icon:"error",confirmButtonText:"Try Again"})})}};e.\u0275fac=function(i){return new(i||e)(Ce(fi))},e.\u0275cmp=Vn({type:e,selectors:[["app-secret-key"]],decls:2,vars:0,consts:[["src","https://media1.giphy.com/media/l49JBLWip9ToA9q5G/200w.gif?cid=6c09b952p8z86aujphx8szvr7ezm8167wl7lgdulyy0to6e1&ep=v1_gifs_search&rid=200w.gif&ct=g","alt",""]],template:function(i,o){i&1&&(yn(0,"img",0),te(1," Stop! Go away! dont enter if you dont have secret key."))}});let t=e;return t})();var gz=[{path:"",component:aN},{path:"teams",component:cN},{path:"matches",component:ON},{path:"login",component:FN}],VN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Nt({type:e}),e.\u0275inj=Rt({imports:[Lw.forRoot(gz),Lw]});let t=e;return t})();var mz=(t,e)=>({block:t,hidden:e}),LN=(()=>{let e=class e{constructor(){this.title="infraon-sports",this.navbarOpen=!1}toggleNavbar(){this.navbarOpen=!this.navbarOpen}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Vn({type:e,selectors:[["app-root"]],decls:38,vars:4,consts:[[1,"bg-gray-800","shadow-lg"],[1,"max-w-7xl","mx-auto","px-2","sm:px-6","lg:px-8"],[1,"relative","flex","items-center","justify-between","h-16"],[1,"absolute","inset-y-0","left-0","flex","items-center","sm:hidden"],["aria-expanded","false",1,"inline-flex","items-center","justify-center","p-2","rounded-md","text-gray-400","hover:text-white","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-inset","focus:ring-white",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"block","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16m-7 6h7"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"hidden","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","flex","items-center","justify-center","sm:items-stretch","sm:justify-start"],[1,"flex-shrink-0"],["href","/",1,"text-white","text-2xl","font-bold"],["src","https://infraon.io/assets/img/infinity-logos/web-logo/infraon_logo_small.svg",1,"h-10"],[1,"hidden","sm:block","sm:ml-6"],[1,"flex","space-x-4"],["href","#",1,"text-gray-300","hover:bg-gray-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["href","./matches",1,"text-gray-300","hover:bg-gray-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],["href","./teams",1,"text-gray-300","hover:bg-gray-700","hover:text-white","px-3","py-2","rounded-md","text-sm","font-medium"],[1,"sm:hidden",3,"ngClass"],[1,"px-2","pt-2","pb-3","space-y-1"],["href","#",1,"text-gray-300","hover:bg-gray-700","hover:text-white","block","px-3","py-2","rounded-md","text-base","font-medium"],["href","./matches",1,"text-gray-300","hover:bg-gray-700","hover:text-white","block","px-3","py-2","rounded-md","text-base","font-medium"],["href","./teams",1,"text-gray-300","hover:bg-gray-700","hover:text-white","block","px-3","py-2","rounded-md","text-base","font-medium"],[1,"flex","justify-center","items-center","py-2","bg-gray-100"],[1,"text-gray-700","text-center","text-sm"],[1,"text-red-600"]],template:function(i,o){i&1&&(J(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),rr("click",function(){return o.toggleNavbar()}),J(5,"span",5),te(6,"Open main menu"),Q(),pC(),J(7,"svg",6),yn(8,"path",7),Q(),J(9,"svg",8),yn(10,"path",9),Q()()(),gC(),J(11,"div",10)(12,"div",11)(13,"a",12),yn(14,"img",13),Q()(),J(15,"div",14)(16,"div",15)(17,"a",16),te(18,"Leaderboard"),Q(),J(19,"a",17),te(20,"Matches"),Q(),J(21,"a",18),te(22,"Teams"),Q()()()()()(),J(23,"div",19)(24,"div",20)(25,"a",21),te(26,"Leaderboard"),Q(),J(27,"a",22),te(28,"Matches"),Q(),J(29,"a",23),te(30,"Teams"),Q()()()(),yn(31,"router-outlet"),J(32,"div",24)(33,"p",25),te(34," Made with "),J(35,"span",26),te(36,"\u2665"),Q(),te(37," by Faizan & ChatGPT "),Q()()),i&2&&(We(23),mn("ngClass",cs(1,mz,o.navbarOpen,!o.navbarOpen)))},dependencies:[za,Rw]});let t=e;return t})();var jN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Nt({type:e,bootstrap:[LN]}),e.\u0275inj=Rt({imports:[sS,VN,IA.initializeApp({apiKey:"AIzaSyB8mSKNJBpJ2Yr_6YP6m5FSTLZHS3C63Zo",authDomain:"infraon-sports.firebaseapp.com",projectId:"infraon-sports",storageBucket:"infraon-sports.appspot.com",messagingSenderId:"74086632111",appId:"1:74086632111:web:7486b31ed85c4d343f625a"}),sN,PN]});let t=e;return t})();oS().bootstrapModule(jN,{ngZoneEventCoalescing:!0}).catch(t=>console.error(t));
